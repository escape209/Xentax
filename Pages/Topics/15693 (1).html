<!DOCTYPE html>
<html dir="ltr" lang="en-gb">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>[PS3] GTA V .CDR 3D Drawables Reversing edge related - Page 2 - XeNTaX</title>


	<link rel="canonical" href="https://forum.xentax.com/viewtopic.php?t=15693&amp;start=15">

<!--
	phpBB style name: prosilver
	Based on style:   prosilver (this is the default phpBB3 style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by:
-->

<link href="./assets/css/font-awesome.min.css?assets_version=11" rel="stylesheet">
<link href="./styles/prosilver/theme/stylesheet.css?assets_version=11" rel="stylesheet">
<link href="./styles/prosilver/theme/en/stylesheet.css?assets_version=11" rel="stylesheet">




<!--[if lte IE 9]>
	<link href="./styles/prosilver/theme/tweaks.css?assets_version=11" rel="stylesheet">
<![endif]-->


<link href="./ext/gfksx/thanksforposts/styles/prosilver/theme/thanks.css?assets_version=11" rel="stylesheet" media="screen" />
<link href="./ext/hifikabin/headerbanner/styles/prosilver/theme/headerbanner.css?assets_version=11" rel="stylesheet" media="screen" />
<link href="./ext/hifikabin/headerbanner/styles/prosilver/theme/headerbanner_background.css?assets_version=11" rel="stylesheet" media="screen" />
<link href="./ext/phpbb/boardannouncements/styles/all/theme/boardannouncements.css?assets_version=11" rel="stylesheet" media="screen" />



</head>
<body id="phpbb" class="nojs notouch section-viewtopic ltr ">


<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>
	<div id="page-header">
		<div class="headerbar" role="banner">
					<div class="inner">

			<div id="site-description" class="site-description">
		<a id="logo" class="logo" href="./index.php" title="Board index">
					<span class="site_logo"></span>
				</a>
				<h1>XeNTaX</h1>
				<p>Game Research Forum</p>
				<p class="skiplink"><a href="#start_here">Skip to content</a></p>
			</div>

									<div class="banner-header">
	<div style="position:absolute; z-index:-100;">
	<h1>XeNTaX</h1>
	<p>Game Research Forum</p>
	<p class="skiplink"><a href="#start_here">Skip to content</a></p>
</div>
<div class="header-banner">
	<a href="./index.php" title="Board index"><img class="header-banner" style="border-radius:0px; width:1500px;" src="http://forum.xentax.com/images/gameresforum_logo_1.png" alt="Board index" ></a>
</div>
</div>

			</div>
					</div>
				<div class="navbar" role="navigation">
	<div class="inner">

	<ul id="nav-main" class="nav-main linklist" role="menubar">

		<li id="quick-links" class="quick-links dropdown-container responsive-menu" data-skip-responsive="true">
			<a href="#" class="dropdown-trigger">
				<i class="icon fa-bars fa-fw" aria-hidden="true"></i><span>Quick links</span>
			</a>
			<div class="dropdown">
				<div class="pointer"><div class="pointer-inner"></div></div>
				<ul class="dropdown-contents" role="menu">
					
											<li class="separator"></li>
													<li>
								<a href="./search.php?search_id=egosearch" role="menuitem">
									<i class="icon fa-file-o fa-fw icon-gray" aria-hidden="true"></i><span>Your posts</span>
								</a>
							</li>
																			<li>
								<a href="./search.php?search_id=newposts" role="menuitem">
									<i class="icon fa-file-o fa-fw icon-red" aria-hidden="true"></i><span>New posts</span>
								</a>
							</li>
																			<li>
								<a href="./search.php?search_id=unreadposts" role="menuitem">
									<i class="icon fa-file-o fa-fw icon-red" aria-hidden="true"></i><span>Unread posts</span>
								</a>
							</li>
													<li>
								<a href="./search.php?search_id=unanswered" role="menuitem">
									<i class="icon fa-file-o fa-fw icon-gray" aria-hidden="true"></i><span>Unanswered topics</span>
								</a>
							</li>
							<li>
								<a href="./search.php?search_id=active_topics" role="menuitem">
									<i class="icon fa-file-o fa-fw icon-blue" aria-hidden="true"></i><span>Active topics</span>
								</a>
							</li>
							<li class="separator"></li>
							<li>
								<a href="./search.php" role="menuitem">
									<i class="icon fa-search fa-fw" aria-hidden="true"></i><span>Search</span>
								</a>
							</li>
					
											<li class="separator"></li>
													<li>
								<a href="./memberlist.php" role="menuitem">
									<i class="icon fa-group fa-fw" aria-hidden="true"></i><span>Members</span>
								</a>
							</li>
																			<li>
								<a href="./memberlist.php?mode=team" role="menuitem">
									<i class="icon fa-shield fa-fw" aria-hidden="true"></i><span>The team</span>
								</a>
							</li>
																<li class="separator"></li>

						<li>
		<a href="/app.php/toplist"  role="menuitem">
			<i class="icon fa-star-o fa-fw" aria-hidden="true"></i><span>Posts toplist</span>
		</a>
	</li>
	<li>
		<a href="/app.php/thankslist"  role="menuitem">
			<i class="icon fa-thumbs-o-up fa-fw" aria-hidden="true"></i><span>Thanks list</span>
		</a>
	</li>
				</ul>
			</div>
		</li>

				<li data-last-responsive="true">
			<a href="/app.php/help/faq" rel="help" title="Frequently Asked Questions" role="menuitem">
				<i class="icon fa-question-circle fa-fw" aria-hidden="true"></i><span>FAQ</span>
			</a>
		</li>
						
					<li id="username_logged_in" class="rightside " data-skip-responsive="true">
						<div class="header-profile dropdown-container">
				<a href="./ucp.php" class="header-avatar dropdown-trigger"> <span class="username">escape209</span></a>
				<div class="dropdown">
					<div class="pointer"><div class="pointer-inner"></div></div>
					<ul class="dropdown-contents" role="menu">
						
					
						<li>
							<a href="./ucp.php" title="User Control Panel" role="menuitem">
								<i class="icon fa-sliders fa-fw" aria-hidden="true"></i><span>User Control Panel</span>
							</a>
						</li>
													<li>
								<a href="./memberlist.php?mode=viewprofile&u=123876.html" title="Profile" role="menuitem">
									<i class="icon fa-user fa-fw" aria-hidden="true"></i><span>Profile</span>
								</a>
							</li>
						
						
						<li class="separator"></li>
						<li>
							<a href="./ucp.php?mode=logout&amp;sid=959ea14a0771cc2de19d1bba114b7679" title="Logout" accesskey="x" role="menuitem">
								<i class="icon fa-power-off fa-fw" aria-hidden="true"></i><span>Logout</span>
							</a>
						</li>
					</ul>
				</div>
			</div>
					</li>
					<li class="rightside" data-skip-responsive="true">
				<a href="./ucp.php?i=pm&amp;folder=inbox" role="menuitem">
					<i class="icon fa-inbox fa-fw" aria-hidden="true"></i><span>Private messages </span><strong class="badge hidden">0</strong>
				</a>
			</li>
							<li class="dropdown-container dropdown-right rightside" data-skip-responsive="true">
				<a href="./ucp.php?i=ucp_notifications" id="notification_list_button" class="dropdown-trigger">
					<i class="icon fa-bell fa-fw" aria-hidden="true"></i><span>Notifications </span><strong class="badge hidden">0</strong>
				</a>
				<div id="notification_list" class="dropdown dropdown-extended notification_list">
	<div class="pointer"><div class="pointer-inner"></div></div>
	<div class="dropdown-contents">
		<div class="header">
			Notifications
			<span class="header_settings">
				<a href="./ucp.php?i=ucp_notifications&amp;mode=notification_options">Settings</a>
							</span>
		</div>

		<ul>
							<li class="no_notifications">
					You have no notifications
				</li>
								</ul>

		<div class="footer">
			<a href="./ucp.php?i=ucp_notifications"><span>See All</span></a>
		</div>
	</div>
</div>
			</li>
						</ul>

	<ul id="nav-breadcrumbs" class="nav-breadcrumbs linklist navlinks" role="menubar">
				
		
		<li class="breadcrumbs" itemscope itemtype="https://schema.org/BreadcrumbList">

			
							<span class="crumb" itemtype="https://schema.org/ListItem" itemprop="itemListElement" itemscope><a itemprop="item" href="./index.php" accesskey="h" data-navbar-reference="index"><i class="icon fa-home fa-fw"></i><span itemprop="name">Board index</span></a><meta itemprop="position" content="1" /></span>

											
								<span class="crumb" itemtype="https://schema.org/ListItem" itemprop="itemListElement" itemscope data-forum-id="24"><a itemprop="item" href="./viewforum.php?f=24"><span itemprop="name">Game Modding</span></a><meta itemprop="position" content="2" /></span>
															
								<span class="crumb" itemtype="https://schema.org/ListItem" itemprop="itemListElement" itemscope data-forum-id="16"><a itemprop="item" href="./viewforum.php?f=16"><span itemprop="name">3D/2D models</span></a><meta itemprop="position" content="3" /></span>
							
					</li>

		<li class="rightside responsive-search">
	<a href="./search.php" title="View the advanced search options" role="menuitem">
	<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
	</a>
</li>

			</ul>

	</div>
</div>
	</div>

	
	<a id="start_here" class="anchor"></a>
	<div id="page-body" class="page-body" role="main">
		
					<div id="phpbb_announcement" style="background-color:#d9efff">
				<div><strong class="text-strong"><span style="color:#00BF00"><span style="font-size:120%;line-height:116%">Important information: this site is currently <a href="https://forum.xentax.com/viewtopic.php?t=27281" class="postlink">scheduled to go offline indefinitely</a> by end of the year. </span></span></strong></div>
	</div>

<h2 class="topic-title"><a href="./viewtopic.php?t=15693&amp;start=15">[PS3] GTA V .CDR 3D Drawables Reversing edge related</a></h2>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body -->
<div style="display: none !important;">Post questions about game models here, or help out others!<br /></div>

	<div class="rules rules-link">
		<div class="inner">

					<a href="http://forum.xentax.com/viewtopic.php?f=28&amp;t=1270">Forum rules</a>
		
		</div>
	</div>

<div class="action-bar bar-top">
	
			<a href="./posting.php?mode=reply&amp;t=15693" class="button" title="Post a reply">
							<span>Post Reply</span> <i class="icon fa-reply fa-fw" aria-hidden="true"></i>
					</a>
	
			<div class="dropdown-container dropdown-button-control topic-tools">
		<span title="Topic tools" class="button button-secondary dropdown-trigger dropdown-select">
			<i class="icon fa-wrench fa-fw" aria-hidden="true"></i>
			<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
		</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
													<li>
						<a href="./viewtopic.php?uid=123876&amp;f=16&amp;t=15693&amp;watch=topic&amp;start=15&amp;hash=9fef6035" class="watch-topic-link" title="Subscribe topic" data-ajax="toggle_link" data-toggle-class="icon fa-square-o fa-fw" data-toggle-text="Unsubscribe topic" data-toggle-url="./viewtopic.php?uid=123876&amp;f=16&amp;t=15693&amp;unwatch=topic&amp;start=15&amp;hash=9fef6035" data-update-all=".watch-topic-link">
							<i class="icon fa-check-square-o fa-fw" aria-hidden="true"></i><span>Subscribe topic</span>
						</a>
					</li>
													<li>
						<a href="./viewtopic.php?t=15693&amp;start=15&amp;bookmark=1&amp;hash=9fef6035" class="bookmark-link" title="Bookmark topic" data-ajax="alt_text" data-alt-text="Remove from bookmarks" data-update-all=".bookmark-link">
							<i class="icon fa-bookmark-o fa-fw" aria-hidden="true"></i><span>Bookmark topic</span>
						</a>
					</li>
																<li>
					<a href="./memberlist.php?mode=email&amp;t=15693" title="Email topic">
						<i class="icon fa-envelope-o fa-fw" aria-hidden="true"></i><span>Email topic</span>
					</a>
				</li>
												<li>
					<a href="./viewtopic.php?t=15693&amp;start=15&amp;view=print" title="Print view" accesskey="p">
						<i class="icon fa-print fa-fw" aria-hidden="true"></i><span>Print view</span>
					</a>
				</li>
											</ul>
		</div>
	</div>
	
			<div class="search-box" role="search">
			<form method="get" id="topic-search" action="./search.php">
			<fieldset>
				<input class="inputbox search tiny"  type="search" name="keywords" id="search_keywords" size="20" placeholder="Search this topic…" />
				<button class="button button-search" type="submit" title="Search">
					<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
				</button>
				<a href="./search.php" class="button button-search-end" title="Advanced search">
					<i class="icon fa-cog fa-fw" aria-hidden="true"></i><span class="sr-only">Advanced search</span>
				</a>
				<input type="hidden" name="t" value="15693" />
<input type="hidden" name="sf" value="msgonly" />

			</fieldset>
			</form>
		</div>
	
			<div class="pagination">
			20 posts
							<ul>
			<li class="arrow previous"><a class="button button-icon-only" href="./15693.html" rel="prev" role="button"><i class="icon fa-chevron-left fa-fw" aria-hidden="true"></i><span class="sr-only">Previous</span></a></li>
				<li><a class="button" href="./15693.html" role="button">1</a></li>
			<li class="active"><span>2</span></li>
	</ul>
					</div>
		</div>




			<div id="p125984" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile125984">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="./memberlist.php?mode=viewprofile&u=61111.html" class="username">psxmodder</a>							</dt>

						<dd class="profile-rank">ultra-n00b</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=61111&amp;sr=posts">9</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Sat Jan 07, 2017 4:52 am</dd>		
		
						    <dd class="profile-posts" data-user-give-id="61111"><strong>Has&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/61111/true">1 time</a></dd>
    <dd class="profile-posts" data-user-receive-id="61111"><strong>Been&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/61111/false">3 times</a></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact psxmodder">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact psxmodder</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=125984" title="Send private message" class="last-cell">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content125984">

					<h3 class="first">
						<a href="./viewtopic.php?p=125984#p125984">Re: [PS3] GTA V .CDR 3D Drawables Reversing edge related</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/125984/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=125984" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post125984' href="./viewtopic.php?f=16&amp;p=125984&amp;thanks=125984&amp;to_id=61111&amp;from_id=123876" title="Say Thanks to the author of the post: psxmodder"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=125984#p125984" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="./memberlist.php?mode=viewprofile&u=61111.html" class="username">psxmodder</a></strong> &raquo; </span><time datetime="2017-01-09T21:59:35+00:00">Mon Jan 09, 2017 10:59 pm</time>
			</p>
			
			
			
			<div class="content"><blockquote><div><cite>shakotay2 wrote:</cite><blockquote><div><cite>psxmodder wrote:</cite>It's ok but i think that the "short all" method must be the one used because you get the normals, how are you converting those 2 bytes in "short all" method?</div></blockquote>like described in my post before<br>

<blockquote class="uncited"><div> i was thinking that you were using hf kind of conversion but now i see that you were referring to another type.</div></blockquote>didn't you understand my post as of Mon Jan 09, 2017 8:43 am? Read carefully, please.<br>
I wrote that the result is not senseful when chosing HF_all. Because the data is not half floats, obviously.</div></blockquote>

Yes but i'm using signed int or short type already on java but i'm not even close to the result of mesh extractor. Thats why i'm asking you how really works your "Short all". Yes sorry because that confussion it was because even when you say that with short all there is a result your tool shows a float so there is a conversion even when it starts as a "short".</div>

			
			
									
						<div id='list_thanks125984'>
</div>
<div id='div_post_reput125984'>
</div>

										
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

				<div id="p136137" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile136137">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="./memberlist.php?mode=viewprofile&u=51025.html" class="username">Loomy</a>							</dt>

						<dd class="profile-rank">advanced</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=51025&amp;sr=posts">41</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Sat Sep 12, 2015 2:16 am</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> South Africa</dd>
							    <dd class="profile-posts" data-user-give-id="51025"><strong>Has&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/51025/true">20 times</a></dd>
    <dd class="profile-posts" data-user-receive-id="51025"><strong>Been&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/51025/false">6 times</a></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact Loomy">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact Loomy</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=136137" title="Send private message" class="last-cell">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content136137">

					<h3 >
						<a href="./viewtopic.php?p=136137#p136137">Re: [PS3] GTA V .CDR 3D Drawables Reversing edge related</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/136137/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=136137" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post136137' href="./viewtopic.php?f=16&amp;p=136137&amp;thanks=136137&amp;to_id=51025&amp;from_id=123876" title="Say Thanks to the author of the post: Loomy"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=136137#p136137" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="./memberlist.php?mode=viewprofile&u=51025.html" class="username">Loomy</a></strong> &raquo; </span><time datetime="2017-12-10T01:20:54+00:00">Sun Dec 10, 2017 2:20 am</time>
			</p>
			
			
			
			<div class="content">It is most unfortunate there is little to none knowledge shared on the topic of PS EDGE Compression, ive been trying to figure out for ages, or even find a good and proper PS3 sdk release without missing code. and correct or more recent edgeLib source.<br>
<br>
Finally found a good 1.2 <img class="smilies" src="./images/smilies/%5Bcolon%5DD.gif" width="15" height="15" alt=":D" title="Very Happy"> and it seems to be exactly what the doctor ordered ;D  here is main code of interst (not sure on issues with sharing whole pack but drop me a pm and will share it with pleasure)<br>
<br>
At quick glance, was interesting to see, :-<br>
<br>
* there is seperate routines for handling Vertex compressed blocks &amp;&amp; Animation Data (spline / streamable KF's ? )  &amp;&amp;  DXT textures<br>
<br>
* It comes in few flavours:-  LZMA / LZO  / Zlib/gz <br>
<br>
<br>
Im going to be working on porting edge decomp to c#<br>
<br>
p.s. on a sidenote,ive noticed edgeComp is remarkably similar to same data compressed with standard lzma (no dic)<br>

<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>/* 
 * PS Edge 1.2.0 (2007)
 */

#include "edge/geom/edgegeom.h"
#include "edge/geom/edgegeom_internal.h"
#include "edge/geom/edgegeom_decompress.h"

/**
 *	Decompresses compressed indexes
 * 
 * 	There are 4 main loops here, each doing 1 step in the decompression.  There is
 *  additional documentation inside the LibEdge-Overview document.  
 * 
 * 	The first loop decompress an n-bit stream into halfwords.  There are separate
 *  implementations for n &lt;=8 and n &gt; 8, due to the ability of n-bit values to straddle
 *  3 bytes, requiring additional work (9 is included in this group, even though it 
 *  can't straddle three bytes).  
 * 
 * 	For the n &lt;= 8 case:
 * 		1) Load 3 qw
 * 		2) Align such that the first compressed index is aligned to the left of a quadword
 * 		3) Shuffle n-bit values into appropriate half words
 * 		4) Rotate into correct spot in half word
 * 		5) mask off bits n and higher
 * 		6) store
 * 	For the n &gt; 8 case:
 * 		1) Load 6 qw
 * 		2) Align first 3 to front of quadword.  Align second 3 to front of quadword.
 * 		3) Shuffle portions of n-bit values into upper and lower splits.
 * 		4) Shift/rotate each split into place
 * 		5) Select to combine upper and lower bits.
 * 		6) Mask off garbage upper bits.
 * 		7) Store
 * 
 * 	The second loop applies the delta values.  For delta compression, each index decompressed
 * 	from the n-bit stream will have a base value subtracted from it, and will then be added 
 *  half-word-wise to the previous qw of indices.
 * 		1) Load 4 qw
 * 		2) Subtract base offset
 * 		3) Add previous qw of indices
 * 		4) Store
 * 		
 * 	Some additional info before describing the third loop: 
 * 		Actual construction of triangles is done in the 4th loop, using the output of the 3rd
 * 		loop as input.  Triangles are built by reusing previous triangles' indices, together
 * 		with a "new" index, or if none of the old indices can be reused, 3 new indices.  The
 * 		output of the 3rd loop is the stream from which these new indices are selected.
 * 
 * 		The "new index" stream as generated by the Edge Geometry tools is highly sequential; 
 * 		it is, in general, an incrementing series of indices, occasionally interrupted by an
 * 		index seen earlier in the list {1, 2, 3, 4, 1, 5, 6, 7, 3 . . . }.  The stream that
 * 		we've output from the second loop is an ordered list of the out of sequence entries,
 * 		in this case, {1,3}, for the second appearances of those indices.  
 * 
 * 	The third loop decompresses a 1-bit stream which specifies whether the next index in the
 * 	stream should be drawn from the incrementing sequence, or from the out of sequence list
 * 	output by the second loop.  
 * 		1) Load 1-bit control stream and out of sequence indexes
 * 		2) Align control stream
 * 		3) Build masks according to control bits
 * 		4) Shuffle sequence and index streams to produce output
 * 		5) Update sequence qw
 * 		6) Shuffle sequence and next set of indices to produce next output.
 * 		7) Update sequence
 * 		8) Store final output buffers
 * 
 *  The fourth loop builds the final triangle ordering, using the output of the third loop
 * 	as the input of "new" indexes.  A 2-bit pattern specifies which triangle ordering should
 *  be used (ACa, CBa, BAa, or abc, where A,B,C are from the previous triangle and a,b,c are
 *  the next indexes in the input stream).  This loop decompresses 8 triangles at a time.
 * 
 * 		1) Load control bits for 8 triangles (1 halfword)
 * 		2) Load enough indices for 8 triangles of all new indices
 * 		3) Rotate control bits to be used as offsets into lookup tables (4 bit indices)
 * 		4) Load triangle format masks and input stream update masks
 * 		5) Shuffle inputs to make first triangle.
 * 		6) Shuffle inputs to remove used indices.
 * 		7) Repeat 5 and 6 twice.  
 * 		8) Repeat 5 a third time (inputs needn't be realigned, since they'll be reloaded next 
 * 		   time through)
 * 		9) Shuffle triangles together to form final output stream.
 * 		10)Store outputs.
 * 
 * 	At this point we have our final index list, and can free the space previously taken up
 * 	by the block of index data.
 */
#if !DECOMPRESSINDEXES_INTRINSICS
static void DecompressIndexes_2BitStream(uint16_t *pIndexStream, uint8_t *pControlStream, uint16_t *pOutputStream, uint32_t numTriangles)
{
	//always outputs 48 bytes =&gt; 8 triangles
    //4 triangles per control byte
	const uint32_t numTrianglesRounded = (numTriangles + 7) &amp; -8;
	const uint32_t outerLoopCount = numTrianglesRounded &gt;&gt; 2;
	
	for (uint32_t i = 0; i &lt; outerLoopCount; i++) {
		uint8_t controlBits = *pControlStream++;
		for (uint32_t j = 0; j &lt; 4; j++) {
			uint8_t code = controlBits &amp; 0xC0;

			switch (code) {
			case 0xC0: //abca
				pOutputStream[0] = *pIndexStream++;
				pOutputStream[1] = *pIndexStream++;
				pOutputStream[2] = *pIndexStream++;
				pOutputStream += 3;
				break;
			case 0x80: //BAa
				pOutputStream[0] = *(pOutputStream - 2);
				pOutputStream[1] = *(pOutputStream - 3);
				pOutputStream[2] = *pIndexStream++;
				pOutputStream += 3;
				break;
			case 0x40: //CBa
				pOutputStream[0] = *(pOutputStream - 1);
				pOutputStream[1] = *(pOutputStream - 2);
				pOutputStream[2] = *pIndexStream++;
				pOutputStream += 3;
				break;
			case 0x0: //ACa
				pOutputStream[0] = *(pOutputStream-3);
				pOutputStream[1] = *(pOutputStream-1);
				pOutputStream[2] = *pIndexStream++;
				pOutputStream += 3;
				break;
			default:
				EDGE_ASSERT(0);
			}

			controlBits = controlBits &lt;&lt; 2;
		}
	}
}

static void DecompressIndexes_Relocate2BitStream(uint8_t *src, uint8_t *dst, uint32_t numTriangles)
{
	uint32_t copyCount = 0;
	const uint32_t num2BitStreamBytes = ((numTriangles + numTriangles) + 7) &gt;&gt; 3;

	do{
		//copy 16 bytes
		for (uint32_t i = 0; i &lt; 16; i++) {
			*dst++ = *src++;
		}
		copyCount += 0x10;
	} while(copyCount &lt; num2BitStreamBytes);
}

static void DecompressIndexes_1BitStream(uint16_t *pIndexStream, uint16_t *pOutputStream, uint8_t *pControlStream, uint32_t numIndexes, uint32_t *pEndOfBuffer)
{
	//writes 32 bytes/16 indexes per iteration
	const uint32_t rounded = (numIndexes + 15) &amp; -16;

	uint16_t next = 0;
	uint8_t mask = 1 &lt;&lt; 7;

	for (uint32_t i = 0; i &lt; rounded; i++) {
		uint8_t outOfSequence = *pControlStream &amp; mask;

		if (outOfSequence) {
			*pOutputStream++ = *pIndexStream++;
		}
		else {
			*pOutputStream++ = next++;
		}

		mask = mask &gt;&gt; 1;

		if (!mask) {
			mask = 1 &lt;&lt; 7;
			++pControlStream;
		}
	}

	*pEndOfBuffer = (uint32_t)pOutputStream;
}

static void DecompressIndexes_Deltas(uint16_t *pIndexes, uint32_t numIndexes, uint16_t baseDelta)
{
	//32 deltas at a time
	//runs forward
	//writes out 4 quads

	uint16_t outputDelta[8] __attribute__((__aligned__(16)));
	for (uint32_t i = 0; i &lt; 8; i++)
		outputDelta[i] = 0;

	uint32_t numIter = 	((numIndexes + 31) &amp; -32) &gt;&gt; 3;

	for (uint32_t iter = 0; iter &lt; numIter; iter++) {
		for (uint32_t index = 0; index &lt; 8; index++) {
			outputDelta[index] = pIndexes[8*iter + index] - baseDelta + outputDelta[index];
			pIndexes[8*iter + index] = outputDelta[index];
		}
	}
}

static void DecompressIndexes_NBitStream(uint8_t *pIn, uint16_t *pOut, uint32_t n, uint32_t numToExpand)
{
	//32 indexes at a time
	//runs in reverse
	//writes out 4 quads

	const uint32_t rounded = (numToExpand + 31) &amp; -32;
	pOut = pOut + (rounded - 1);

	uint32_t offset = (rounded - 1) * n;
	for (uint32_t i = rounded; i &gt; 0; i--) 
	{
		uint8_t *b = pIn + (offset &gt;&gt; 3);

		uint32_t b0 = b[0];
		uint32_t b1 = b[1];
		uint32_t b2 = b[2];

		uint32_t buf = (b0 &lt;&lt; 24) | (b1 &lt;&lt; 16) | (b2 &lt;&lt; 8);
		buf = buf &lt;&lt; (offset &amp; 0x7);

		*pOut-- = buf &gt;&gt; (32 - n);

		offset -= n;
	}
}

static void DecompressIndexes_C_Standalone(const unsigned int numIndexes, const void *indexes)
{
	const uint32_t numTriangles = numIndexes / 3;

	const uint32_t num1Bits = (uint32_t)(((uint16_t *)indexes)[2]) &lt;&lt; 3;
	const uint32_t bytesBefore2BitStream = 8 + ((num1Bits + 7) &gt;&gt; 3);
	const uint32_t num2BitStreamBytes = (((numTriangles + numTriangles) + 7) &gt;&gt; 3);

	const uint32_t bytesBeforeNBitStream = bytesBefore2BitStream + num2BitStreamBytes;
	const uint32_t numIndexesInNBitStream = (uint32_t)(((uint16_t *)indexes)[0]);
	uint16_t *decompressedNBitStream = (uint16_t *)((uint32_t)indexes + (bytesBeforeNBitStream + 0xf) &amp; ~0xf);
	const uint32_t n = ((uint8_t *)indexes)[6];

	DecompressIndexes_NBitStream(	(uint8_t *)((uint32_t)indexes + bytesBeforeNBitStream), 
									decompressedNBitStream, 
									n,
									numIndexesInNBitStream);

	const uint16_t deltaOffset =  ((uint16_t *)indexes)[1];
	DecompressIndexes_Deltas(decompressedNBitStream, numIndexesInNBitStream, deltaOffset);

	const uint32_t bytesBeforeDecompressedSequence = ((numTriangles * 6) + 0xf) &amp; ~0xf;
	uint16_t *decompressedSequence = (uint16_t *)((uint32_t)indexes + bytesBeforeDecompressedSequence);
	uint32_t pEndOfDecompressedSequence;
	DecompressIndexes_1BitStream(	decompressedNBitStream,
									decompressedSequence,
									(uint8_t *)((uint32_t)indexes + 8), 
									num1Bits,
									&amp;pEndOfDecompressedSequence);
	

	//copy 2 bit table
	DecompressIndexes_Relocate2BitStream(	(uint8_t *)((uint32_t)indexes + bytesBefore2BitStream),
											(uint8_t *)pEndOfDecompressedSequence,
											numTriangles);

	DecompressIndexes_2BitStream(decompressedSequence, (uint8_t*)pEndOfDecompressedSequence, (uint16_t *)indexes, numTriangles);
}

void DecompressIndexes(EdgeGeomSpuContext *ctx, const void *indexes)
{
	DecompressIndexes_C_Standalone(ctx-&gt;spuConfigInfo.numIndexes, indexes);

	void* freePtr = (void *)((uint32_t)indexes + (ctx-&gt;spuConfigInfo.numIndexes + ctx-&gt;spuConfigInfo.numIndexes));
	freePtr = (void*)(((unsigned int)freePtr + 0xf) &amp; ~0xf);
	edgeGeomSetFreePtr(ctx, freePtr);
}
#endif

#if !DECOMPRESSVERTEXESBYDESCRIPTION_INTRINSICS
static inline float sqrt(float f)
{
	return f * si_to_float(si_fi(si_from_float(f), si_frsqest(si_from_float(f))));
}

void DecompressVertexesByDescription(EdgeGeomSpuContext *ctx,
	const void *vertexes, const void *fixedOffsets, const EdgeGeomVertexStreamDescription *streamDesc,
	uint32_t numVertexes, float blendFactor, uint16_t *blendedVertexTable)
{
	if (numVertexes == 0) {
		return;
	}

	const bool isBlending = blendFactor != 0.f;

	uint32_t *fixedPointOffsets = (uint32_t *)fixedOffsets;

	if (isBlending &amp;&amp; (ctx-&gt;spuConfigInfo.flagsAndUniformTableCount &amp; EDGE_GEOM_FLAG_INCLUDES_EXTRA_UNIFORM_TABLE) == 0)
	{
		EDGE_PRINTF("ERROR: attempt to use blend shapes without allocating an extra uniform table!\n");
		return;
	}

	const uint32_t unroundedVertexCount = numVertexes;
	const uint32_t vertexCount  = (numVertexes+3)&amp; ~3;
	const uint32_t vertexStride = streamDesc-&gt;stride;

#ifdef EDGE_GEOM_DEBUG
	if (streamDesc-&gt;stride == 0)
	{
		EDGE_PRINTF("ERROR: input/blend stream description has 0 size!\n");
		return;
	}	
#endif

	const bool isFastStaticPath = (ctx-&gt;spuConfigInfo.flagsAndUniformTableCount &amp; EDGE_GEOM_FLAG_STATIC_GEOMETRY_FAST_PATH) != 0;

	const EdgeGeomGenericBlock *nextAttribute = streamDesc-&gt;blocks;
	// Process each attribute sequentially.
	for(uint32_t iAttr=0; iAttr&lt;streamDesc-&gt;numAttributes; ++iAttr)
	{
		// Load the attribute description

		uint8_t *pIn = (uint8_t *)vertexes;

		EdgeGeomAttributeBlock attribute = nextAttribute-&gt;attributeBlock;
		nextAttribute++;

		const int attrId = attribute.edgeAttributeId;
		// If this segment uses the fast path for static geometry, don't decompress anything except
		// position.
		if ( isFastStaticPath &amp;&amp; attrId != EDGE_GEOM_ATTRIBUTE_ID_POSITION)
		{
			continue;
		}

		// Get the number of valid uniform tables, excluding the extra table (if present)
		uint32_t uniformTableCount = edgeGeomGetUniformTableCount(ctx);
		if ((ctx-&gt;spuConfigInfo.flagsAndUniformTableCount &amp; EDGE_GEOM_FLAG_INCLUDES_EXTRA_UNIFORM_TABLE) == 0)
		{
			uniformTableCount--;
		}
			
		// Decompress this attribute to the next unassigned uniform table.  If we're blending,
		// we decompress the deltas into the spare uniform table first, and then blend them into
		// the final destination table.
		int32_t destTableIndex = -1;
		for(uint32_t iTable=0; iTable&lt;uniformTableCount; ++iTable)
		{
			if (ctx-&gt;uniformTableToAttributeIdMapping[iTable] == EDGE_GEOM_ATTRIBUTE_ID_UNKNOWN)
			{
				destTableIndex = iTable;
				break;
			}
		}
		EDGE_ASSERT_MSG(destTableIndex &gt;= 0, ("ERROR: too many vertex attributes, not enough uniform tables!"));

		float *pUniform = isBlending ? ctx-&gt;uniformTables[ctx-&gt;spuConfigInfo.flagsAndUniformTableCount &amp; 0xF] : ctx-&gt;uniformTables[destTableIndex];
		const int32_t attribFormat = attribute.format;
		void *pDestTable = (void *)pUniform;

		// if we're blending, check to make sure there's already a
		// uniform table for the current attribute.  If not, skip it
		// (there's nothing to blend with!)
		float *pBlendTable = 0;
		if (isBlending)
		{
			const uint8_t id = attribute.edgeAttributeId;
			for (uint32_t iTable = 0; iTable &lt; uniformTableCount; iTable++) {
				if (ctx-&gt;uniformTableToAttributeIdMapping[iTable] == id) {
					pBlendTable = (float *)edgeGeomGetUniformTable(ctx, iTable);
					break;
				}
			}
			if (pBlendTable == 0)
				continue;
		}

		//offset into vertex
		const uint8_t attribOffset = attribute.offset;

		pIn += attribOffset;

		switch(attribFormat)
		{
		case EDGE_GEOM_ATTRIBUTE_FORMAT_F32:
			{
				for (uint32_t i = 0; i &lt; vertexCount; i++) {
					uint8_t *pCurr = pIn;
					uint32_t j;
					for (j = 0; j &lt; attribute.componentCount; j++) {
						union {float f; uint8_t b[4];} u;
	
						u.b[0] = pCurr[0];
						u.b[1] = pCurr[1];
						u.b[2] = pCurr[2];
						u.b[3] = pCurr[3];
	
						pUniform[j] = u.f;
						pCurr += 4;
					}
					for (; j &lt; 3; j++) {
						pUniform[j] = 0.f;
					}
					for (; j &lt; 4; j++) {
						pUniform[j] = 1.f;
					}
					pIn += vertexStride;
					pUniform += 4;
				}
			}
			break;
		case EDGE_GEOM_ATTRIBUTE_FORMAT_F16:
			{
				for (uint32_t i = 0; i &lt; vertexCount; i++) {
					uint8_t *pCurr = pIn;
					for (uint32_t j = 0; j &lt; attribute.componentCount; j++) {
						union {float f; uint32_t u32; uint8_t b[4];} u;
	
						u.b[0] = pCurr[0];
						u.b[1] = pCurr[1];
						u.b[2] = 0;
						u.b[3] = 0;

						//1|5|10
						uint32_t signBit = u.u32 &amp; 0x80000000;
						uint32_t exp = (u.u32 &gt;&gt; 26) &amp; 0x1F;
						uint32_t man = (u.u32 &gt;&gt; 16) &amp; 0x3FF;

						u.u32 = signBit | ((exp + 112) &lt;&lt; 23) | (man &lt;&lt; 13);
						pUniform[j] = u.f;
						pCurr += 2;
					}
					pIn += vertexStride;
					pUniform += 4;
				}
			}
			break;
		case EDGE_GEOM_ATTRIBUTE_FORMAT_I16:
			for (uint32_t i = 0; i &lt; vertexCount; i++) {
				uint8_t *pCurr = pIn;
				for (uint32_t j = 0; j &lt; attribute.componentCount; j++) {
					union {int16_t i16; uint8_t b[2];} u;
					u.b[0] = pCurr[0];
					u.b[1] = pCurr[1];

					pUniform[j] = (float)u.i16;
					
					pCurr += 2;
				}
				pIn += vertexStride;
				pUniform += 4;
			}
			break;
		case EDGE_GEOM_ATTRIBUTE_FORMAT_I16N:
			{
				const float i16nScale = 2.0f / 65535.0f;
				const float i16nBias = 1.0f / 65535.0f;
				for (uint32_t i = 0; i &lt; vertexCount; i++) {
					uint8_t *pCurr = pIn;
					for (uint32_t j = 0; j &lt; attribute.componentCount; j++) {
						union {int16_t i16; uint8_t b[2];} u;
						u.b[0] = pCurr[0];
						u.b[1] = pCurr[1];

						pUniform[j] = ((float)u.i16) * i16nScale + i16nBias;

						pCurr += 2;
					}
					pIn += vertexStride;
					pUniform += 4;
				}
			}
			break;
		case EDGE_GEOM_ATTRIBUTE_FORMAT_U8:
			for (uint32_t i = 0; i &lt; vertexCount; i++) {
				uint8_t *pCurr = pIn;
				for (uint32_t j = 0; j &lt; attribute.componentCount; j++) {
					uint32_t u32 = (uint32_t)pCurr[0];
					pUniform[j] = (float)u32;

					pCurr += 1;
				}
				pIn += vertexStride;
				pUniform += 4;
			}
			break;
		case EDGE_GEOM_ATTRIBUTE_FORMAT_U8N:
			{
				const float u8nScale = 1.0f / 255.0f;
				const float u8nBias = 0.0f;

				for (uint32_t i = 0; i &lt; vertexCount; i++) {
					uint8_t *pCurr = pIn;
					for (uint32_t j = 0; j &lt; attribute.componentCount; j++) {
						uint32_t u32 = (uint32_t)pCurr[0];
						pUniform[j] = ((float)u32) * u8nScale + u8nBias;

						pCurr += 1;
					}
					pIn += vertexStride;
					pUniform += 4;
				}
			}
			break;
		case EDGE_GEOM_ATTRIBUTE_FORMAT_X11Y11Z10N:
			{
				const uint32_t x11y11z10Table[8] = 
				{
					0x3F801002, 0x3F801002, 0x3F802008, 0,
					0x3A001002, 0x3A001002, 0x3A802008, 0x3F800000
				};

				//this violates strict aliasing
				union {const float *f; const uint32_t *u32;} u;
				u.u32 = x11y11z10Table;

				const float x11y11z10ScaleX = u.f[0];
				const float x11y11z10ScaleY = u.f[1];
				const float x11y11z10ScaleZ = u.f[2];
				//const float x11y11z10ScaleW = u.f[3];
	
				const float x11y11z10BiasX = u.f[4];
				const float x11y11z10BiasY = u.f[5];
				const float x11y11z10BiasZ = u.f[6];
				const float x11y11z10BiasW = u.f[7];
	
				for (uint32_t i = 0; i &lt; vertexCount; i++) {
					uint8_t *pCurr = pIn;
					union {int32_t i32; uint8_t b[4];} u;
	
					u.b[0] = pCurr[0];
					u.b[1] = pCurr[1];
					u.b[2] = pCurr[2];
					u.b[3] = pCurr[3];
	
					int32_t ix = u.i32 &lt;&lt; 16;
					int32_t iy = (u.i32 &lt;&lt; 8) &amp; 0xFFFF0000;
					int32_t iz = u.i32 &amp; 0xFFFF0000;
	
					ix &lt;&lt;= 5;
					iy &lt;&lt;= 2;
	
					ix &amp;= 0xFFE00000;
					iy &amp;= 0xFFE00000;
					iz &amp;= 0xFFC00000;
	
					float x = ((float)ix / (float)(1 &lt;&lt; 31)) * x11y11z10ScaleX + x11y11z10BiasX;
					float y = ((float)iy / (float)(1 &lt;&lt; 31)) * x11y11z10ScaleY + x11y11z10BiasY;
					float z = ((float)iz / (float)(1 &lt;&lt; 31)) * x11y11z10ScaleZ + x11y11z10BiasZ;
					float w = x11y11z10BiasW;
	
					pUniform[0] = x;
					pUniform[1] = y;
					pUniform[2] = z;
					pUniform[3] = w;
	
					pIn += vertexStride;
					pUniform += 4;
				}
			}
			break;
		case EDGE_GEOM_ATTRIBUTE_FORMAT_FIXED_POINT:
			{
				const uint32_t fixedTable[1] = {0x4F800000};
				union {const float *f; const uint32_t *u32;} u;
				u.u32 = fixedTable;

				const float fixedScale = *(float *)u.f;

				EdgeGeomAttributeFixedBlock fixed = *(EdgeGeomAttributeFixedBlock *)((uint32_t)(streamDesc-&gt;blocks) + attribute.fixedBlockOffset);
				uint8_t *bits = (uint8_t *)&amp;fixed;

				const uint32_t intBits[4] = {bits[0], bits[2], bits[4], bits[6]};
				const uint32_t manBits[4] = {bits[1], bits[3], bits[5], bits[7]};
				const uint32_t totBits[4] = {	intBits[0] + manBits[0],
												intBits[1] + manBits[1],
												intBits[2] + manBits[2],
												intBits[3] + manBits[3]};

				for (uint32_t i = 0; i &lt; vertexCount; i++) {
					uint8_t *pCurr = pIn;
					for (uint32_t j = 0; j &lt; attribute.componentCount; j++) {
						union {int32_t i32; uint8_t u8[4];} u;
						u.u8[0] = pCurr[0];
						u.u8[1] = pCurr[1];
						u.u8[2] = pCurr[2];
						u.u8[3] = pCurr[3];

						//shift and mask out the garbage
						int32_t shifted = u.i32 &gt;&gt; (32 - totBits[j]);
						shifted += fixedPointOffsets[j];
						//shift int bits right, man bits left, convert separately, and add
						const int32_t intShifted = shifted &gt;&gt; manBits[j];
						const uint32_t manShifted = shifted &lt;&lt; (32 - manBits[j]);
						const float fInt = (float)intShifted;
						const float fMan = (float)manShifted / fixedScale;

						pUniform[j] = fInt + fMan;
						pCurr += (totBits[j]) &gt;&gt; 3;
					}
					pIn += vertexStride;
					pUniform += 4;
				}
				fixedPointOffsets += 4;
			}
			break;
		case EDGE_GEOM_ATTRIBUTE_FORMAT_UNIT_VECTOR:
			{
				const uint32_t uvTable[2] = 
				{
					0x46352e7c, 0xc6353150
				};

				//this violates strict aliasing
				union {const float *f; const uint32_t *u32;} u;
				u.u32 = uvTable;

				const float uvScale = u.f[0];
				const float uvBias = u.f[1];

				for (uint32_t i = 0; i &lt; vertexCount; i++) {
					uint8_t *pCurr = pIn;
					union {uint32_t u32; uint8_t b[4];} u;
	
					u.b[0] = pCurr[0];
					u.b[1] = pCurr[1];
					u.b[2] = pCurr[2];
					u.b[3] = 0;
	
					uint32_t a = (u.u32 &gt;&gt; 22) &amp; 0x3ff;
					uint32_t b = (u.u32 &gt;&gt; 12) &amp; 0x3ff;
					
					union {float f; uint32_t u32;} ua, ub;
					ua.u32 = a | 0x3f800000;
					ub.u32 = b | 0x3f800000;
	
					ua.f = ua.f * uvScale + uvBias;
					ub.f = ub.f * uvScale + uvBias;
	
					float c = sqrt(1.0f - (ua.f * ua.f + ub.f * ub.f));
					c *= (u.u32 &amp; 0x100) ? 1.0f : -1.0f;
					float w = (u.u32 &amp; 0x200) ? 1.0f : -1.0f;
	
					float x=0, y=0, z=0;
					switch ((u.u32 &gt;&gt; 10) &amp; 0x3) {
					case 0:
						x = c;
						y = ua.f;
						z = ub.f;
						break;
					case 1: 
						x = ua.f;
						y = c;
						z = ub.f;
						break;
					case 2:
						x = ua.f;
						y = ub.f;
						z = c;
						break;
					}
	
					pUniform[0] = x;
					pUniform[1] = y;
					pUniform[2] = z;
					pUniform[3] = w;
	
					pIn += vertexStride;
					pUniform += 4;
				}
			}
			break;
		}

		// For decompression purposes, X11Y11Z10N attributes should have 3 components
		uint32_t numComponents = (attribFormat == EDGE_GEOM_ATTRIBUTE_FORMAT_X11Y11Z10N) ? 3 :
			attribute.componentCount;

		// For position attributes with fewer than 4 components, fill
		// in reasonable defaults for any remaining components
		if (attrId == EDGE_GEOM_ATTRIBUTE_ID_POSITION &amp;&amp; numComponents &lt; 4) {
			for (uint32_t i = 0; i &lt; vertexCount; i++) {
				for (uint32_t j = numComponents-1; j&lt;4; ++j) {
					pUniform[4*i + j] = (j &lt; 3) ? 0.0f : 1.0f;
				}
			}
		}

		if (isBlending) {
			//which uniform
			pUniform = (float *)pDestTable;

			//clear out the unused final deltas
			for (uint32_t i = unroundedVertexCount; i &lt; vertexCount; i++) {
				pUniform[4*i + 0] = 0.f;
				pUniform[4*i + 1] = 0.f;
				pUniform[4*i + 2] = 0.f;
				pUniform[4*i + 3] = 0.f;
			}

			for (uint32_t i = 0; i &lt; vertexCount; i++) {
				for (uint32_t j = 0; j &lt; numComponents; j++) {
					// blended vertex table is byte offsets. If the table is NULL,
					// use the delta index as the destination vertex index.
					uint16_t destVertIndex = (blendedVertexTable != 0) ? (blendedVertexTable[i]) &gt;&gt; 4
						: i;
					pBlendTable[4 * destVertIndex + j] += pUniform[4 * i + j] * blendFactor;
				}
			}
		}
		else{
			// Set the uniform table pointers based on the attribute's
			// ID.
			switch(attrId)
			{
			case EDGE_GEOM_ATTRIBUTE_ID_POSITION:
				ctx-&gt;positionTable = pDestTable;
				break;
			case EDGE_GEOM_ATTRIBUTE_ID_NORMAL:
				ctx-&gt;normalTable = pDestTable;
				break;
			case EDGE_GEOM_ATTRIBUTE_ID_TANGENT:
				ctx-&gt;tangentTable = pDestTable;
				break;
			case EDGE_GEOM_ATTRIBUTE_ID_BINORMAL:
				ctx-&gt;binormalTable = pDestTable;
				break;
			}

			ctx-&gt;uniformTableToAttributeIdMapping[destTableIndex] = attrId;
		}
	}
}
#endif

#if !DECOMPRESSBLENDSHAPERUNTABLE_INTRINSICS
void DecompressBlendShapeRunTable(uint16_t *runTable, uint32_t runTableSize,
	uint32_t numDeltas)
{
	if (runTableSize == 0)
		return;

	//we're decompressing it in place, so get pointers to the last delta
	//and to the last entry in the run table
	uint16_t *pDelta = runTable + (numDeltas);
	uint16_t *pIn = ((uint16_t *)(((uint32_t)runTable) + runTableSize)) - 1;

	uint16_t *pZeroDeltas = pDelta;
	while ((uint32_t)pZeroDeltas &amp; 0xF) {
		*pZeroDeltas++ = 0;
	}

	do {
		uint16_t entry = *pIn;
		pIn--;

		uint16_t *pEnd = pDelta;
		uint8_t runSize = (entry &amp; 0x1F) + 1;
		pDelta -= runSize;
		uint16_t *pStart = pDelta;
		uint16_t base = (entry &amp; 0xFFE0) &gt;&gt; 1;

		while (pStart != pEnd) {
			*pStart = base;
			base += 0x10;
			pStart++;
		}
	} while (pIn &gt;= runTable);
}
#endif
</code></pre></div></div>

			
			
									
						<div id='list_thanks136137'>
	<div class="notice">
		<dl>
			
			<dt>These users thanked the author <a href="./memberlist.php?mode=viewprofile&u=51025.html" class="username">Loomy</a> for the post: </dt>
			<dd><span title="Sun Dec 10, 2017 4:15 am"><a href="./memberlist.php?mode=viewprofile&u=4970.html" class="username">Acewell</a></span></dd>
		</dl>
	</div>
</div>
<div id='div_post_reput136137'>
	<div class="notice">
		<dl>
			<dt class="small"><strong>Rating:</strong>&nbsp;1.72%</dt>
			<dd>
						<div style="width: 150px; height: 15px;" class="thanks_reput_image_back"><div style="height: 15px; width: 1.72%;" class="thanks_reput_image"></div></div>&nbsp;
						</dd>
		</dl>
	</div>
</div>

										
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

				<div id="p136146" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile136146">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="./memberlist.php?mode=viewprofile&u=51025.html" class="username">Loomy</a>							</dt>

						<dd class="profile-rank">advanced</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=51025&amp;sr=posts">41</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Sat Sep 12, 2015 2:16 am</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> South Africa</dd>
							    <dd class="profile-posts" data-user-give-id="51025"><strong>Has&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/51025/true">20 times</a></dd>
    <dd class="profile-posts" data-user-receive-id="51025"><strong>Been&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/51025/false">6 times</a></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact Loomy">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact Loomy</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=136146" title="Send private message" class="last-cell">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content136146">

					<h3 >
						<a href="./viewtopic.php?p=136146#p136146">Re: [PS3] GTA V .CDR 3D Drawables Reversing edge related</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/136146/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=136146" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post136146' href="./viewtopic.php?f=16&amp;p=136146&amp;thanks=136146&amp;to_id=51025&amp;from_id=123876" title="Say Thanks to the author of the post: Loomy"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=136146#p136146" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="./memberlist.php?mode=viewprofile&u=51025.html" class="username">Loomy</a></strong> &raquo; </span><time datetime="2017-12-10T12:59:56+00:00">Sun Dec 10, 2017 1:59 pm</time>
			</p>
			
			
			
			<div class="content">my conversion is going horribly wrong, the whole pointer/value/size thing confuses daylights out of me, but here is first out of 4 steps, with sample Edges (original + compressed),  if anyone more clued up on c++, would be greatful for some insight<br>
<br>

<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>unsigned char original_EdgeIndex[315] =
		{
			0x00, 0x00, 0x01, 0x00, 0x02, 0x00, 0x01, 0x00, 0x00, 0x00, 0x03, 0x00, 0x03, 0x00, 0x00, 0x00, 
			0x04, 0x00, 0x03, 0x00, 0x05, 0x00, 0x06, 0x00, 0x04, 0x00, 0x07, 0x00, 0x08, 0x00, 0x08, 0x00, 
			0x07, 0x00, 0x09, 0x00, 0x09, 0x00, 0x07, 0x00, 0x0A, 0x00, 0x09, 0x00, 0x0A, 0x00, 0x0B, 0x00, 
			0x09, 0x00, 0x0B, 0x00, 0x0C, 0x00, 0x09, 0x00, 0x0C, 0x00, 0x0D, 0x00, 0x08, 0x00, 0x0E, 0x00, 
			0x0F, 0x00, 0x0E, 0x00, 0x08, 0x00, 0x10, 0x00, 0x08, 0x00, 0x11, 0x00, 0x12, 0x00, 0x12, 0x00, 
			0x11, 0x00, 0x13, 0x00, 0x13, 0x00, 0x14, 0x00, 0x10, 0x00, 0x15, 0x00, 0x0E, 0x00, 0x16, 0x00, 
			0x15, 0x00, 0x17, 0x00, 0x18, 0x00, 0x18, 0x00, 0x17, 0x00, 0x19, 0x00, 0x19, 0x00, 0x1A, 0x00, 
			0x1B, 0x00, 0x1B, 0x00, 0x1A, 0x00, 0x1C, 0x00, 0x1B, 0x00, 0x1C, 0x00, 0x1D, 0x00, 0x1D, 0x00, 
			0x1C, 0x00, 0x1E, 0x00, 0x1D, 0x00, 0x1E, 0x00, 0x1F, 0x00, 0x1F, 0x00, 0x1E, 0x00, 0x20, 0x00, 
			0x1F, 0x00, 0x20, 0x00, 0x21, 0x00, 0x1F, 0x00, 0x21, 0x00, 0x22, 0x00, 0x22, 0x00, 0x21, 0x00, 
			0x23, 0x00, 0x22, 0x00, 0x23, 0x00, 0x24, 0x00, 0x24, 0x00, 0x23, 0x00, 0x25, 0x00, 0x25, 0x00, 
			0x23, 0x00, 0x26, 0x00, 0x25, 0x00, 0x26, 0x00, 0x27, 0x00, 0x27, 0x00, 0x26, 0x00, 0x28, 0x00, 
			0x27, 0x00, 0x28, 0x00, 0x29, 0x00, 0x29, 0x00, 0x28, 0x00, 0x2A, 0x00, 0x29, 0x00, 0x2A, 0x00, 
			0x2B, 0x00, 0x29, 0x00, 0x2B, 0x00, 0x2C, 0x00, 0x2A, 0x00, 0x2D, 0x00, 0x2B, 0x00, 0x2B, 0x00, 
			0x2D, 0x00, 0x2E, 0x00, 0x2B, 0x00, 0x2E, 0x00, 0x2F, 0x00, 0x2B, 0x00, 0x2F, 0x00, 0x30, 0x00, 
			0x2B, 0x00, 0x30, 0x00, 0x2C, 0x00, 0x2C, 0x00, 0x30, 0x00, 0x31, 0x00, 0x2C, 0x00, 0x31, 0x00, 
			0x32, 0x00, 0x32, 0x00, 0x31, 0x00, 0x33, 0x00, 0x32, 0x00, 0x33, 0x00, 0x34, 0x00, 0x34, 0x00, 
			0x33, 0x00, 0x35, 0x00, 0x36, 0x00, 0x2F, 0x00, 0x2E, 0x00, 0x2F, 0x00, 0x36, 0x00, 0x37, 0x00, 
			0x2F, 0x00, 0x37, 0x00, 0x38, 0x00, 0x2F, 0x00, 0x38, 0x00, 0x39, 0x00, 0x2F, 0x00, 0x39, 0x00, 
			0x3A, 0x00, 0x2F, 0x00, 0x3A, 0x00, 0x30, 0x00, 0x3B, 0x00, 0x3C, 
		} ;
		//Vertex-Count = 118
		//
		unsigned char edgeCompressed[96] =
		{
			0x00, 0x27, 0x00, 0x00, 0x00, 0x14, 0x06, 0x00, 0x04, 0x80, 0x88, 0xAA, 0x20, 0x00, 0x02, 0x88, 
			0x18, 0x44, 0x88, 0x32, 0x0C, 0x09, 0x00, 0x00, 0x6D, 0xB7, 0x07, 0x00, 0xE7, 0xD4, 0x0E, 0xDF, 
			0xDD, 0x11, 0x04, 0x51, 0x10, 0xD0, 0x11, 0x1E, 0x00, 0xFD, 0xD1, 0xDD, 0x1D, 0x57, 0x78, 0x44, 
			0x44, 0x44, 0x3F, 0xDD, 0x55, 0xD1, 0x00, 0x0C, 0x42, 0x08, 0x4D, 0x03, 0x95, 0x5A, 0x68, 0xE4, 
			0x71, 0xE8, 0xA6, 0x89, 0x86, 0x97, 0x69, 0x13, 0x8C, 0x6E, 0x48, 0x24, 0x76, 0x7A, 0xA2, 0x40, 
			0x41, 0x04, 0x10, 0x40, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
		} ;

         [b]   result = DecompressIndexes_C_Standalone(315,edgeCompressed);[/b]


int DecompressIndexes_NBitStream( uint8_t *pIn, uint16_t *pOut, uint32_t n, uint32_t numToExpand)
{
	//32 indexes at a time
	//runs in reverse
	//writes out 4 quads

	const uint32_t rounded = (numToExpand + 31) &amp; -32;
	pOut = pOut + (rounded - 1);

	uint32_t offset = (rounded - 1) * n;
	for (uint32_t i = rounded; i &gt; 0; i--) 
	{
		uint8_t *b = pIn + (offset &gt;&gt; 3);

		uint32_t b0 = b[0];
		uint32_t b1 = b[1];
		uint32_t b2 = b[2];

		uint32_t buf = (b0 &lt;&lt; 24) | (b1 &lt;&lt; 16) | (b2 &lt;&lt; 8);
		buf = buf &lt;&lt; (offset &amp; 0x7);

		*pOut-- = buf &gt;&gt; (32 - n);

		offset -= n;
	}
}
int DecompressIndexes_C_Standalone(const unsigned int numIndexes, const void *indexes)
{
	const uint32_t numTriangles = numIndexes / 3;

	const uint32_t num1Bits = (uint32_t)(((uint16_t *)indexes)[2]) &lt;&lt; 3;
	const uint32_t bytesBefore2BitStream = 8 + ((num1Bits + 7) &gt;&gt; 3);
	const uint32_t num2BitStreamBytes = (((numTriangles + numTriangles) + 7) &gt;&gt; 3);

	const uint32_t bytesBeforeNBitStream = bytesBefore2BitStream + num2BitStreamBytes;
	const uint32_t numIndexesInNBitStream = (uint32_t)(((uint16_t *)indexes)[0]);
	uint16_t *decompressedNBitStream = (uint16_t *)((uint32_t)indexes + (bytesBeforeNBitStream + 0xf) &amp; ~0xf);
	const uint32_t n = ((uint8_t *)indexes)[6];

	DecompressIndexes_NBitStream(	(uint8_t *)((uint32_t)indexes + bytesBeforeNBitStream), 
									decompressedNBitStream, 
									n,
									numIndexesInNBitStream);
}


</code></pre></div></div>

			
			
									
						<div id='list_thanks136146'>
</div>
<div id='div_post_reput136146'>
</div>

										
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

				<div id="p136148" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile136148">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="./memberlist.php?mode=viewprofile&u=51025.html" class="username">Loomy</a>							</dt>

						<dd class="profile-rank">advanced</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=51025&amp;sr=posts">41</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Sat Sep 12, 2015 2:16 am</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> South Africa</dd>
							    <dd class="profile-posts" data-user-give-id="51025"><strong>Has&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/51025/true">20 times</a></dd>
    <dd class="profile-posts" data-user-receive-id="51025"><strong>Been&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/51025/false">6 times</a></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact Loomy">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact Loomy</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=136148" title="Send private message" class="last-cell">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content136148">

					<h3 >
						<a href="./viewtopic.php?p=136148#p136148">Re: [PS3] GTA V .CDR 3D Drawables Reversing edge related</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/136148/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=136148" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post136148' href="./viewtopic.php?f=16&amp;p=136148&amp;thanks=136148&amp;to_id=51025&amp;from_id=123876" title="Say Thanks to the author of the post: Loomy"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=136148#p136148" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="./memberlist.php?mode=viewprofile&u=51025.html" class="username">Loomy</a></strong> &raquo; </span><time datetime="2017-12-10T13:08:57+00:00">Sun Dec 10, 2017 2:08 pm</time>
			</p>
			
			
			
			<div class="content">First Step now a success <img class="smilies" src="./images/smilies/%5Bcolon%5DD.gif" width="15" height="15" alt=":D" title="Very Happy"> it required EdgeData to be array of shorts<br>
<br>
<img src="https://i.imgur.com/IQSGrrW.png" class="postimage" alt="Image"></div>

			
			
									
						<div id='list_thanks136148'>
</div>
<div id='div_post_reput136148'>
</div>

										
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

				<div id="p136162" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile136162">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="./memberlist.php?mode=viewprofile&u=51025.html" class="username">Loomy</a>							</dt>

						<dd class="profile-rank">advanced</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=51025&amp;sr=posts">41</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Sat Sep 12, 2015 2:16 am</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> South Africa</dd>
							    <dd class="profile-posts" data-user-give-id="51025"><strong>Has&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/51025/true">20 times</a></dd>
    <dd class="profile-posts" data-user-receive-id="51025"><strong>Been&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/51025/false">6 times</a></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact Loomy">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact Loomy</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=136162" title="Send private message" class="last-cell">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content136162">

					<h3 >
						<a href="./viewtopic.php?p=136162#p136162">Re: [PS3] GTA V .CDR 3D Drawables Reversing edge related</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/136162/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=136162" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post136162' href="./viewtopic.php?f=16&amp;p=136162&amp;thanks=136162&amp;to_id=51025&amp;from_id=123876" title="Say Thanks to the author of the post: Loomy"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=136162#p136162" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="./memberlist.php?mode=viewprofile&u=51025.html" class="username">Loomy</a></strong> &raquo; </span><time datetime="2017-12-10T19:23:51+00:00">Sun Dec 10, 2017 8:23 pm</time>
			</p>
			
			
			
			<div class="content">k, its getting stuck on step 3, (deltas), but bulk of edges are already decompressed in step 1.  the rest is just any index with value &lt; 13 (or those numbers taking up only 4 bits)  so remaining bytes would be stored in 6 to 10 bytes somewhere (i suspect is the last few bytes in file).   anyway issue is probably:  endianness /  using array of shorts, rather than bytes or filestream.  i will post working code so far (vs2k13) hopefully someone can solve and we can put this to bed <img class="smilies" src="./images/smilies/%5Bcolon%5D%29.gif" width="15" height="15" alt=":)" title="Smile"><br>
<br>
<img src="https://i.imgur.com/aGNwS9b.png" class="postimage" alt="Image"><br>
<br>
<img src="https://i.imgur.com/VJvyxv5.png" class="postimage" alt="Image"></div>

			
			
									
						<div id='list_thanks136162'>
</div>
<div id='div_post_reput136162'>
</div>

										
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	

	<div class="action-bar bar-bottom">
	
			<a href="./posting.php?mode=reply&amp;t=15693" class="button" title="Post a reply">
							<span>Post Reply</span> <i class="icon fa-reply fa-fw" aria-hidden="true"></i>
					</a>
		
		<div class="dropdown-container dropdown-button-control topic-tools">
		<span title="Topic tools" class="button button-secondary dropdown-trigger dropdown-select">
			<i class="icon fa-wrench fa-fw" aria-hidden="true"></i>
			<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
		</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
													<li>
						<a href="./viewtopic.php?uid=123876&amp;f=16&amp;t=15693&amp;watch=topic&amp;start=15&amp;hash=9fef6035" class="watch-topic-link" title="Subscribe topic" data-ajax="toggle_link" data-toggle-class="icon fa-square-o fa-fw" data-toggle-text="Unsubscribe topic" data-toggle-url="./viewtopic.php?uid=123876&amp;f=16&amp;t=15693&amp;unwatch=topic&amp;start=15&amp;hash=9fef6035" data-update-all=".watch-topic-link">
							<i class="icon fa-check-square-o fa-fw" aria-hidden="true"></i><span>Subscribe topic</span>
						</a>
					</li>
													<li>
						<a href="./viewtopic.php?t=15693&amp;start=15&amp;bookmark=1&amp;hash=9fef6035" class="bookmark-link" title="Bookmark topic" data-ajax="alt_text" data-alt-text="Remove from bookmarks" data-update-all=".bookmark-link">
							<i class="icon fa-bookmark-o fa-fw" aria-hidden="true"></i><span>Bookmark topic</span>
						</a>
					</li>
																<li>
					<a href="./memberlist.php?mode=email&amp;t=15693" title="Email topic">
						<i class="icon fa-envelope-o fa-fw" aria-hidden="true"></i><span>Email topic</span>
					</a>
				</li>
												<li>
					<a href="./viewtopic.php?t=15693&amp;start=15&amp;view=print" title="Print view" accesskey="p">
						<i class="icon fa-print fa-fw" aria-hidden="true"></i><span>Print view</span>
					</a>
				</li>
											</ul>
		</div>
	</div>

			<form method="post" action="./viewtopic.php?t=15693&amp;start=15">
		<div class="dropdown-container dropdown-container-left dropdown-button-control sort-tools">
	<span title="Display and sorting options" class="button button-secondary dropdown-trigger dropdown-select">
		<i class="icon fa-sort-amount-asc fa-fw" aria-hidden="true"></i>
		<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
	</span>
	<div class="dropdown hidden">
		<div class="pointer"><div class="pointer-inner"></div></div>
		<div class="dropdown-contents">
			<fieldset class="display-options">
							<label>Display: <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select></label>
								<label>Sort by: <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select></label>
				<label>Direction: <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select></label>
								<hr class="dashed" />
				<input type="submit" class="button2" name="sort" value="Go" />
						</fieldset>
		</div>
	</div>
</div>
		</form>
	
	
	
			<div class="pagination">
			20 posts
							<ul>
			<li class="arrow previous"><a class="button button-icon-only" href="./15693.html" rel="prev" role="button"><i class="icon fa-chevron-left fa-fw" aria-hidden="true"></i><span class="sr-only">Previous</span></a></li>
				<li><a class="button" href="./15693.html" role="button">1</a></li>
			<li class="active"><span>2</span></li>
	</ul>
					</div>
	</div>


<div class="action-bar actions-jump">
		<p class="jumpbox-return">
		<a href="./viewforum.php?f=16" class="left-box arrow-left" accesskey="r">
			<i class="icon fa-angle-left fa-fw icon-black" aria-hidden="true"></i><span>Return to “3D/2D models”</span>
		</a>
	</p>
	
		<div class="jumpbox dropdown-container dropdown-container-right dropdown-up dropdown-left dropdown-button-control" id="jumpbox">
			<span title="Jump to" class="button button-secondary dropdown-trigger dropdown-select">
				<span>Jump to</span>
				<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
			</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																				<li><a href="../Forums/26 - XeNTaX - General Discussion.html" class="jumpbox-cat-link"> <span> General Discussion</span></a></li>
																<li><a href="./viewforum.php?f=22" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Holy Cow!</span></a></li>
																<li><a href="./viewforum.php?f=40" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Game news</span></a></li>
																<li><a href="./viewforum.php?f=38" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Game Tech Tips</span></a></li>
																<li><a href="./viewforum.php?f=41" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Cool mods</span></a></li>
																<li><a href="./viewforum.php?f=28" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Website</span></a></li>
																<li><a href="./viewforum.php?f=24" class="jumpbox-cat-link"> <span> Game Modding</span></a></li>
																<li><a href="./viewforum.php?f=29" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Tutorials</span></a></li>
																<li><a href="./viewforum.php?f=16" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; 3D/2D models</span></a></li>
																<li><a href="./viewforum.php?f=17" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Audio file formats</span></a></li>
																<li><a href="./viewforum.php?f=18" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Graphic file formats</span></a></li>
																<li><a href="./viewforum.php?f=36" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Video file formats</span></a></li>
																<li><a href="./viewforum.php?f=10" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Game Archive</span></a></li>
																<li><a href="./viewforum.php?f=21" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Compressed files and methods</span></a></li>
																<li><a href="./viewforum.php?f=13" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Code Talk</span></a></li>
																<li><a href="./viewforum.php?f=35" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Game Localization</span></a></li>
																<li><a href="./viewforum.php?f=30" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Savegames</span></a></li>
																<li><a href="./viewforum.php?f=15" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Old posts</span></a></li>
																<li><a href="./viewforum.php?f=37" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Retro games</span></a></li>
																<li><a href="./viewforum.php?f=25" class="jumpbox-cat-link"> <span> MultiEx Commander</span></a></li>
																<li><a href="./viewforum.php?f=3" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; News</span></a></li>
																<li><a href="./viewforum.php?f=14" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Plugins</span></a></li>
																<li><a href="./viewforum.php?f=9" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Troubleshooting</span></a></li>
																<li><a href="./viewforum.php?f=11" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Miscellaneous</span></a></li>
																<li><a href="./viewforum.php?f=31" class="jumpbox-cat-link"> <span> Tools &amp; Programs</span></a></li>
																<li><a href="./viewforum.php?f=32" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Game specific tools</span></a></li>
																<li><a href="./viewforum.php?f=33" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; General game tools</span></a></li>
											</ul>
		</div>
	</div>

	</div>


	<div class="stat-block online-list">
		<h3><a href="./viewonline.php">Who is online</a></h3>
		<p>Users browsing this forum: <a href="./memberlist.php?mode=viewprofile&u=119893.html" class="username">DataKeeper</a>, <a href="./memberlist.php?mode=viewprofile&u=123876.html" class="username">escape209</a>, <a href="./memberlist.php?mode=viewprofile&u=119312.html" class="username">evilcommander</a> and 5 guests</p>
	</div>

			</div>


<div id="page-footer" class="page-footer" role="contentinfo">
	<div class="navbar" role="navigation">
	<div class="inner">

	<ul id="nav-footer" class="nav-footer linklist" role="menubar">
		<li class="breadcrumbs">
									<span class="crumb"><a href="./index.php" data-navbar-reference="index"><i class="icon fa-home fa-fw" aria-hidden="true"></i><span>Board index</span></a></span>					</li>
		
				<li class="rightside">All times are <span title="UTC+1">UTC+01:00</span></li>
							<li class="rightside">
				<a href="./ucp.php?mode=delete_cookies" data-ajax="true" data-refresh="true" role="menuitem">
					<i class="icon fa-trash fa-fw" aria-hidden="true"></i><span>Delete cookies</span>
				</a>
			</li>
							<li class="rightside" data-last-responsive="true">
					<a href="./memberlist.php" title="View complete list of members" role="menuitem">
						<i class="icon fa-group fa-fw" aria-hidden="true"></i><span>Members</span>
					</a>
				</li>
												<li class="rightside" data-last-responsive="true">
				<a href="./memberlist.php?mode=team" role="menuitem">
					<i class="icon fa-shield fa-fw" aria-hidden="true"></i><span>The team</span>
				</a>
			</li>
							</ul>

	</div>
</div>

	<div class="copyright">
				<p class="footer-row">
			<span class="footer-copyright">Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited</span>
		</p>
						<p class="footer-row" role="menu">
			<a class="footer-link" href="./ucp.php?mode=privacy" title="Privacy" role="menuitem">
				<span class="footer-link-text">Privacy</span>
			</a>
			|
			<a class="footer-link" href="./ucp.php?mode=terms" title="Terms" role="menuitem">
				<span class="footer-link-text">Terms</span>
			</a>
		</p>
					</div>

	<div id="darkenwrapper" class="darkenwrapper" data-ajax-error-title="AJAX error" data-ajax-error-text="Something went wrong when processing your request." data-ajax-error-text-abort="User aborted request." data-ajax-error-text-timeout="Your request timed out; please try again." data-ajax-error-text-parsererror="Something went wrong with the request and the server returned an invalid reply.">
		<div id="darken" class="darken">&nbsp;</div>
	</div>

	<div id="phpbb_alert" class="phpbb_alert" data-l-err="Error" data-l-timeout-processing-req="Request timed out.">
		<a href="#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
		<h3 class="alert_title">&nbsp;</h3><p class="alert_text"></p>
	</div>
	<div id="phpbb_confirm" class="phpbb_alert">
		<a href="#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
		<div class="alert_text"></div>
	</div>
</div>

</div>

<div>
	<a id="bottom" class="anchor" accesskey="z"></a>
	</div>

<script src="./assets/javascript/jquery-3.6.0.min.js?assets_version=11"></script>
<script src="./assets/javascript/core.js?assets_version=11"></script>


<script type="text/javascript">
(function($) {  // Avoid conflicts with other libraries

'use strict';
	
	phpbb.addAjaxCallback('reporttosfs', function(data) {
		if (data.postid !== "undefined") {
			$('#sfs' + data.postid).hide();
			phpbb.closeDarkenWrapper(5000);
		}
	});

})(jQuery);
</script>
<script src="./ext/phpbb/boardannouncements/styles/all/template/js/boardannouncements.js?assets_version=11"></script>
<script src="./styles/prosilver/template/forum_fn.js?assets_version=11"></script>
<script src="./styles/prosilver/template/ajax.js?assets_version=11"></script>



</body>
</html>
