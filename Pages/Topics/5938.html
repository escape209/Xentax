<!DOCTYPE html>
<html dir="ltr" lang="en-gb">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>[Wii] The Last Story - .pfs .pk .pkh - XeNTaX</title>


	<link rel="canonical" href="https://forum.xentax.com/viewtopic.php?t=5938">

<!--
	phpBB style name: prosilver
	Based on style:   prosilver (this is the default phpBB3 style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by:
-->

<link href="../../Source/assets/css/font-awesome.min.css?assets_version=11" rel="stylesheet">
<link href="../../Source/styles/prosilver/theme/stylesheet.css?assets_version=11" rel="stylesheet">
<link href="../../Source/styles/prosilver/theme/en/stylesheet.css?assets_version=11" rel="stylesheet">




<!--[if lte IE 9]>
	<link href="../../Source/styles/prosilver/theme/tweaks.css?assets_version=11" rel="stylesheet">
<![endif]-->


<link href="../../Source/ext/gfksx/thanksforposts/styles/prosilver/theme/thanks.css?assets_version=11" rel="stylesheet" media="screen" />
<link href="../../Source/ext/hifikabin/headerbanner/styles/prosilver/theme/headerbanner.css?assets_version=11" rel="stylesheet" media="screen" />
<link href="../../Source/ext/hifikabin/headerbanner/styles/prosilver/theme/headerbanner_background.css?assets_version=11" rel="stylesheet" media="screen" />
<link href="../../Source/ext/phpbb/boardannouncements/styles/all/theme/boardannouncements.css?assets_version=11" rel="stylesheet" media="screen" />



</head>
<body id="phpbb" class="nojs notouch section-viewtopic ltr ">


<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>
	<div id="page-header">
		<div class="headerbar" role="banner">
					<div class="inner">

			<div id="site-description" class="site-description">
		<a id="logo" class="logo" href="../Navigation/index.html" title="Board index">
					<span class="site_logo"></span>
				</a>
				<h1>XeNTaX</h1>
				<p>Game Research Forum</p>
				<p class="skiplink"><a href="#start_here">Skip to content</a></p>
			</div>

									<div class="banner-header">
	<div style="position:absolute; z-index:-100;">
	<h1>XeNTaX</h1>
	<p>Game Research Forum</p>
	<p class="skiplink"><a href="#start_here">Skip to content</a></p>
</div>
<div class="header-banner">
	<a href="../Navigation/index.html" title="Board index"><img class="header-banner" style="border-radius:0px; width:1500px;" src="../Source/images/gameresforum_logo_1.png" alt="Board index" ></a>
</div>
</div>

			</div>
					</div>
				<div class="navbar" role="navigation">
	<div class="inner">

	<ul id="nav-main" class="nav-main linklist" role="menubar">

		<li id="quick-links" class="quick-links dropdown-container responsive-menu" data-skip-responsive="true">
			<a href="#" class="dropdown-trigger">
				<i class="icon fa-bars fa-fw" aria-hidden="true"></i><span>Quick links</span>
			</a>
			<div class="dropdown">
				<div class="pointer"><div class="pointer-inner"></div></div>
				<ul class="dropdown-contents" role="menu">
					
											<li class="separator"></li>
													<li>
								<a href="./search.php?search_id=egosearch" role="menuitem">
									<i class="icon fa-file-o fa-fw icon-gray" aria-hidden="true"></i><span>Your posts</span>
								</a>
							</li>
																			<li>
								<a href="./search.php?search_id=newposts" role="menuitem">
									<i class="icon fa-file-o fa-fw icon-red" aria-hidden="true"></i><span>New posts</span>
								</a>
							</li>
																			<li>
								<a href="./search.php?search_id=unreadposts" role="menuitem">
									<i class="icon fa-file-o fa-fw icon-red" aria-hidden="true"></i><span>Unread posts</span>
								</a>
							</li>
													<li>
								<a href="./search.php?search_id=unanswered" role="menuitem">
									<i class="icon fa-file-o fa-fw icon-gray" aria-hidden="true"></i><span>Unanswered topics</span>
								</a>
							</li>
							<li>
								<a href="./search.php?search_id=active_topics" role="menuitem">
									<i class="icon fa-file-o fa-fw icon-blue" aria-hidden="true"></i><span>Active topics</span>
								</a>
							</li>
							<li class="separator"></li>
							<li>
								<a href="./search.php" role="menuitem">
									<i class="icon fa-search fa-fw" aria-hidden="true"></i><span>Search</span>
								</a>
							</li>
					
											<li class="separator"></li>
													<li>
								<a href="./memberlist.php" role="menuitem">
									<i class="icon fa-group fa-fw" aria-hidden="true"></i><span>Members</span>
								</a>
							</li>
																			<li>
								<a href="./memberlist.php?mode=team" role="menuitem">
									<i class="icon fa-shield fa-fw" aria-hidden="true"></i><span>The team</span>
								</a>
							</li>
																<li class="separator"></li>

						<li>
		<a href="/app.php/toplist"  role="menuitem">
			<i class="icon fa-star-o fa-fw" aria-hidden="true"></i><span>Posts toplist</span>
		</a>
	</li>
	<li>
		<a href="/app.php/thankslist"  role="menuitem">
			<i class="icon fa-thumbs-o-up fa-fw" aria-hidden="true"></i><span>Thanks list</span>
		</a>
	</li>
				</ul>
			</div>
		</li>

				<li data-last-responsive="true">
			<a href="/app.php/help/faq" rel="help" title="Frequently Asked Questions" role="menuitem">
				<i class="icon fa-question-circle fa-fw" aria-hidden="true"></i><span>FAQ</span>
			</a>
		</li>
						
					<li id="username_logged_in" class="rightside " data-skip-responsive="true">
						<div class="header-profile dropdown-container">
				<a href="./ucp.php" class="header-avatar dropdown-trigger"> <span class="username">escape209</span></a>
				<div class="dropdown">
					<div class="pointer"><div class="pointer-inner"></div></div>
					<ul class="dropdown-contents" role="menu">
						
					
						<li>
							<a href="./ucp.php" title="User Control Panel" role="menuitem">
								<i class="icon fa-sliders fa-fw" aria-hidden="true"></i><span>User Control Panel</span>
							</a>
						</li>
													<li>
								<a href="../Users/123876.html" title="Profile" role="menuitem">
									<i class="icon fa-user fa-fw" aria-hidden="true"></i><span>Profile</span>
								</a>
							</li>
						
						
						<li class="separator"></li>
						<li>
							<a href="./ucp.php?mode=logout&amp;sid=f03065a94e53d4183cf1d6f8f99502e7" title="Logout" accesskey="x" role="menuitem">
								<i class="icon fa-power-off fa-fw" aria-hidden="true"></i><span>Logout</span>
							</a>
						</li>
					</ul>
				</div>
			</div>
					</li>
					<li class="rightside" data-skip-responsive="true">
				<a href="./ucp.php?i=pm&amp;folder=inbox" role="menuitem">
					<i class="icon fa-inbox fa-fw" aria-hidden="true"></i><span>Private messages </span><strong class="badge hidden">0</strong>
				</a>
			</li>
							<li class="dropdown-container dropdown-right rightside" data-skip-responsive="true">
				<a href="./ucp.php?i=ucp_notifications" id="notification_list_button" class="dropdown-trigger">
					<i class="icon fa-bell fa-fw" aria-hidden="true"></i><span>Notifications </span><strong class="badge hidden">0</strong>
				</a>
				<div id="notification_list" class="dropdown dropdown-extended notification_list">
	<div class="pointer"><div class="pointer-inner"></div></div>
	<div class="dropdown-contents">
		<div class="header">
			Notifications
			<span class="header_settings">
				<a href="./ucp.php?i=ucp_notifications&amp;mode=notification_options">Settings</a>
							</span>
		</div>

		<ul>
							<li class="no_notifications">
					You have no notifications
				</li>
								</ul>

		<div class="footer">
			<a href="./ucp.php?i=ucp_notifications"><span>See All</span></a>
		</div>
	</div>
</div>
			</li>
						</ul>

	<ul id="nav-breadcrumbs" class="nav-breadcrumbs linklist navlinks" role="menubar">
				
		
		<li class="breadcrumbs" itemscope itemtype="https://schema.org/BreadcrumbList">

			
							<span class="crumb" itemtype="https://schema.org/ListItem" itemprop="itemListElement" itemscope><a itemprop="item" href="../Navigation/index.html" accesskey="h" data-navbar-reference="index"><i class="icon fa-home fa-fw"></i><span itemprop="name">Board index</span></a><meta itemprop="position" content="1" /></span>

											
								<span class="crumb" itemtype="https://schema.org/ListItem" itemprop="itemListElement" itemscope data-forum-id="24"><a itemprop="item" href="./viewforum.php?f=24"><span itemprop="name">Game Modding</span></a><meta itemprop="position" content="2" /></span>
															
								<span class="crumb" itemtype="https://schema.org/ListItem" itemprop="itemListElement" itemscope data-forum-id="10"><a itemprop="item" href="./viewforum.php?f=10"><span itemprop="name">Game Archive</span></a><meta itemprop="position" content="3" /></span>
							
					</li>

		<li class="rightside responsive-search">
	<a href="./search.php" title="View the advanced search options" role="menuitem">
	<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
	</a>
</li>

			</ul>

	</div>
</div>
	</div>

	
	<a id="start_here" class="anchor"></a>
	<div id="page-body" class="page-body" role="main">
		
					<div id="phpbb_announcement" style="background-color:#d9efff">
				<div><strong class="text-strong"><span style="color:#00BF00"><span style="font-size:120%;line-height:116%">Important information: this site is currently <a href="https://forum.xentax.com/viewtopic.php?t=27281" class="postlink">scheduled to go offline indefinitely</a> by end of the year. </span></span></strong></div>
	</div>

<h2 class="topic-title"><a href="./5938.html">[Wii] The Last Story - .pfs .pk .pkh</a></h2>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body -->
<div style="display: none !important;">The Original Forum. Game archives, full of resources. How to open them? Get help here.<br /></div>

	<div class="rules rules-link">
		<div class="inner">

					<a href="http://forum.xentax.com/viewtopic.php?f=28&amp;t=1270">Forum rules</a>
		
		</div>
	</div>

<div class="action-bar bar-top">
	
			<a href="./posting.php?mode=reply&amp;t=5938" class="button" title="Post a reply">
							<span>Post Reply</span> <i class="icon fa-reply fa-fw" aria-hidden="true"></i>
					</a>
	
			<div class="dropdown-container dropdown-button-control topic-tools">
		<span title="Topic tools" class="button button-secondary dropdown-trigger dropdown-select">
			<i class="icon fa-wrench fa-fw" aria-hidden="true"></i>
			<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
		</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
													<li>
						<a href="./viewtopic.php?uid=123876&amp;f=10&amp;t=5938&amp;watch=topic&amp;start=0&amp;hash=5de0cd47" class="watch-topic-link" title="Subscribe topic" data-ajax="toggle_link" data-toggle-class="icon fa-square-o fa-fw" data-toggle-text="Unsubscribe topic" data-toggle-url="./viewtopic.php?uid=123876&amp;f=10&amp;t=5938&amp;unwatch=topic&amp;start=0&amp;hash=5de0cd47" data-update-all=".watch-topic-link">
							<i class="icon fa-check-square-o fa-fw" aria-hidden="true"></i><span>Subscribe topic</span>
						</a>
					</li>
													<li>
						<a href="./viewtopic.php?t=5938&amp;bookmark=1&amp;hash=5de0cd47" class="bookmark-link" title="Bookmark topic" data-ajax="alt_text" data-alt-text="Remove from bookmarks" data-update-all=".bookmark-link">
							<i class="icon fa-bookmark-o fa-fw" aria-hidden="true"></i><span>Bookmark topic</span>
						</a>
					</li>
																<li>
					<a href="./memberlist.php?mode=email&amp;t=5938" title="Email topic">
						<i class="icon fa-envelope-o fa-fw" aria-hidden="true"></i><span>Email topic</span>
					</a>
				</li>
												<li>
					<a href="./viewtopic.php?t=5938&amp;view=print" title="Print view" accesskey="p">
						<i class="icon fa-print fa-fw" aria-hidden="true"></i><span>Print view</span>
					</a>
				</li>
											</ul>
		</div>
	</div>
	
			<div class="search-box" role="search">
			<form method="get" id="topic-search" action="./search.php">
			<fieldset>
				<input class="inputbox search tiny"  type="search" name="keywords" id="search_keywords" size="20" placeholder="Search this topic…" />
				<button class="button button-search" type="submit" title="Search">
					<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
				</button>
				<a href="./search.php" class="button button-search-end" title="Advanced search">
					<i class="icon fa-cog fa-fw" aria-hidden="true"></i><span class="sr-only">Advanced search</span>
				</a>
				<input type="hidden" name="t" value="5938" />
<input type="hidden" name="sf" value="msgonly" />

			</fieldset>
			</form>
		</div>
	
			<div class="pagination">
			22 posts
							<ul>
		<li class="active"><span>1</span></li>
				<li><a class="button" href="./5938 (1).html" role="button">2</a></li>
				<li class="arrow next"><a class="button button-icon-only" href="./5938 (1).html" rel="next" role="button"><i class="icon fa-chevron-right fa-fw" aria-hidden="true"></i><span class="sr-only">Next</span></a></li>
	</ul>
					</div>
		</div>




			<div id="p48166" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile48166">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="../Users/31524.html" class="username">Zentax</a>							</dt>

						<dd class="profile-rank">ultra-n00b</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=31524&amp;sr=posts">8</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Tue Nov 30, 2010 9:40 am</dd>		
		
						    <dd class="profile-posts" data-user-give-id="31524"></dd>
    <dd class="profile-posts" data-user-receive-id="31524"></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact Zentax">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact Zentax</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=48166" title="Send private message" class="last-cell">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content48166">

					<h3 class="first">
						<a href="./viewtopic.php?p=48166#p48166">[Wii] The Last Story - .pfs .pk .pkh</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/48166/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=48166" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post48166' href="./viewtopic.php?f=10&amp;p=48166&amp;thanks=48166&amp;to_id=31524&amp;from_id=123876" title="Say Thanks to the author of the post: Zentax"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=48166#p48166" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="../Users/31524.html" class="username">Zentax</a></strong> &raquo; </span><time datetime="2011-01-28T14:18:50+00:00">Fri Jan 28, 2011 3:18 pm</time>
			</p>
			
			
			
			<div class="content">Im just curious about this game to extract the game script,<br>
so in the folder "pack" i think there is all we need.<br>
<br>
There are 3 file: "eventpacks" "filesystem" and "levels" <br>
<br>
but everyone have a .pfs, .pk, .pkh (i dont know why)<br>
<br>
and the bigger one is alway the .pk file<br>
<br>
so someone know if is possible to make a .pk pack\unpaker?</div>

			
			
									
						<div id='list_thanks48166'>
</div>
<div id='div_post_reput48166'>
</div>

										
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

				<div id="p48192" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile48192">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="../Users/32781.html" class="username">surakichi</a>							</dt>

						<dd class="profile-rank">ultra-n00b</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=32781&amp;sr=posts">4</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Sat Jan 29, 2011 12:10 am</dd>		
		
						    <dd class="profile-posts" data-user-give-id="32781"></dd>
    <dd class="profile-posts" data-user-receive-id="32781"></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact surakichi">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact surakichi</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=48192" title="Send private message" class="last-cell">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content48192">

					<h3 >
						<a href="./viewtopic.php?p=48192#p48192">Re: [Wii] The Last Story - .pfs .pk .pkh</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/48192/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=48192" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post48192' href="./viewtopic.php?f=10&amp;p=48192&amp;thanks=48192&amp;to_id=32781&amp;from_id=123876" title="Say Thanks to the author of the post: surakichi"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=48192#p48192" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="../Users/32781.html" class="username">surakichi</a></strong> &raquo; </span><time datetime="2011-01-28T23:49:26+00:00">Sat Jan 29, 2011 12:49 am</time>
			</p>
			
			
			
			<div class="content">pks<br>
<br>
0h~:header (size:16bytes)<br>
    8bytes always 0x00<br>
    4bytes number of directories<br>
    4bytes number of files<br>
<br>
10h~:Attribute of directory (size:24bytes * num of directories)<br>
    4bytes directory No.<br>
    4bytes parent directory No.<br>
    4bytes unknown<br>
    4bytes unknown<br>
    4bytes cumulative files?<br>
    4bytes number of files in directory?<br>
<br>
~:offset directory or file name (size:4byte * number of directories + files)<br>
<br>
~:directory &amp; file name (variable-length. delimiteｒ '00')<br>
<br>
pkh<br>
0h~3h: (size:4bytes number of files)<br>
<br>
4h~:file header? (size:16bytes * number of files)<br>
    4bytes unknown<br>
    4bytes data start address in .pk<br>
    4bytes unknown<br>
    4bytes size of data?<br>
<br>
pk<br>
compressed though the file can be separated. <br>
decompress method is not understood.</div>

			
			
									
						<div id='list_thanks48192'>
</div>
<div id='div_post_reput48192'>
</div>

										
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

				<div id="p48229" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile48229">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="../Users/31524.html" class="username">Zentax</a>							</dt>

						<dd class="profile-rank">ultra-n00b</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=31524&amp;sr=posts">8</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Tue Nov 30, 2010 9:40 am</dd>		
		
						    <dd class="profile-posts" data-user-give-id="31524"></dd>
    <dd class="profile-posts" data-user-receive-id="31524"></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact Zentax">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact Zentax</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=48229" title="Send private message" class="last-cell">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content48229">

					<h3 >
						<a href="./viewtopic.php?p=48229#p48229">Re: [Wii] The Last Story - .pfs .pk .pkh</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/48229/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=48229" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post48229' href="./viewtopic.php?f=10&amp;p=48229&amp;thanks=48229&amp;to_id=31524&amp;from_id=123876" title="Say Thanks to the author of the post: Zentax"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=48229#p48229" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="../Users/31524.html" class="username">Zentax</a></strong> &raquo; </span><time datetime="2011-01-29T16:27:43+00:00">Sat Jan 29, 2011 5:27 pm</time>
			</p>
			
			
			
			<div class="content">thanks! so .pk it's to hard to decompress?</div>

			
			
									
						<div id='list_thanks48229'>
</div>
<div id='div_post_reput48229'>
</div>

										
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

				<div id="p48231" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile48231">
			<dt class="has-profile-rank has-avatar">
				<div class="avatar-container">
																<a href="../Users/3090.html" class="avatar"><img class="avatar" src="./download/file.php?avatar=3090_1230657531.png" width="120" height="120" alt="User avatar" /></a>														</div>
								<a href="../Users/3090.html" class="username">Forte</a>							</dt>

						<dd class="profile-rank">advanced</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=3090&amp;sr=posts">41</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Mon Aug 06, 2007 9:51 pm</dd>		
		
						    <dd class="profile-posts" data-user-give-id="3090"><strong>Has&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/3090/true">2 times</a></dd>
    <dd class="profile-posts" data-user-receive-id="3090"><strong>Been&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/3090/false">5 times</a></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact Forte">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact Forte</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=48231" title="Send private message" class="last-cell">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content48231">

					<h3 >
						<a href="./viewtopic.php?p=48231#p48231">Re: [Wii] The Last Story - .pfs .pk .pkh</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/48231/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=48231" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post48231' href="./viewtopic.php?f=10&amp;p=48231&amp;thanks=48231&amp;to_id=3090&amp;from_id=123876" title="Say Thanks to the author of the post: Forte"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=48231#p48231" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="../Users/3090.html" class="username">Forte</a></strong> &raquo; </span><time datetime="2011-01-29T16:37:22+00:00">Sat Jan 29, 2011 5:37 pm</time>
			</p>
			
			
			
			<div class="content">The compression is just a normal 0x11 type lzss one, but the problem I'm having is getting the decompressed file size. (lzss normally seem to store it in byte 2-4, but that's not the case here)<br>
<br>
Edit: Now I see, the size is indeed stored in bytes 2-4 (little endian), but each file in the pk is compressed individually, not as a single archive.<br>
<br>
Example: game_start_db.pk<br>
first file start: 0<br>
first file size (decompressed): 0x9A92 (byte 2-4)<br>
second file start*: 0x18A0<br>
second file size: 0x2A38<br>
third file start*: 0x2D20<br>
...<br>
<br>
*When you fully decompress a file from the pk with the given size, that's the next byte your file pointer will point to, which is incidentally a new file.</div>

			
			
									
						<div id='list_thanks48231'>
</div>
<div id='div_post_reput48231'>
</div>

										
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

				<div id="p48264" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile48264">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="../Users/30064.html" class="username">raistlin77it</a>							</dt>

						<dd class="profile-rank">ultra-n00b</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=30064&amp;sr=posts">2</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Mon Sep 06, 2010 10:07 pm</dd>		
		
						    <dd class="profile-posts" data-user-give-id="30064"></dd>
    <dd class="profile-posts" data-user-receive-id="30064"></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact raistlin77it">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact raistlin77it</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=48264" title="Send private message" class="last-cell">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content48264">

					<h3 >
						<a href="./viewtopic.php?p=48264#p48264">Re: [Wii] The Last Story - .pfs .pk .pkh</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/48264/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=48264" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post48264' href="./viewtopic.php?f=10&amp;p=48264&amp;thanks=48264&amp;to_id=30064&amp;from_id=123876" title="Say Thanks to the author of the post: raistlin77it"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=48264#p48264" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="../Users/30064.html" class="username">raistlin77it</a></strong> &raquo; </span><time datetime="2011-01-30T13:40:08+00:00">Sun Jan 30, 2011 2:40 pm</time>
			</p>
			
			
			
			<div class="content">i'm a little newbe with quickbms , so maybe u can help.<br>
<br>
first byte = header =11<br>
<br>
first long = decompressed size = 0x9A92<br>
<br>
how can i obtain the compressed size to pass to the clog function?<br>
<br>
here my broken script <img class="smilies" src="./images/smilies/%5Bcolon%5DD.gif" width="15" height="15" alt=":D" title="Very Happy"> <br>
<br>
<br>
////////////<br>
endian little<br>
<br>
get head BYTE        <br>
<br>
get decompressed LONG    <br>
<br>
ComType lz77wii_raw11<br>
<br>
Clog "a" 0 ZSIZE decompressed</div>

			
			
									
						<div id='list_thanks48264'>
</div>
<div id='div_post_reput48264'>
</div>

										
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

				<div id="p48283" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile48283">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="../Users/19103.html" class="username">DRayX</a>							</dt>

						<dd class="profile-rank">ultra-n00b</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=19103&amp;sr=posts">5</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Mon Jan 11, 2010 4:39 am</dd>		
		
						    <dd class="profile-posts" data-user-give-id="19103"><strong>Has&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/19103/true">3 times</a></dd>
    <dd class="profile-posts" data-user-receive-id="19103"></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact DRayX">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact DRayX</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=48283" title="Send private message" class="last-cell">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content48283">

					<h3 >
						<a href="./viewtopic.php?p=48283#p48283">Re: [Wii] The Last Story - .pfs .pk .pkh</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/48283/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=48283" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post48283' href="./viewtopic.php?f=10&amp;p=48283&amp;thanks=48283&amp;to_id=19103&amp;from_id=123876" title="Say Thanks to the author of the post: DRayX"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=48283#p48283" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="../Users/19103.html" class="username">DRayX</a></strong> &raquo; </span><time datetime="2011-01-30T22:30:37+00:00">Sun Jan 30, 2011 11:30 pm</time>
			</p>
			
			
			
			<div class="content">Ok I have been working on this independently and the only piece I was missing was was the compression algorithm, so thanks Forte.  Do you know of a good library that implements LZSS compression/decompression?  I'm not sure that is actually correct since QuickBMS is failing to decrypt the extracted files using lzss 0x11 (lz77wii_raw11).  Here are some quick file specifications:<br>
<br>
<br>
PFS:<br>
<br>
Header<br>
0x0 0x8 0x0<br>
0x8 0x4 directory count<br>
0xb 0x4 file count<br>
<br>
Directory Table (1 entry per directory)<br>
0x0  0x4 directory number<br>
0x4  0x4 parent directory<br>
0x8  0x4 start child directory<br>
0xb  0x4 child directory count<br>
0x10 0x4 start child file<br>
0x14 0x4 child file count<br>
<br>
String Offset Table (1 entry per directory or file)<br>
0x0 0x4 offset in string table<br>
<br>
String Table (1 entry per directory or file)<br>
0x0 0x? name (null terminated)<br>
<br>
<br>
PKH:<br>
<br>
Header<br>
0x0 0x4 file count<br>
<br>
File Table (1 entry per file)<br>
0x0 0x4 unknown (I think this is a CRC hash of the decoded file)<br>
0x4 0x4 offset in pk (aligned to 0x20 bytes)<br>
0x8 0x4 decompressed size<br>
0xb 0x4 compressed length</div>

			
			
									
						<div id='list_thanks48283'>
</div>
<div id='div_post_reput48283'>
</div>

										
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

				<div id="p48285" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile48285">
			<dt class="has-profile-rank has-avatar">
				<div class="avatar-container">
																<a href="../Users/3090.html" class="avatar"><img class="avatar" src="./download/file.php?avatar=3090_1230657531.png" width="120" height="120" alt="User avatar" /></a>														</div>
								<a href="../Users/3090.html" class="username">Forte</a>							</dt>

						<dd class="profile-rank">advanced</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=3090&amp;sr=posts">41</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Mon Aug 06, 2007 9:51 pm</dd>		
		
						    <dd class="profile-posts" data-user-give-id="3090"><strong>Has&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/3090/true">2 times</a></dd>
    <dd class="profile-posts" data-user-receive-id="3090"><strong>Been&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/3090/false">5 times</a></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact Forte">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact Forte</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=48285" title="Send private message" class="last-cell">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content48285">

					<h3 >
						<a href="./viewtopic.php?p=48285#p48285">Re: [Wii] The Last Story - .pfs .pk .pkh</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/48285/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=48285" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post48285' href="./viewtopic.php?f=10&amp;p=48285&amp;thanks=48285&amp;to_id=3090&amp;from_id=123876" title="Say Thanks to the author of the post: Forte"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=48285#p48285" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="../Users/3090.html" class="username">Forte</a></strong> &raquo; </span><time datetime="2011-01-30T22:39:28+00:00">Sun Jan 30, 2011 11:39 pm</time>
			</p>
			
			
			
			<div class="content">I only tried <a href="http://code.google.com/p/dsdecmp/" class="postlink">dsdecmp</a> and it worked like a charm. There's no compressor, though. (do tell if you find a decent one)</div>

			
			
									
						<div id='list_thanks48285'>
</div>
<div id='div_post_reput48285'>
</div>

										
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

				<div id="p48286" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile48286">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="../Users/19103.html" class="username">DRayX</a>							</dt>

						<dd class="profile-rank">ultra-n00b</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=19103&amp;sr=posts">5</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Mon Jan 11, 2010 4:39 am</dd>		
		
						    <dd class="profile-posts" data-user-give-id="19103"><strong>Has&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/19103/true">3 times</a></dd>
    <dd class="profile-posts" data-user-receive-id="19103"></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact DRayX">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact DRayX</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=48286" title="Send private message" class="last-cell">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content48286">

					<h3 >
						<a href="./viewtopic.php?p=48286#p48286">Re: [Wii] The Last Story - .pfs .pk .pkh</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/48286/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=48286" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post48286' href="./viewtopic.php?f=10&amp;p=48286&amp;thanks=48286&amp;to_id=19103&amp;from_id=123876" title="Say Thanks to the author of the post: DRayX"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=48286#p48286" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="../Users/19103.html" class="username">DRayX</a></strong> &raquo; </span><time datetime="2011-01-30T22:47:50+00:00">Sun Jan 30, 2011 11:47 pm</time>
			</p>
			
			
			
			<div class="content">Cool DSDecomp did it just fine and the output file was the expected length (and it was LZSS 0x11 as you expected).  I don't know why QuickBMS failed to do it, if it hadn't I would have had this all figured out 2 days ago (spent forever trying to figure out which compression it was using since QuickBMS was failing).  Thanks again for all your help Forte.  My unpacking tool will be done as soon as I find or create a good LZSS library (I will probably just write one since I can't find a good one) and finish my CMAKE script.  The packing tool will take another day or so.</div>

			
			
									
						<div id='list_thanks48286'>
</div>
<div id='div_post_reput48286'>
</div>

										
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

				<div id="p48290" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile48290">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="../Users/30064.html" class="username">raistlin77it</a>							</dt>

						<dd class="profile-rank">ultra-n00b</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=30064&amp;sr=posts">2</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Mon Sep 06, 2010 10:07 pm</dd>		
		
						    <dd class="profile-posts" data-user-give-id="30064"></dd>
    <dd class="profile-posts" data-user-receive-id="30064"></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact raistlin77it">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact raistlin77it</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=48290" title="Send private message" class="last-cell">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content48290">

					<h3 >
						<a href="./viewtopic.php?p=48290#p48290">Re: [Wii] The Last Story - .pfs .pk .pkh</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/48290/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=48290" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post48290' href="./viewtopic.php?f=10&amp;p=48290&amp;thanks=48290&amp;to_id=30064&amp;from_id=123876" title="Say Thanks to the author of the post: raistlin77it"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=48290#p48290" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="../Users/30064.html" class="username">raistlin77it</a></strong> &raquo; </span><time datetime="2011-01-31T02:12:05+00:00">Mon Jan 31, 2011 3:12 am</time>
			</p>
			
			
			
			<div class="content">yes, DSDecomp  work, and puyotools also, but sadly they only decompress the first archive of the joined group</div>

			
			
									
						<div id='list_thanks48290'>
</div>
<div id='div_post_reput48290'>
</div>

										
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

				<div id="p48292" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile48292">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="../Users/19103.html" class="username">DRayX</a>							</dt>

						<dd class="profile-rank">ultra-n00b</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=19103&amp;sr=posts">5</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Mon Jan 11, 2010 4:39 am</dd>		
		
						    <dd class="profile-posts" data-user-give-id="19103"><strong>Has&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/19103/true">3 times</a></dd>
    <dd class="profile-posts" data-user-receive-id="19103"></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact DRayX">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact DRayX</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=48292" title="Send private message" class="last-cell">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content48292">

					<h3 >
						<a href="./viewtopic.php?p=48292#p48292">Re: [Wii] The Last Story - .pfs .pk .pkh</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/48292/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=48292" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post48292' href="./viewtopic.php?f=10&amp;p=48292&amp;thanks=48292&amp;to_id=19103&amp;from_id=123876" title="Say Thanks to the author of the post: DRayX"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=48292#p48292" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="../Users/19103.html" class="username">DRayX</a></strong> &raquo; </span><time datetime="2011-01-31T05:13:47+00:00">Mon Jan 31, 2011 6:13 am</time>
			</p>
			
			
			
			<div class="content">Ya, I have everything working now on the decompression side, but there is still that one number in the PKH file that I'm not using, and I haven't written the compression algorithm yet.  If you want to know how to pull all the files apart, read the above post.  Once I have everything working, and no unused mystery numbers, I will post my source.  The unknown number is not a hash, I somehow missed that they are monotonically increasing (by file number, not by offset) the first time.  I also can't figure out why the files are out of order in the pk file, the order seems almost random.  Any ideas would be greatly appreciated.<br>
<br>
Edit:<br>
Ok mystery one solved.  The files are not in the pk file in a random order, to the contrary the order in the PK file matches the sane file order listed in the PFS file.  The order in the PKH file is now what makes very little sense.  It would appear they are sorted by whatever that first number is, which I am back to thinking is some sort of hash due to the distribution, but I still don't know what the hash is of, or what type of hash it is (still guessing CRC-32).<br>
<br>
Edit2:<br>
Ok a little more figured out since the last edit.  It turns out that the main.dol doesn't look at the PFS files at all (which makes sense since finding a given file by path using the PFS files would be a major pain).  Thus, the logical conclusion is that the unknown number is used to look up the file (and thus sorting by them would make sense as it would allow you to binary search for the file).  However, it appears that these "IDs" aren't stored anywhere in the dol or otherwise, but the file paths are.  My conclusion is that the unknown number is actually a hash of the file name or path, and they are operating under the assumption that there will be no collisions (seems like a bad assumption).  Unfortunately, I have been unable to figure out what type of hash, and of what format of the file path these hashes are of.  My guess on format is CRC-32-IEEE (cksum) since it is the most common 32 bit hash format and is apparently included in the Wii SDK, and I assumed that the strings being hashed would match the ones in the dol (found with 'strings'), but no luck.  Any insight, ideas, or assistance would be awesome, otherwise my next step is to start reading through PPC ASM (rally don't want to do that).</div>

			
			
									
						<div id='list_thanks48292'>
</div>
<div id='div_post_reput48292'>
</div>

										
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

				<div id="p48301" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile48301">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="../Users/31524.html" class="username">Zentax</a>							</dt>

						<dd class="profile-rank">ultra-n00b</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=31524&amp;sr=posts">8</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Tue Nov 30, 2010 9:40 am</dd>		
		
						    <dd class="profile-posts" data-user-give-id="31524"></dd>
    <dd class="profile-posts" data-user-receive-id="31524"></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact Zentax">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact Zentax</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=48301" title="Send private message" class="last-cell">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content48301">

					<h3 >
						<a href="./viewtopic.php?p=48301#p48301">Re: [Wii] The Last Story - .pfs .pk .pkh</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/48301/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=48301" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post48301' href="./viewtopic.php?f=10&amp;p=48301&amp;thanks=48301&amp;to_id=31524&amp;from_id=123876" title="Say Thanks to the author of the post: Zentax"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=48301#p48301" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="../Users/31524.html" class="username">Zentax</a></strong> &raquo; </span><time datetime="2011-01-31T12:43:49+00:00">Mon Jan 31, 2011 1:43 pm</time>
			</p>
			
			
			
			<div class="content">great great! so cool guys! this really help a lot!  <img class="smilies" src="./images/smilies/%5BD.gif" width="15" height="15" alt=":mrgreen:" title="Mr. Green"> <br>
*__*</div>

			
			
									
						<div id='list_thanks48301'>
</div>
<div id='div_post_reput48301'>
</div>

										
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

				<div id="p48336" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile48336">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="../Users/32781.html" class="username">surakichi</a>							</dt>

						<dd class="profile-rank">ultra-n00b</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=32781&amp;sr=posts">4</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Sat Jan 29, 2011 12:10 am</dd>		
		
						    <dd class="profile-posts" data-user-give-id="32781"></dd>
    <dd class="profile-posts" data-user-receive-id="32781"></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact surakichi">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact surakichi</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=48336" title="Send private message" class="last-cell">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content48336">

					<h3 >
						<a href="./viewtopic.php?p=48336#p48336">Re: [Wii] The Last Story - .pfs .pk .pkh</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/48336/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=48336" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post48336' href="./viewtopic.php?f=10&amp;p=48336&amp;thanks=48336&amp;to_id=32781&amp;from_id=123876" title="Say Thanks to the author of the post: surakichi"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=48336#p48336" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="../Users/32781.html" class="username">surakichi</a></strong> &raquo; </span><time datetime="2011-01-31T21:22:29+00:00">Mon Jan 31, 2011 10:22 pm</time>
			</p>
			
			
			
			<div class="content">&gt;PKH:<br>
&gt;File Table (1 entry per file)<br>
&gt;0x0 0x4 unknown (I think this is a CRC hash of the decoded file)<br>
<br>
The file with the same value in another PKH file exists.<br>
Those files are the same at the binary level in the PK file.<br>
<br>
Most English of me is a machine translation. (I'm japanese)<br>
<br>
&gt;PFS:<br>
&gt;Directory Table (1 entry per directory)<br>
&gt;0x10 0x4 start child file<br>
The child file number used here is a number of the result of sorting the ascending order in the address in PK as for the file table in PKH file.</div>

			
			
									
						<div id='list_thanks48336'>
</div>
<div id='div_post_reput48336'>
</div>

										
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

				<div id="p48339" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile48339">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="../Users/19103.html" class="username">DRayX</a>							</dt>

						<dd class="profile-rank">ultra-n00b</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=19103&amp;sr=posts">5</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Mon Jan 11, 2010 4:39 am</dd>		
		
						    <dd class="profile-posts" data-user-give-id="19103"><strong>Has&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/19103/true">3 times</a></dd>
    <dd class="profile-posts" data-user-receive-id="19103"></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact DRayX">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact DRayX</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=48339" title="Send private message" class="last-cell">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content48339">

					<h3 >
						<a href="./viewtopic.php?p=48339#p48339">Re: [Wii] The Last Story - .pfs .pk .pkh</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/48339/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=48339" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post48339' href="./viewtopic.php?f=10&amp;p=48339&amp;thanks=48339&amp;to_id=19103&amp;from_id=123876" title="Say Thanks to the author of the post: DRayX"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=48339#p48339" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="../Users/19103.html" class="username">DRayX</a></strong> &raquo; </span><time datetime="2011-02-01T02:05:45+00:00">Tue Feb 01, 2011 3:05 am</time>
			</p>
			
			
			
			<div class="content"><blockquote><div><cite>surakichi wrote:</cite>&gt;PKH:<br>
&gt;File Table (1 entry per file)<br>
&gt;0x0 0x4 unknown (I think this is a CRC hash of the decoded file)<br>
<br>
The file with the same value in another PKH file exists.<br>
Those files are the same at the binary level in the PK file.</div></blockquote>

Can you give an example of two such files?<br>
<br>
<br>
On another note, the unpacker is now done and working 100%.  I want to clean up the code a little bit, and maybe try and speed it up (large pk files take forever), and then I will post it.  The one unknown number is still unused, but like I said, I am fairly certain (99.9%) that it is only used for finding the files efficiently.  On the packing side, I am still too lazy to write the compression algorithm, and I wont be able to make valid pkh files until the mystery number gets figured out, but replacing existing files in the archive with uncompressed modified versions of the same file should be possible, which would be good enough for a translation.  I still really want to figure out the unknown number, and writing a LZ77 compression algorithm would be an interesting exercise.</div>

			
			
									
						<div id='list_thanks48339'>
</div>
<div id='div_post_reput48339'>
</div>

										
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

				<div id="p48342" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile48342">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="../Users/32781.html" class="username">surakichi</a>							</dt>

						<dd class="profile-rank">ultra-n00b</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=32781&amp;sr=posts">4</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Sat Jan 29, 2011 12:10 am</dd>		
		
						    <dd class="profile-posts" data-user-give-id="32781"></dd>
    <dd class="profile-posts" data-user-receive-id="32781"></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact surakichi">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact surakichi</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=48342" title="Send private message" class="last-cell">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content48342">

					<h3 >
						<a href="./viewtopic.php?p=48342#p48342">Re: [Wii] The Last Story - .pfs .pk .pkh</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/48342/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=48342" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post48342' href="./viewtopic.php?f=10&amp;p=48342&amp;thanks=48342&amp;to_id=32781&amp;from_id=123876" title="Say Thanks to the author of the post: surakichi"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=48342#p48342" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="../Users/32781.html" class="username">surakichi</a></strong> &raquo; </span><time datetime="2011-02-01T04:49:29+00:00">Tue Feb 01, 2011 5:49 am</time>
			</p>
			
			
			
			<div class="content">same unknown value in file table<br>
for example<br>
<br>
unknown | offset in PK | decompSize | compSize | PKH File | unpacked filename(not certain)<br>
----------------------------------------------------------------------------------------------------------<br>
03665F27 | 00026140 | 00000671 | 00000285 | preload\change_dg_cache.pkh (ADDRESS:0x0084) | \data\efp\ef_sp009a.efp<br>
03665F27 | 0001F7A0 | 00000671 | 00000285 | preload\change_dg.pkh (ADDRESS:0x0064) | \data\efp\ef_ms101e.efp<br>
03665F27 | 00062CA0 | 00000671 | 00000285 | preload\game_start_dg.pkh (ADDRESS:0x0154) | \data\d2anime\ui_steal.d2b<br>
03665F27 | 249E2640 | 00000671 | 00000285 | pack\filesystem.pkh (ADDRESS:0x21A4) | \event2\dungeon\dg055\ev5585.event<br>
<br>
On another note,<br>
Some data that exists in the file table in PKH, the compressed size is 0. <br>
If decompressed size is not 0, decompressed size data exists in PK.<br>
<br>
If compressed size and decompressed size is 0, I do not understand how to process those files.<br>
(As for all those files, the offset in PK overlaps with other files. )<br>
for example<br>
unknown | offset in PK | decompSize | compSize | PKH File | unpacked filename(not certain)<br>
----------------------------------------------------------------------------------------------------------<br>
1D823470 | 000282E0 | 0000049C | 00000223 | preload\boot.pkh (ADDRESS:0x0194) | \boot\hate_param.csv<br>
C11B19A2 | 000282E0 | 00000000 | 00000000 | preload\boot.pkh (ADDRESS:0x0984) | \boot\hair_back_control.csv<br>
<br>
332AE0BD | 001591E0 | 0002DD0C | 00007DE8 | pack\filesystem.pkh (ADDRESS:0x01F594) | \event2\custom_effect_list.csv<br>
C11B19A2 | 001591E0 | 00000000 | 00000000 | pack\filesystem.pkh (ADDRESS:0x077E54) | \boot\weapon_param_text_jp.u16<br>
<br>
Moreover, it is a file where most of the decompressed file has the header named ”chnkdata wii”.</div>

			
			
													<div class="notice">
					Last edited by <a href="../Users/32781.html" class="username">surakichi</a> on Tue Feb 01, 2011 6:22 am, edited 1 time in total.
									</div>
			
						<div id='list_thanks48342'>
</div>
<div id='div_post_reput48342'>
</div>

										
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

				<div id="p48343" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile48343">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="../Users/19103.html" class="username">DRayX</a>							</dt>

						<dd class="profile-rank">ultra-n00b</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=19103&amp;sr=posts">5</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Mon Jan 11, 2010 4:39 am</dd>		
		
						    <dd class="profile-posts" data-user-give-id="19103"><strong>Has&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/19103/true">3 times</a></dd>
    <dd class="profile-posts" data-user-receive-id="19103"></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact DRayX">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact DRayX</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=48343" title="Send private message" class="last-cell">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content48343">

					<h3 >
						<a href="./viewtopic.php?p=48343#p48343">Re: [Wii] The Last Story - .pfs .pk .pkh</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/48343/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=48343" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post48343' href="./viewtopic.php?f=10&amp;p=48343&amp;thanks=48343&amp;to_id=19103&amp;from_id=123876" title="Say Thanks to the author of the post: DRayX"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=48343#p48343" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="../Users/19103.html" class="username">DRayX</a></strong> &raquo; </span><time datetime="2011-02-01T05:12:24+00:00">Tue Feb 01, 2011 6:12 am</time>
			</p>
			
			
			
			<div class="content">Ya the ones with a decompressed size of 0 are not LZ77 compressed in the pk file.  When both are 0, it means that it is actually a zero length file (there are only a few).</div>

			
			
									
						<div id='list_thanks48343'>
</div>
<div id='div_post_reput48343'>
</div>

										
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	

	<div class="action-bar bar-bottom">
	
			<a href="./posting.php?mode=reply&amp;t=5938" class="button" title="Post a reply">
							<span>Post Reply</span> <i class="icon fa-reply fa-fw" aria-hidden="true"></i>
					</a>
		
		<div class="dropdown-container dropdown-button-control topic-tools">
		<span title="Topic tools" class="button button-secondary dropdown-trigger dropdown-select">
			<i class="icon fa-wrench fa-fw" aria-hidden="true"></i>
			<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
		</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
													<li>
						<a href="./viewtopic.php?uid=123876&amp;f=10&amp;t=5938&amp;watch=topic&amp;start=0&amp;hash=5de0cd47" class="watch-topic-link" title="Subscribe topic" data-ajax="toggle_link" data-toggle-class="icon fa-square-o fa-fw" data-toggle-text="Unsubscribe topic" data-toggle-url="./viewtopic.php?uid=123876&amp;f=10&amp;t=5938&amp;unwatch=topic&amp;start=0&amp;hash=5de0cd47" data-update-all=".watch-topic-link">
							<i class="icon fa-check-square-o fa-fw" aria-hidden="true"></i><span>Subscribe topic</span>
						</a>
					</li>
													<li>
						<a href="./viewtopic.php?t=5938&amp;bookmark=1&amp;hash=5de0cd47" class="bookmark-link" title="Bookmark topic" data-ajax="alt_text" data-alt-text="Remove from bookmarks" data-update-all=".bookmark-link">
							<i class="icon fa-bookmark-o fa-fw" aria-hidden="true"></i><span>Bookmark topic</span>
						</a>
					</li>
																<li>
					<a href="./memberlist.php?mode=email&amp;t=5938" title="Email topic">
						<i class="icon fa-envelope-o fa-fw" aria-hidden="true"></i><span>Email topic</span>
					</a>
				</li>
												<li>
					<a href="./viewtopic.php?t=5938&amp;view=print" title="Print view" accesskey="p">
						<i class="icon fa-print fa-fw" aria-hidden="true"></i><span>Print view</span>
					</a>
				</li>
											</ul>
		</div>
	</div>

			<form method="post" action="./viewtopic.php?t=5938">
		<div class="dropdown-container dropdown-container-left dropdown-button-control sort-tools">
	<span title="Display and sorting options" class="button button-secondary dropdown-trigger dropdown-select">
		<i class="icon fa-sort-amount-asc fa-fw" aria-hidden="true"></i>
		<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
	</span>
	<div class="dropdown hidden">
		<div class="pointer"><div class="pointer-inner"></div></div>
		<div class="dropdown-contents">
			<fieldset class="display-options">
							<label>Display: <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select></label>
								<label>Sort by: <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select></label>
				<label>Direction: <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select></label>
								<hr class="dashed" />
				<input type="submit" class="button2" name="sort" value="Go" />
						</fieldset>
		</div>
	</div>
</div>
		</form>
	
	
	
			<div class="pagination">
			22 posts
							<ul>
		<li class="active"><span>1</span></li>
				<li><a class="button" href="./5938 (1).html" role="button">2</a></li>
				<li class="arrow next"><a class="button button-icon-only" href="./5938 (1).html" rel="next" role="button"><i class="icon fa-chevron-right fa-fw" aria-hidden="true"></i><span class="sr-only">Next</span></a></li>
	</ul>
					</div>
	</div>


<div class="action-bar actions-jump">
		<p class="jumpbox-return">
		<a href="./viewforum.php?f=10" class="left-box arrow-left" accesskey="r">
			<i class="icon fa-angle-left fa-fw icon-black" aria-hidden="true"></i><span>Return to “Game Archive”</span>
		</a>
	</p>
	
		<div class="jumpbox dropdown-container dropdown-container-right dropdown-up dropdown-left dropdown-button-control" id="jumpbox">
			<span title="Jump to" class="button button-secondary dropdown-trigger dropdown-select">
				<span>Jump to</span>
				<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
			</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																				<li><a href="../Forums/26 - XeNTaX - General Discussion.html" class="jumpbox-cat-link"> <span> General Discussion</span></a></li>
																<li><a href="./viewforum.php?f=22" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Holy Cow!</span></a></li>
																<li><a href="./viewforum.php?f=40" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Game news</span></a></li>
																<li><a href="./viewforum.php?f=38" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Game Tech Tips</span></a></li>
																<li><a href="./viewforum.php?f=41" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Cool mods</span></a></li>
																<li><a href="./viewforum.php?f=28" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Website</span></a></li>
																<li><a href="./viewforum.php?f=24" class="jumpbox-cat-link"> <span> Game Modding</span></a></li>
																<li><a href="./viewforum.php?f=29" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Tutorials</span></a></li>
																<li><a href="./viewforum.php?f=16" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; 3D/2D models</span></a></li>
																<li><a href="./viewforum.php?f=17" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Audio file formats</span></a></li>
																<li><a href="./viewforum.php?f=18" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Graphic file formats</span></a></li>
																<li><a href="./viewforum.php?f=36" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Video file formats</span></a></li>
																<li><a href="./viewforum.php?f=10" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Game Archive</span></a></li>
																<li><a href="./viewforum.php?f=21" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Compressed files and methods</span></a></li>
																<li><a href="./viewforum.php?f=13" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Code Talk</span></a></li>
																<li><a href="./viewforum.php?f=35" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Game Localization</span></a></li>
																<li><a href="./viewforum.php?f=30" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Savegames</span></a></li>
																<li><a href="./viewforum.php?f=15" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Old posts</span></a></li>
																<li><a href="./viewforum.php?f=37" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Retro games</span></a></li>
																<li><a href="./viewforum.php?f=25" class="jumpbox-cat-link"> <span> MultiEx Commander</span></a></li>
																<li><a href="./viewforum.php?f=3" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; News</span></a></li>
																<li><a href="./viewforum.php?f=14" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Plugins</span></a></li>
																<li><a href="./viewforum.php?f=9" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Troubleshooting</span></a></li>
																<li><a href="./viewforum.php?f=11" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Miscellaneous</span></a></li>
																<li><a href="./viewforum.php?f=31" class="jumpbox-cat-link"> <span> Tools &amp; Programs</span></a></li>
																<li><a href="./viewforum.php?f=32" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Game specific tools</span></a></li>
																<li><a href="./viewforum.php?f=33" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; General game tools</span></a></li>
											</ul>
		</div>
	</div>

	</div>


	<div class="stat-block online-list">
		<h3><a href="./viewonline.php">Who is online</a></h3>
		<p>Users browsing this forum: <span style="color: #9E8DA7;" class="username-coloured">Bing [Bot]</span>, <a href="../Users/123876.html" class="username">escape209</a>, <span style="color: #9E8DA7;" class="username-coloured">Google [Bot]</span> and 1 guest</p>
	</div>

			</div>


<div id="page-footer" class="page-footer" role="contentinfo">
	<div class="navbar" role="navigation">
	<div class="inner">

	<ul id="nav-footer" class="nav-footer linklist" role="menubar">
		<li class="breadcrumbs">
									<span class="crumb"><a href="../Navigation/index.html" data-navbar-reference="index"><i class="icon fa-home fa-fw" aria-hidden="true"></i><span>Board index</span></a></span>					</li>
		
				<li class="rightside">All times are <span title="UTC+1">UTC+01:00</span></li>
							<li class="rightside">
				<a href="./ucp.php?mode=delete_cookies" data-ajax="true" data-refresh="true" role="menuitem">
					<i class="icon fa-trash fa-fw" aria-hidden="true"></i><span>Delete cookies</span>
				</a>
			</li>
							<li class="rightside" data-last-responsive="true">
					<a href="./memberlist.php" title="View complete list of members" role="menuitem">
						<i class="icon fa-group fa-fw" aria-hidden="true"></i><span>Members</span>
					</a>
				</li>
												<li class="rightside" data-last-responsive="true">
				<a href="./memberlist.php?mode=team" role="menuitem">
					<i class="icon fa-shield fa-fw" aria-hidden="true"></i><span>The team</span>
				</a>
			</li>
							</ul>

	</div>
</div>

	<div class="copyright">
				<p class="footer-row">
			<span class="footer-copyright">Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited</span>
		</p>
						<p class="footer-row" role="menu">
			<a class="footer-link" href="./ucp.php?mode=privacy" title="Privacy" role="menuitem">
				<span class="footer-link-text">Privacy</span>
			</a>
			|
			<a class="footer-link" href="./ucp.php?mode=terms" title="Terms" role="menuitem">
				<span class="footer-link-text">Terms</span>
			</a>
		</p>
					</div>

	<div id="darkenwrapper" class="darkenwrapper" data-ajax-error-title="AJAX error" data-ajax-error-text="Something went wrong when processing your request." data-ajax-error-text-abort="User aborted request." data-ajax-error-text-timeout="Your request timed out; please try again." data-ajax-error-text-parsererror="Something went wrong with the request and the server returned an invalid reply.">
		<div id="darken" class="darken">&nbsp;</div>
	</div>

	<div id="phpbb_alert" class="phpbb_alert" data-l-err="Error" data-l-timeout-processing-req="Request timed out.">
		<a href="#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
		<h3 class="alert_title">&nbsp;</h3><p class="alert_text"></p>
	</div>
	<div id="phpbb_confirm" class="phpbb_alert">
		<a href="#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
		<div class="alert_text"></div>
	</div>
</div>

</div>

<div>
	<a id="bottom" class="anchor" accesskey="z"></a>
	</div>

<script src="./assets/javascript/jquery-3.6.0.min.js?assets_version=11"></script>
<script src="./assets/javascript/core.js?assets_version=11"></script>


<script type="text/javascript">
(function($) {  // Avoid conflicts with other libraries

'use strict';
	
	phpbb.addAjaxCallback('reporttosfs', function(data) {
		if (data.postid !== "undefined") {
			$('#sfs' + data.postid).hide();
			phpbb.closeDarkenWrapper(5000);
		}
	});

})(jQuery);
</script>
<script src="./ext/phpbb/boardannouncements/styles/all/template/js/boardannouncements.js?assets_version=11"></script>
<script src="./styles/prosilver/template/forum_fn.js?assets_version=11"></script>
<script src="./styles/prosilver/template/ajax.js?assets_version=11"></script>



</body>
</html>
