<!DOCTYPE html>
<html dir="ltr" lang="en-gb">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>[HELP] Script needed for unpacking/packing .spf files - XeNTaX</title>


	<link rel="canonical" href="https://forum.xentax.com/viewtopic.php?t=12396">

<!--
	phpBB style name: prosilver
	Based on style:   prosilver (this is the default phpBB3 style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by:
-->

<link href="./assets/css/font-awesome.min.css?assets_version=11" rel="stylesheet">
<link href="./styles/prosilver/theme/stylesheet.css?assets_version=11" rel="stylesheet">
<link href="./styles/prosilver/theme/en/stylesheet.css?assets_version=11" rel="stylesheet">




<!--[if lte IE 9]>
	<link href="./styles/prosilver/theme/tweaks.css?assets_version=11" rel="stylesheet">
<![endif]-->


<link href="./ext/gfksx/thanksforposts/styles/prosilver/theme/thanks.css?assets_version=11" rel="stylesheet" media="screen" />
<link href="./ext/hifikabin/headerbanner/styles/prosilver/theme/headerbanner.css?assets_version=11" rel="stylesheet" media="screen" />
<link href="./ext/hifikabin/headerbanner/styles/prosilver/theme/headerbanner_background.css?assets_version=11" rel="stylesheet" media="screen" />
<link href="./ext/phpbb/boardannouncements/styles/all/theme/boardannouncements.css?assets_version=11" rel="stylesheet" media="screen" />



</head>
<body id="phpbb" class="nojs notouch section-viewtopic ltr ">


<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>
	<div id="page-header">
		<div class="headerbar" role="banner">
					<div class="inner">

			<div id="site-description" class="site-description">
		<a id="logo" class="logo" href="./index.php" title="Board index">
					<span class="site_logo"></span>
				</a>
				<h1>XeNTaX</h1>
				<p>Game Research Forum</p>
				<p class="skiplink"><a href="#start_here">Skip to content</a></p>
			</div>

									<div class="banner-header">
	<div style="position:absolute; z-index:-100;">
	<h1>XeNTaX</h1>
	<p>Game Research Forum</p>
	<p class="skiplink"><a href="#start_here">Skip to content</a></p>
</div>
<div class="header-banner">
	<a href="./index.php" title="Board index"><img class="header-banner" style="border-radius:0px; width:1500px;" src="http://forum.xentax.com/images/gameresforum_logo_1.png" alt="Board index" ></a>
</div>
</div>

			</div>
					</div>
				<div class="navbar" role="navigation">
	<div class="inner">

	<ul id="nav-main" class="nav-main linklist" role="menubar">

		<li id="quick-links" class="quick-links dropdown-container responsive-menu" data-skip-responsive="true">
			<a href="#" class="dropdown-trigger">
				<i class="icon fa-bars fa-fw" aria-hidden="true"></i><span>Quick links</span>
			</a>
			<div class="dropdown">
				<div class="pointer"><div class="pointer-inner"></div></div>
				<ul class="dropdown-contents" role="menu">
					
											<li class="separator"></li>
													<li>
								<a href="./search.php?search_id=egosearch" role="menuitem">
									<i class="icon fa-file-o fa-fw icon-gray" aria-hidden="true"></i><span>Your posts</span>
								</a>
							</li>
																			<li>
								<a href="./search.php?search_id=newposts" role="menuitem">
									<i class="icon fa-file-o fa-fw icon-red" aria-hidden="true"></i><span>New posts</span>
								</a>
							</li>
																			<li>
								<a href="./search.php?search_id=unreadposts" role="menuitem">
									<i class="icon fa-file-o fa-fw icon-red" aria-hidden="true"></i><span>Unread posts</span>
								</a>
							</li>
													<li>
								<a href="./search.php?search_id=unanswered" role="menuitem">
									<i class="icon fa-file-o fa-fw icon-gray" aria-hidden="true"></i><span>Unanswered topics</span>
								</a>
							</li>
							<li>
								<a href="./search.php?search_id=active_topics" role="menuitem">
									<i class="icon fa-file-o fa-fw icon-blue" aria-hidden="true"></i><span>Active topics</span>
								</a>
							</li>
							<li class="separator"></li>
							<li>
								<a href="./search.php" role="menuitem">
									<i class="icon fa-search fa-fw" aria-hidden="true"></i><span>Search</span>
								</a>
							</li>
					
											<li class="separator"></li>
													<li>
								<a href="./memberlist.php" role="menuitem">
									<i class="icon fa-group fa-fw" aria-hidden="true"></i><span>Members</span>
								</a>
							</li>
																			<li>
								<a href="./memberlist.php?mode=team" role="menuitem">
									<i class="icon fa-shield fa-fw" aria-hidden="true"></i><span>The team</span>
								</a>
							</li>
																<li class="separator"></li>

						<li>
		<a href="/app.php/toplist"  role="menuitem">
			<i class="icon fa-star-o fa-fw" aria-hidden="true"></i><span>Posts toplist</span>
		</a>
	</li>
	<li>
		<a href="/app.php/thankslist"  role="menuitem">
			<i class="icon fa-thumbs-o-up fa-fw" aria-hidden="true"></i><span>Thanks list</span>
		</a>
	</li>
				</ul>
			</div>
		</li>

				<li data-last-responsive="true">
			<a href="/app.php/help/faq" rel="help" title="Frequently Asked Questions" role="menuitem">
				<i class="icon fa-question-circle fa-fw" aria-hidden="true"></i><span>FAQ</span>
			</a>
		</li>
						
					<li id="username_logged_in" class="rightside " data-skip-responsive="true">
						<div class="header-profile dropdown-container">
				<a href="./ucp.php" class="header-avatar dropdown-trigger"> <span class="username">escape209</span></a>
				<div class="dropdown">
					<div class="pointer"><div class="pointer-inner"></div></div>
					<ul class="dropdown-contents" role="menu">
						
					
						<li>
							<a href="./ucp.php" title="User Control Panel" role="menuitem">
								<i class="icon fa-sliders fa-fw" aria-hidden="true"></i><span>User Control Panel</span>
							</a>
						</li>
													<li>
								<a href="./memberlist.php?mode=viewprofile&u=123876.html" title="Profile" role="menuitem">
									<i class="icon fa-user fa-fw" aria-hidden="true"></i><span>Profile</span>
								</a>
							</li>
						
						
						<li class="separator"></li>
						<li>
							<a href="./ucp.php?mode=logout&amp;sid=f03065a94e53d4183cf1d6f8f99502e7" title="Logout" accesskey="x" role="menuitem">
								<i class="icon fa-power-off fa-fw" aria-hidden="true"></i><span>Logout</span>
							</a>
						</li>
					</ul>
				</div>
			</div>
					</li>
					<li class="rightside" data-skip-responsive="true">
				<a href="./ucp.php?i=pm&amp;folder=inbox" role="menuitem">
					<i class="icon fa-inbox fa-fw" aria-hidden="true"></i><span>Private messages </span><strong class="badge hidden">0</strong>
				</a>
			</li>
							<li class="dropdown-container dropdown-right rightside" data-skip-responsive="true">
				<a href="./ucp.php?i=ucp_notifications" id="notification_list_button" class="dropdown-trigger">
					<i class="icon fa-bell fa-fw" aria-hidden="true"></i><span>Notifications </span><strong class="badge hidden">0</strong>
				</a>
				<div id="notification_list" class="dropdown dropdown-extended notification_list">
	<div class="pointer"><div class="pointer-inner"></div></div>
	<div class="dropdown-contents">
		<div class="header">
			Notifications
			<span class="header_settings">
				<a href="./ucp.php?i=ucp_notifications&amp;mode=notification_options">Settings</a>
							</span>
		</div>

		<ul>
							<li class="no_notifications">
					You have no notifications
				</li>
								</ul>

		<div class="footer">
			<a href="./ucp.php?i=ucp_notifications"><span>See All</span></a>
		</div>
	</div>
</div>
			</li>
						</ul>

	<ul id="nav-breadcrumbs" class="nav-breadcrumbs linklist navlinks" role="menubar">
				
		
		<li class="breadcrumbs" itemscope itemtype="https://schema.org/BreadcrumbList">

			
							<span class="crumb" itemtype="https://schema.org/ListItem" itemprop="itemListElement" itemscope><a itemprop="item" href="./index.php" accesskey="h" data-navbar-reference="index"><i class="icon fa-home fa-fw"></i><span itemprop="name">Board index</span></a><meta itemprop="position" content="1" /></span>

											
								<span class="crumb" itemtype="https://schema.org/ListItem" itemprop="itemListElement" itemscope data-forum-id="24"><a itemprop="item" href="./viewforum.php?f=24"><span itemprop="name">Game Modding</span></a><meta itemprop="position" content="2" /></span>
															
								<span class="crumb" itemtype="https://schema.org/ListItem" itemprop="itemListElement" itemscope data-forum-id="10"><a itemprop="item" href="./viewforum.php?f=10"><span itemprop="name">Game Archive</span></a><meta itemprop="position" content="3" /></span>
							
					</li>

		<li class="rightside responsive-search">
	<a href="./search.php" title="View the advanced search options" role="menuitem">
	<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
	</a>
</li>

			</ul>

	</div>
</div>
	</div>

	
	<a id="start_here" class="anchor"></a>
	<div id="page-body" class="page-body" role="main">
		
					<div id="phpbb_announcement" style="background-color:#d9efff">
				<div><strong class="text-strong"><span style="color:#00BF00"><span style="font-size:120%;line-height:116%">Important information: this site is currently <a href="https://forum.xentax.com/viewtopic.php?t=27281" class="postlink">scheduled to go offline indefinitely</a> by end of the year. </span></span></strong></div>
	</div>

<h2 class="topic-title"><a href="./12396.html">[HELP] Script needed for unpacking/packing .spf files</a></h2>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body -->
<div style="display: none !important;">The Original Forum. Game archives, full of resources. How to open them? Get help here.<br /></div>

	<div class="rules rules-link">
		<div class="inner">

					<a href="http://forum.xentax.com/viewtopic.php?f=28&amp;t=1270">Forum rules</a>
		
		</div>
	</div>

<div class="action-bar bar-top">
	
			<a href="./posting.php?mode=reply&amp;t=12396" class="button" title="Post a reply">
							<span>Post Reply</span> <i class="icon fa-reply fa-fw" aria-hidden="true"></i>
					</a>
	
			<div class="dropdown-container dropdown-button-control topic-tools">
		<span title="Topic tools" class="button button-secondary dropdown-trigger dropdown-select">
			<i class="icon fa-wrench fa-fw" aria-hidden="true"></i>
			<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
		</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
													<li>
						<a href="./viewtopic.php?uid=123876&amp;f=10&amp;t=12396&amp;watch=topic&amp;start=0&amp;hash=b93df03d" class="watch-topic-link" title="Subscribe topic" data-ajax="toggle_link" data-toggle-class="icon fa-square-o fa-fw" data-toggle-text="Unsubscribe topic" data-toggle-url="./viewtopic.php?uid=123876&amp;f=10&amp;t=12396&amp;unwatch=topic&amp;start=0&amp;hash=b93df03d" data-update-all=".watch-topic-link">
							<i class="icon fa-check-square-o fa-fw" aria-hidden="true"></i><span>Subscribe topic</span>
						</a>
					</li>
													<li>
						<a href="./viewtopic.php?t=12396&amp;bookmark=1&amp;hash=b93df03d" class="bookmark-link" title="Bookmark topic" data-ajax="alt_text" data-alt-text="Remove from bookmarks" data-update-all=".bookmark-link">
							<i class="icon fa-bookmark-o fa-fw" aria-hidden="true"></i><span>Bookmark topic</span>
						</a>
					</li>
																<li>
					<a href="./memberlist.php?mode=email&amp;t=12396" title="Email topic">
						<i class="icon fa-envelope-o fa-fw" aria-hidden="true"></i><span>Email topic</span>
					</a>
				</li>
												<li>
					<a href="./viewtopic.php?t=12396&amp;view=print" title="Print view" accesskey="p">
						<i class="icon fa-print fa-fw" aria-hidden="true"></i><span>Print view</span>
					</a>
				</li>
											</ul>
		</div>
	</div>
	
			<div class="search-box" role="search">
			<form method="get" id="topic-search" action="./search.php">
			<fieldset>
				<input class="inputbox search tiny"  type="search" name="keywords" id="search_keywords" size="20" placeholder="Search this topic…" />
				<button class="button button-search" type="submit" title="Search">
					<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
				</button>
				<a href="./search.php" class="button button-search-end" title="Advanced search">
					<i class="icon fa-cog fa-fw" aria-hidden="true"></i><span class="sr-only">Advanced search</span>
				</a>
				<input type="hidden" name="t" value="12396" />
<input type="hidden" name="sf" value="msgonly" />

			</fieldset>
			</form>
		</div>
	
			<div class="pagination">
			12 posts
							&bull; Page <strong>1</strong> of <strong>1</strong>
					</div>
		</div>




			<div id="p101807" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile101807">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="./memberlist.php?mode=viewprofile&u=48406.html" class="username">kuu</a>							</dt>

						<dd class="profile-rank">ultra-n00b</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=48406&amp;sr=posts">9</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Mon Dec 15, 2014 11:43 pm</dd>		
		
						    <dd class="profile-posts" data-user-give-id="48406"><strong>Has&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/48406/true">1 time</a></dd>
    <dd class="profile-posts" data-user-receive-id="48406"><strong>Been&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/48406/false">1 time</a></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact kuu">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact kuu</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=101807" title="Send private message" class="last-cell">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content101807">

					<h3 class="first">
						<a href="./viewtopic.php?p=101807#p101807">[HELP] Script needed for unpacking/packing .spf files</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/101807/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=101807" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post101807' href="./viewtopic.php?f=10&amp;p=101807&amp;thanks=101807&amp;to_id=48406&amp;from_id=123876" title="Say Thanks to the author of the post: kuu"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=101807#p101807" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="./memberlist.php?mode=viewprofile&u=48406.html" class="username">kuu</a></strong> &raquo; </span><time datetime="2014-12-15T23:21:26+00:00">Tue Dec 16, 2014 12:21 am</time>
			</p>
			
			
			
			<div class="content">Hi, so I'm currently trying to make sense out of an archive file for a game called Navy Field 2. What I wanted to do was replace the game's voices with my own voices, but I realized that they were all stored in an archive file. I have very little experience with low level programming and hex editing, and I've been spending the entire day trying to make sense out of it and just feel overwhelmed because I'm not getting any leads. If anyone can lend a hand that would be great!!<br>
<br>
Here is a background for this game archive format:<br>
The files are .spf extention. They are used for a variety of things to store data, but mainly for storing music and sounds. For example, BGM.spf stores all the bgm the game uses.<br>
<br>
Background about the game:<br>
This is a ship game where you choose 1 of 4 nations and play their ships. I play as Japan so I'm dealing with Japanese voices.<br>
<br>
My goal is to mod a file called IJN.SPF, which contains all the voices (in .wav) for Japan. <br>
<br>
What I know so far:<br>
<br>
I've figured out that there are 154 .wav files in total from using an unpacker tool. These files correspond to these voices in-game:<br>
1. 1-38 Male voices used for all ships (38 total)<br>
2. 39-76 Female voices used for ships ships (38 total)<br>
3. 77-113 Additional male voices for aircraft carriers (37 total)<br>
4. 114-150 Additional female voices for aircraft carriers (34 total)<br>
5. 151-154 4 .wavs that I have no idea what they do, they are distorted voices (4 total)<br>
<br>
I used dragon unpacker to find the wav files, and all the offsets and filesizes are given too and i used that as a starting point.<br>
<br>
There is a directory, followed by the start of the actual data (.wav files) with no break.<br>
<br>
PLEASE IGNORE THE PART IN QUOTES it is pretty much wrong after WRS showed it was encrypted
<blockquote class="uncited"><div>Now the hard part, most of the directory is still unknown to me. However, I have figured out a lot already.<br>
The first 3 rows are the header.<br>
Row 1: the same for every .spf file (5C 57 21 5B)<br>
Row 2: bytes 1 and 2 are the same for all voice archives but different for other .spf archives.<br>
Row 3: Always different (I want to say this is the filesize but so far it hasn't matched anything)<br>
<br>
Entries start at row 4, and have 8 rows.<br>
Row 1: no idea, but the same for every entry (34 9E 71 A8)<br>
Row 2: the first 2 bytes seem to be random, byte 3 is always either 1A, 19, or 18. byte 4 is always 94<br>
Row 3: This row always changes, but there is some order. The first 2 bytes seem to be always different, Byte 3 usually stays on a certain left hex going down the list of entries. (ie. B2, B0, B7, B5, BB, then later A6, A4, A9, AF) Byte 4 starts at F2 but eventually becomes F3 near the end. I think this row is the offset but the numbers have been meaningless so far.<br>
Row 4: always the same (F2 AF 87 C5)<br>
Row 5: always the same (72 DD 2E E9)<br>
Row 6: the row that changes depending on which voice category it is (see above)<br>
Row 7: the first 2 bytes are always the same. the 3rd starts at 83, then 82, 81, 80, and resets when it hits a new voice category. byte 4 is always Cx where x is some number.<br>
Row 8: always the same (DC D8 E6 B3)<br>
<br>
Example:<br>
0000002C 34 9E 71 A8<br>
00000030 E8 E6 19 94<br>
00000034 B9 29 B2 F2<br>
00000038 F2 AF 87 C5<br>
0000003C 72 DD 2E E9<br>
00000040 76 CD 2B A5<br>
00000044 5E 42 83 C0<br>
00000048 DC D8 E6 B3 <br>
<br>
The entries correspond with the voice categories I just mentioned as well. By comparing Japan's voices archive with another nation's, I learned that there were certain bytes (or maybe rows?) that distinguished which category they were in. From start of directory:<br>
1-36 contain a row called 76 CD 2B A5 <br>
37-76 contain a row called 76 CD 2A A5<br>
77-113 contain 7A CE 28 A1 <br>
114-150 contain  7A CE 2E A5<br>
the last 4 contain 7A C6 2B A1 <br>
I used this row to determine which category of voices that entry was in.<br>
<br>
The problem is, I have yet to find any entry that matches with any hint at an offset or filesize. I've looked at this for hours trying to but still nothing. I think I have narrowed it down to rows that have something to do with filesize, but I can't make sense out of these values.<br>
<br>
The following are the first 4940 bytes I have been analyzing, used with diffchecker. On the left is IJN.SPF (japanese voices) and on the right is KM.SPF (german voices)<br>
Organized by 4-byte rows: <a href="https://www.diffchecker.com/pueqei72" class="postlink">https://www.diffchecker.com/pueqei72</a><br>
Organized by 16-byte rows: <a href="https://www.diffchecker.com/ydfu1if0" class="postlink">https://www.diffchecker.com/ydfu1if0</a><br>
<br>
The first 77 entries  (this helped with figuring out the 2B/2A flag):ttps://<a href="http://www.diffchecker.com/4epjfgls" class="postlink">www.diffchecker.com/4epjfgls</a><br>
Just checking to see if there were any differences within the first 38 entries: <a href="https://www.diffchecker.com/w5hx0x76" class="postlink">https://www.diffchecker.com/w5hx0x76</a><br>
<br>
As you can tell, there are only 2 rows that consistently change. I'm pretty sure these are where the offset values are stored, but the values make no sense, nor do I know how to interpret it. I've tried little endian and big endian, and I've tried adding and subtracting with various other rows and still have nothing.</div></blockquote>

Sample files to work with: <a href="https://www.mediafire.com/folder/iqd4v36k12er1/nf2" class="postlink">https://www.mediafire.com/folder/iqd4v36k12er1/nf2</a><br>
IJN.spf is what i want to mod<br>
<br>
KM.spf and option.spf are other spfs to compare to<br>
<br>
Offsets can be gotten by running the unknown filetype script in dragon unpacker.<br>
<br>
Also extra note:<br>
When I replace a .wav with my own .wav, all the sounds before it are fine but the ones after break. However when I trimmed that custom .wav to be exactly the same size as what I was replacing it worked. (which makes sense if the offset got messed up by inserting my own file while not updating the header)<br>
<br>
If anyone can make a script for me please let me know. I can upload the original files if needed. Also if you need more clarifications/pictures i can post them.<br>
<br>
Thanks!</div>

			
			
													<div class="notice">
					Last edited by <a href="./memberlist.php?mode=viewprofile&u=48406.html" class="username">kuu</a> on Tue Dec 16, 2014 11:04 am, edited 7 times in total.
									</div>
			
						<div id='list_thanks101807'>
</div>
<div id='div_post_reput101807'>
</div>

										
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

				<div id="p101814" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile101814">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="./memberlist.php?mode=viewprofile&u=48406.html" class="username">kuu</a>							</dt>

						<dd class="profile-rank">ultra-n00b</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=48406&amp;sr=posts">9</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Mon Dec 15, 2014 11:43 pm</dd>		
		
						    <dd class="profile-posts" data-user-give-id="48406"><strong>Has&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/48406/true">1 time</a></dd>
    <dd class="profile-posts" data-user-receive-id="48406"><strong>Been&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/48406/false">1 time</a></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact kuu">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact kuu</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=101814" title="Send private message" class="last-cell">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content101814">

					<h3 >
						<a href="./viewtopic.php?p=101814#p101814">Re: Need help unpacking Navy Field 2 .spf files</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/101814/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=101814" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post101814' href="./viewtopic.php?f=10&amp;p=101814&amp;thanks=101814&amp;to_id=48406&amp;from_id=123876" title="Say Thanks to the author of the post: kuu"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=101814#p101814" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="./memberlist.php?mode=viewprofile&u=48406.html" class="username">kuu</a></strong> &raquo; </span><time datetime="2014-12-15T23:34:24+00:00">Tue Dec 16, 2014 12:34 am</time>
			</p>
			
			
			
			<div class="content">delete please</div>

			
			
													<div class="notice">
					Last edited by <a href="./memberlist.php?mode=viewprofile&u=48406.html" class="username">kuu</a> on Tue Dec 16, 2014 10:30 am, edited 1 time in total.
									</div>
			
						<div id='list_thanks101814'>
</div>
<div id='div_post_reput101814'>
</div>

										
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

				<div id="p101815" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile101815">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="./memberlist.php?mode=viewprofile&u=48406.html" class="username">kuu</a>							</dt>

						<dd class="profile-rank">ultra-n00b</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=48406&amp;sr=posts">9</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Mon Dec 15, 2014 11:43 pm</dd>		
		
						    <dd class="profile-posts" data-user-give-id="48406"><strong>Has&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/48406/true">1 time</a></dd>
    <dd class="profile-posts" data-user-receive-id="48406"><strong>Been&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/48406/false">1 time</a></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact kuu">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact kuu</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=101815" title="Send private message" class="last-cell">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content101815">

					<h3 >
						<a href="./viewtopic.php?p=101815#p101815">Re: Need help unpacking Navy Field 2 .spf files</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/101815/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=101815" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post101815' href="./viewtopic.php?f=10&amp;p=101815&amp;thanks=101815&amp;to_id=48406&amp;from_id=123876" title="Say Thanks to the author of the post: kuu"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=101815#p101815" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="./memberlist.php?mode=viewprofile&u=48406.html" class="username">kuu</a></strong> &raquo; </span><time datetime="2014-12-15T23:58:17+00:00">Tue Dec 16, 2014 12:58 am</time>
			</p>
			
			
			
			<div class="content">delete please</div>

			
			
													<div class="notice">
					Last edited by <a href="./memberlist.php?mode=viewprofile&u=48406.html" class="username">kuu</a> on Tue Dec 16, 2014 10:31 am, edited 1 time in total.
									</div>
			
						<div id='list_thanks101815'>
</div>
<div id='div_post_reput101815'>
</div>

										
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

				<div id="p101821" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile101821">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="./memberlist.php?mode=viewprofile&u=16084.html" class="username">WRS</a>							</dt>

						<dd class="profile-rank">ultra-veteran<br /><img src="./images/ranks/vip-1.png" alt="ultra-veteran" title="ultra-veteran" /></dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=16084&amp;sr=posts">603</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Fri Nov 06, 2009 12:13 am</dd>		
		
						    <dd class="profile-posts" data-user-give-id="16084"><strong>Has&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/16084/true">74 times</a></dd>
    <dd class="profile-posts" data-user-receive-id="16084"><strong>Been&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/16084/false">137 times</a></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact WRS">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact WRS</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=101821" title="Send private message" class="last-cell">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content101821">

					<h3 >
						<a href="./viewtopic.php?p=101821#p101821">Re: [HELP] Unpacking/Packing Navy Field 2 .spf files</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/101821/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=101821" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post101821' href="./viewtopic.php?f=10&amp;p=101821&amp;thanks=101821&amp;to_id=16084&amp;from_id=123876" title="Say Thanks to the author of the post: WRS"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=101821#p101821" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="./memberlist.php?mode=viewprofile&u=16084.html" class="username">WRS</a></strong> &raquo; </span><time datetime="2014-12-16T02:10:23+00:00">Tue Dec 16, 2014 3:10 am</time>
			</p>
			
			
			
			<div class="content">tldr; the header is xor'ed with a 32-byte key<br>
<br>
i've outlined my thought process as i went  <img class="smilies" src="./images/smilies/%5Bcolon%5D%29.gif" width="15" height="15" alt=":)" title="Smile"> <br>

<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>//--------------------------------------
//--- 010 Editor v5.0 Script File
//
// File:
// Author:
// Revision:
// Purpose:
//--------------------------------------


// the header looks like it's been xored
// with some magic bytes

// look at the pattern of bytes, there are lot of
// repeating "rows" of 32 bytes

// first bytes are
// 5c 57 21 5b

// next 32-byte up we have
// 76 ca 2b a5

// then again
// 76 ca 2b a5

// let's this that value

//uint magic = 2771110518L;
//WriteUInt(p, ReadUInt(p) ^ magic);

// that's wrong. ok.

//let's look at the pattern

// 76 CA 2B A5 5E 42 83 C7 DC D8 E6 B3 34 9E 71 A8
// A4 97 19 94 6D 1F BA F2 F2 AF 87 C5 72 DD 2E E9

// what patterns do we have?

// 76 CA 2B A5 5E 42 ?? ?? DC D8 E6 B3 34 9E 71 A8
// ?? ?? ?? 94 ?? ?? ?? F2 F2 AF 87 C5 72 DD 2E E9

// alright.. not too many unknowns

// we need to be looking at for any possible pointers to
// the first wav file, which we know to be 4940

ubyte xor[32] =
{
  0x76, 0xCA, 0x2B, 0xA5, 0x5E, 0x42, 0,    0,
  0xDC, 0xD8, 0xE6, 0xB3, 0x34, 0x9E, 0x71, 0xA8,
  0,    0,    0,    0x94, 0,    0,    0,    0xF2,
  0xF2, 0xAF, 0x87, 0xC5, 0x72, 0xDD, 0x2E, 0xE9
};

uint p = 0;

while(p &lt; 4940)
{
  WriteUByte(p, ReadUByte(p)^xor[p%16]);
  p++;
}

// what we see now if some .wav references!
// a bit more work is required to reverse the actual xor table

// hope it helps!
</code></pre></div></div>

			
			
									
						<div id='list_thanks101821'>
	<div class="notice">
		<dl>
			
			<dt>These users thanked the author <a href="./memberlist.php?mode=viewprofile&u=16084.html" class="username">WRS</a> for the post: </dt>
			<dd><span title="Tue Dec 16, 2014 4:05 am"><a href="./memberlist.php?mode=viewprofile&u=48406.html" class="username">kuu</a></span></dd>
		</dl>
	</div>
</div>
<div id='div_post_reput101821'>
	<div class="notice">
		<dl>
			<dt class="small"><strong>Rating:</strong>&nbsp;1.72%</dt>
			<dd>
						<div style="width: 150px; height: 15px;" class="thanks_reput_image_back"><div style="height: 15px; width: 1.72%;" class="thanks_reput_image"></div></div>&nbsp;
						</dd>
		</dl>
	</div>
</div>

							<div id="sig101821" class="signature">Useful tool links:
<ul><li><a href="http://aluigi.altervista.org/quickbms.htm" class="postlink">QuickBMS</a></li>
<li><a href="http://www.sweetscape.com/010editor/" class="postlink">010 Editor</a> (<a href="https://gist.github.com/x1nixmzeng/3805536" class="postlink">prelen.bt</a>)</li></ul></div>			
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

				<div id="p101822" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile101822">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="./memberlist.php?mode=viewprofile&u=48406.html" class="username">kuu</a>							</dt>

						<dd class="profile-rank">ultra-n00b</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=48406&amp;sr=posts">9</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Mon Dec 15, 2014 11:43 pm</dd>		
		
						    <dd class="profile-posts" data-user-give-id="48406"><strong>Has&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/48406/true">1 time</a></dd>
    <dd class="profile-posts" data-user-receive-id="48406"><strong>Been&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/48406/false">1 time</a></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact kuu">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact kuu</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=101822" title="Send private message" class="last-cell">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content101822">

					<h3 >
						<a href="./viewtopic.php?p=101822#p101822">Re: [HELP] Unpacking/Packing Navy Field 2 .spf files</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/101822/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=101822" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post101822' href="./viewtopic.php?f=10&amp;p=101822&amp;thanks=101822&amp;to_id=48406&amp;from_id=123876" title="Say Thanks to the author of the post: kuu"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=101822#p101822" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="./memberlist.php?mode=viewprofile&u=48406.html" class="username">kuu</a></strong> &raquo; </span><time datetime="2014-12-16T02:41:52+00:00">Tue Dec 16, 2014 3:41 am</time>
			</p>
			
			
			
			<div class="content">Thank you so much!! Is this a MultiEx script or is it C++? It looks like just C++ to me. Also, why are you using p%16 as the index of the xor table? Wouldn't that mean it would never use the 2nd half the of array and only the first 16 elements?<br>
<br>
How would I go about creating a script to do this?<br>
<br>
I'm taking a look at this now, so I just need to find the few hidden bytes in the 32-byte key? Do I just have to guess until I get it?</div>

			
			
									
						<div id='list_thanks101822'>
</div>
<div id='div_post_reput101822'>
</div>

										
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

				<div id="p101823" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile101823">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="./memberlist.php?mode=viewprofile&u=48406.html" class="username">kuu</a>							</dt>

						<dd class="profile-rank">ultra-n00b</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=48406&amp;sr=posts">9</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Mon Dec 15, 2014 11:43 pm</dd>		
		
						    <dd class="profile-posts" data-user-give-id="48406"><strong>Has&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/48406/true">1 time</a></dd>
    <dd class="profile-posts" data-user-receive-id="48406"><strong>Been&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/48406/false">1 time</a></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact kuu">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact kuu</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=101823" title="Send private message" class="last-cell">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content101823">

					<h3 >
						<a href="./viewtopic.php?p=101823#p101823">Re: [HELP] Unpacking/Packing Navy Field 2 .spf files</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/101823/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=101823" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post101823' href="./viewtopic.php?f=10&amp;p=101823&amp;thanks=101823&amp;to_id=48406&amp;from_id=123876" title="Say Thanks to the author of the post: kuu"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=101823#p101823" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="./memberlist.php?mode=viewprofile&u=48406.html" class="username">kuu</a></strong> &raquo; </span><time datetime="2014-12-16T03:57:06+00:00">Tue Dec 16, 2014 4:57 am</time>
			</p>
			
			
			
			<div class="content">I just tried it with the following C++ code and don't see any references to 4940 (0x134C) yet.<br>

<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>#include &lt;fstream&gt;

using namespace std;

int main() {
	unsigned char xor[32] = { 
		0x76, 0xCA, 0x2B, 0xA5, 0x5E, 0x42, 0,    0,
		0xDC, 0xD8, 0xE6, 0xB3, 0x34, 0x9E, 0x71, 0xA8,
		0,    0,    0,    0x94, 0,    0,    0,    0xF2,
		0xF2, 0xAF, 0x87, 0xC5, 0x72, 0xDD, 0x2E, 0xE9
	};

	unsigned int p = 0;
	unsigned char b; //temporary byte

	ifstream inputfile("IJNoriginal.spf");
	ofstream outputfile;
	outputfile.open("IJN.spf");

	while(p&lt;4940) {
		//read from input file
		inputfile.seekg(p);
		inputfile &gt;&gt; b;
		//b xor key
		b = b ^ xor[p%16];
		//store in output file
		outputfile.seekp(p);
		outputfile &lt;&lt; b;
		p++;
	}
	inputfile.close();
	outputfile.close();
}
</code></pre></div>

My output is
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>2A 9D 0D FE C1 BA 21 99 43 0D 55 87 00 00 00 00
26 7C 57 F2 AC EE EE EE 32 EA 0C BF 8B 15 64 CC
BA 70 5B FE A0 E2 E2 E2 3E E6 00 B3 87 19 68 C0
B6 7C 57 F2 AC EE EE EE 32 EA 0C BF 8B 15 64 CC
BA 70 5B FE A0 E2 E2 E2 3E E6 00 B3 87 19 68 C0
B6 7C 57 F2 AC EE EE EE 32 EA 0C BF 8B 15 64 CC
...
</code></pre></div>

Edit:<br>
I still can't get it to work. I also still don't get the concept of encryption or how you found the xor table. <br>
<br>
Could you help with a script for decrypting and re-encrypting? (for the IJN voices, not the KM voices)<br>
Sorry I am not that good at coding <img class="smilies" src="./images/smilies/%5Bcolon%5D%28.gif" width="15" height="15" alt=":(" title="Sad"><br>
<br>
Please, I would be very grateful!</div>

			
			
									
						<div id='list_thanks101823'>
</div>
<div id='div_post_reput101823'>
</div>

										
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

				<div id="p101856" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile101856">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="./memberlist.php?mode=viewprofile&u=16084.html" class="username">WRS</a>							</dt>

						<dd class="profile-rank">ultra-veteran<br /><img src="./images/ranks/vip-1.png" alt="ultra-veteran" title="ultra-veteran" /></dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=16084&amp;sr=posts">603</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Fri Nov 06, 2009 12:13 am</dd>		
		
						    <dd class="profile-posts" data-user-give-id="16084"><strong>Has&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/16084/true">74 times</a></dd>
    <dd class="profile-posts" data-user-receive-id="16084"><strong>Been&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/16084/false">137 times</a></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact WRS">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact WRS</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=101856" title="Send private message" class="last-cell">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content101856">

					<h3 >
						<a href="./viewtopic.php?p=101856#p101856">Re: [HELP] Script needed for unpacking/packing .spf files</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/101856/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=101856" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post101856' href="./viewtopic.php?f=10&amp;p=101856&amp;thanks=101856&amp;to_id=16084&amp;from_id=123876" title="Say Thanks to the author of the post: WRS"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=101856#p101856" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="./memberlist.php?mode=viewprofile&u=16084.html" class="username">WRS</a></strong> &raquo; </span><time datetime="2014-12-16T19:02:52+00:00">Tue Dec 16, 2014 8:02 pm</time>
			</p>
			
			
			
			<div class="content">sorry, i wasn't very clear - and you spotted a mistake with my code <img class="smilies" src="./images/smilies/%5Bcolon%5D%29.gif" width="15" height="15" alt=":)" title="Smile"><br>
<br>
(first, i'm using 010 editor - a hex editor with a scriping language similar to c)<br>
<br>
so you posted 3 samples files, and 2 are the same size. i'm guessing the header data is xored because there are lot of repeating bytes. i made a guess this was 32 bytes long.<br>
<br>
so taking 32 bytes at a time from KM.SPF i built a table of repeating bytes to make this pattern<br>

<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>76 CA 2B A5 5E 42 ?? ?? DC D8 E6 B3 34 9E 71 A8
?? ?? ?? 94 ?? ?? ?? F2 F2 AF 87 C5 72 DD 2E E9
</code></pre></div>

(where ?? means the pattern is broken)<br>
<br>
however, my code did run through 16 of these bytes, but still produced this string ".wavFC_A"!<br>
<br>
so maybe the xor isn't 32 bytes, but actually 16.<br>
<br>
<br>
<br>
what i should have shown you next was the filesize:<br>
<br>
from KM.SPF i read 4 bytes at a time (8 or so times) and xor that value with the filesize. this gives me these values:<br>

<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>0x5a6ca5a8, 0x986c0a6b, 0x0dc62cf3, 0xa93c6cc0, 0x955785e4, 0xf3fe93b9, 0xc4ca5d06, 0xe8632f86
</code></pre></div>

using the smaller sample (Option.SPF) i can run the xor loop again. if i find the filesize of that file (7717) then we have 1 xor value (or 4 bytes of the table)<br>
<br>
so, doing that:<br>

<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>
// -- code
uint meh[8] = 
{
0x5a6ca5a8, 0x986c0a6b, 0x0dc62cf3, 0xa93c6cc0,
0x955785e4, 0xf3fe93b9, 0xc4ca5d06, 0xe8632f86
};

uint c = 0;
uint val = 0;
while( c &lt; 8 )
{
  val = ReadUInt(c*4) ^ meh[c];
  Printf("%u and %u\n", val, FileSize());
  WriteUInt(c*4, val);
  c++;
}
// -- end code

// we get this:

21885684 and 7717
21885551 and 7717
7717 and 7717
21885674 and 7717
21784099 and 7717
21881234 and 7717
21885684 and 7717
1735193345 and 7717
</code></pre></div>

so that third value is correct.<br>
<br>
if you open any spf and go to offset 8. if you take 4 bytes as a 32-bit number and xor that with 0x0dc62cf3 you will get the filesize.<br>
<br>
as that's a good starting point, have a look in the game itself for that hex string, and you might find the whole xor table.</div>

			
			
									
						<div id='list_thanks101856'>
</div>
<div id='div_post_reput101856'>
</div>

							<div id="sig101856" class="signature">Useful tool links:
<ul><li><a href="http://aluigi.altervista.org/quickbms.htm" class="postlink">QuickBMS</a></li>
<li><a href="http://www.sweetscape.com/010editor/" class="postlink">010 Editor</a> (<a href="https://gist.github.com/x1nixmzeng/3805536" class="postlink">prelen.bt</a>)</li></ul></div>			
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

				<div id="p101857" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile101857">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="./memberlist.php?mode=viewprofile&u=48406.html" class="username">kuu</a>							</dt>

						<dd class="profile-rank">ultra-n00b</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=48406&amp;sr=posts">9</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Mon Dec 15, 2014 11:43 pm</dd>		
		
						    <dd class="profile-posts" data-user-give-id="48406"><strong>Has&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/48406/true">1 time</a></dd>
    <dd class="profile-posts" data-user-receive-id="48406"><strong>Been&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/48406/false">1 time</a></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact kuu">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact kuu</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=101857" title="Send private message" class="last-cell">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content101857">

					<h3 >
						<a href="./viewtopic.php?p=101857#p101857">Re: [HELP] Script needed for unpacking/packing .spf files</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/101857/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=101857" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post101857' href="./viewtopic.php?f=10&amp;p=101857&amp;thanks=101857&amp;to_id=48406&amp;from_id=123876" title="Say Thanks to the author of the post: kuu"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=101857#p101857" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="./memberlist.php?mode=viewprofile&u=48406.html" class="username">kuu</a></strong> &raquo; </span><time datetime="2014-12-16T19:27:27+00:00">Tue Dec 16, 2014 8:27 pm</time>
			</p>
			
			
			
			<div class="content">Can you tell me how i can look into the game? do i need a decompiler, and which one would you recommend if so?<br>
<br>
I did a test and ran xor'd the the spf with the 2nd half of the xor table (bytes 17-32) and I got ".wavFC_A" string again except now in the other alternating rows. for example xoring with 1-16 gave the ".wavFC_A" in offsets 10h,30h,50h, etc... and xoring with 17-32 gave ".wavFC_A" in 20h,40h,60h,etc...<br>
<br>
And when you say the xor value of 4 bytes, does that mean 4 of the 16 bytes needed for the xor table? Are those the first 4 bytes? i am still very confused about the xor table. the earlier 32 byte table we used is incorrect? do we have to replace that table with the 4 bytes we found just now?<br>
<br>
Also a script question, WruteUByte and WriteUInt are built in functions? Does writeuint write the value of 4 bytes into the next 4 bytes of the source that is given as parameter to it?<br>
<br>
opening up client in hex editor and searching for 0x0dc62cf3 i did not find anything...<br>
<br>
Thanks again</div>

			
			
									
						<div id='list_thanks101857'>
</div>
<div id='div_post_reput101857'>
</div>

										
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

				<div id="p101866" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile101866">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="./memberlist.php?mode=viewprofile&u=16084.html" class="username">WRS</a>							</dt>

						<dd class="profile-rank">ultra-veteran<br /><img src="./images/ranks/vip-1.png" alt="ultra-veteran" title="ultra-veteran" /></dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=16084&amp;sr=posts">603</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Fri Nov 06, 2009 12:13 am</dd>		
		
						    <dd class="profile-posts" data-user-give-id="16084"><strong>Has&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/16084/true">74 times</a></dd>
    <dd class="profile-posts" data-user-receive-id="16084"><strong>Been&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/16084/false">137 times</a></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact WRS">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact WRS</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=101866" title="Send private message" class="last-cell">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content101866">

					<h3 >
						<a href="./viewtopic.php?p=101866#p101866">Re: [HELP] Script needed for unpacking/packing .spf files</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/101866/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=101866" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post101866' href="./viewtopic.php?f=10&amp;p=101866&amp;thanks=101866&amp;to_id=16084&amp;from_id=123876" title="Say Thanks to the author of the post: WRS"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=101866#p101866" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="./memberlist.php?mode=viewprofile&u=16084.html" class="username">WRS</a></strong> &raquo; </span><time datetime="2014-12-16T20:32:26+00:00">Tue Dec 16, 2014 9:32 pm</time>
			</p>
			
			
			
			<div class="content"><blockquote><div><cite>kuu wrote:</cite>Can you tell me how i can look into the game? do i need a decompiler, and which one would you recommend if so?</div></blockquote>

a hex editor is enough to find the rest of this byte sequence. but lets put that on hold.<br>

<blockquote><div><cite>kuu wrote:</cite>Also a script question, WruteUByte and WriteUInt are built in functions? Does writeuint write the value of 4 bytes into the next 4 bytes of the source that is given as parameter to it?</div></blockquote>

yes, and yes  <img class="smilies" src="./images/smilies/%5Bcolon%5D%29.gif" width="15" height="15" alt=":)" title="Smile"> <br>

<blockquote><div><cite>kuu wrote:</cite>And when you say the xor value of 4 bytes, does that mean 4 of the 16 bytes needed for the xor table? Are those the first 4 bytes? i am still very confused about the xor table. the earlier 32 byte table we used is incorrect? do we have to replace that table with the 4 bytes we found just now?</div></blockquote>

sort of.<br>
<br>
if you ignore the xor table concept - we only ended up finding 1 magic value (an integer, or 4 bytes) which gave us the filesize.<br>
<br>
if you follow what i did to get that value, we can do the same for the first file offset (4940) which will be more helpful to you.<br>
<br>
the xor values we get from KM.SPF are:<br>

<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>0x5b214410, 0x9921ebd3, 0x0c8bcd4b, 0xa8718d78,
0x941a645c, 0xf2b37201, 0xc587bcbe, 0xe92ece3e
</code></pre></div>

and running the loop on Option.SPF we find that the sixth value is 42, which is an offset to a very plain looking value which could be the start of the data.<br>
<br>
so we have 2 known xor values which can give us useful info:<br>
<br>
0x0dc62cf3 for the filesize, at position 8<br>
0xf2b37201 for the offset, at position 20<br>
<br>
for some reason, your code wasn't reading certain bytes correctly (ios::binary??), so here is a slightly different program to print info:<br>

<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>#include &lt;stdlib.h&gt;
#include &lt;stdio.h&gt;

int main(void)
{
  unsigned int file_size_xor = 0x0dc62cf3;
  unsigned int file_offset_xor = 0xf2b37201;

  // gone back to c (sorry)
  FILE* hnl = fopen("Option.SPF", "rb");

  unsigned int offset = 0; // current file pos
  unsigned int first_file = 0; // first file offset

  while ( true )
  {
    // read 32 bytes at a time (8 ints)

    unsigned int buffer[8];
    fread(buffer, 32, 1, hnl);

    // first file:
    if (offset == 0)
    {
      unsigned int file_size = buffer[2] ^ file_size_xor;
      printf("File size: %u\n", file_size);
    }

    // every 32 bytes we have a file header with a file offset:

    unsigned int file_offset = buffer[5] ^ file_offset_xor;
    printf("File offset: %u\n", file_offset);

    // store off the first file offset (which marks the end of header)
    if (offset == 0)
    {
      first_file = file_offset;
    }

    offset += 32;

    // exit the loop when we hit the first file data
    if (offset &gt;= first_file - 32)
    {
      break;
    }
  }
  
  fclose(hnl);  
  return 1;
}
</code></pre></div></div>

			
			
									
						<div id='list_thanks101866'>
</div>
<div id='div_post_reput101866'>
</div>

							<div id="sig101866" class="signature">Useful tool links:
<ul><li><a href="http://aluigi.altervista.org/quickbms.htm" class="postlink">QuickBMS</a></li>
<li><a href="http://www.sweetscape.com/010editor/" class="postlink">010 Editor</a> (<a href="https://gist.github.com/x1nixmzeng/3805536" class="postlink">prelen.bt</a>)</li></ul></div>			
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

				<div id="p101878" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile101878">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="./memberlist.php?mode=viewprofile&u=48406.html" class="username">kuu</a>							</dt>

						<dd class="profile-rank">ultra-n00b</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=48406&amp;sr=posts">9</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Mon Dec 15, 2014 11:43 pm</dd>		
		
						    <dd class="profile-posts" data-user-give-id="48406"><strong>Has&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/48406/true">1 time</a></dd>
    <dd class="profile-posts" data-user-receive-id="48406"><strong>Been&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/48406/false">1 time</a></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact kuu">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact kuu</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=101878" title="Send private message" class="last-cell">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content101878">

					<h3 >
						<a href="./viewtopic.php?p=101878#p101878">Re: [HELP] Script needed for unpacking/packing .spf files</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/101878/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=101878" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post101878' href="./viewtopic.php?f=10&amp;p=101878&amp;thanks=101878&amp;to_id=48406&amp;from_id=123876" title="Say Thanks to the author of the post: kuu"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=101878#p101878" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="./memberlist.php?mode=viewprofile&u=48406.html" class="username">kuu</a></strong> &raquo; </span><time datetime="2014-12-17T03:37:09+00:00">Wed Dec 17, 2014 4:37 am</time>
			</p>
			
			
			
			<div class="content">I am using 010 editor now<br>
<br>
when I xor'd the first 32 bytes of IJN.spf with <br>
0x5b214410, 0x9921ebd3, 0x0c8bcd4b, 0xa8718d78,<br>
0x941a645c, 0xf2b37201, 0xc587bcbe, 0xe92ece3e<br>
<br>
the key that you used to find the offset, I got<br>
<br>
4C 13 00 00 4C 13 00 00 D4 18 38 00 4C 13 00 00<br>
0C D2 00 00 4C 13 00 00 4C 13 00 00 4C 13 00 00<br>
<br>
which seems right since 4C13 is the start of the offset, but why is it appearing in so many places?<br>
<br>
and I still can't find any hex references in the main client <img class="smilies" src="./images/smilies/%5Bcolon%5D%28.gif" width="15" height="15" alt=":(" title="Sad"></div>

			
			
									
						<div id='list_thanks101878'>
</div>
<div id='div_post_reput101878'>
</div>

										
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

				<div id="p101880" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile101880">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="./memberlist.php?mode=viewprofile&u=48406.html" class="username">kuu</a>							</dt>

						<dd class="profile-rank">ultra-n00b</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=48406&amp;sr=posts">9</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Mon Dec 15, 2014 11:43 pm</dd>		
		
						    <dd class="profile-posts" data-user-give-id="48406"><strong>Has&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/48406/true">1 time</a></dd>
    <dd class="profile-posts" data-user-receive-id="48406"><strong>Been&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/48406/false">1 time</a></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact kuu">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact kuu</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=101880" title="Send private message" class="last-cell">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content101880">

					<h3 >
						<a href="./viewtopic.php?p=101880#p101880">Re: [HELP] Script needed for unpacking/packing .spf files</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/101880/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=101880" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post101880' href="./viewtopic.php?f=10&amp;p=101880&amp;thanks=101880&amp;to_id=48406&amp;from_id=123876" title="Say Thanks to the author of the post: kuu"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=101880#p101880" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="./memberlist.php?mode=viewprofile&u=48406.html" class="username">kuu</a></strong> &raquo; </span><time datetime="2014-12-17T06:06:32+00:00">Wed Dec 17, 2014 7:06 am</time>
			</p>
			
			
			
			<div class="content">Okay so I found the row that stores the size of each wav file! <img class="smilies" src="./images/smilies/%5Bcolon%5DD.gif" width="15" height="15" alt=":D" title="Very Happy"><br>
<br>
Edit: I found the row with number of files too! It is stored in row 2 of the header.<br>
<br>
Now we have filesize, .wav size, .wav offset, and ".wavFC_A" or ".wavFC_O" string. However there are still lots of unknowns. <br>
Row 1 in header is missing<br>
Row 1, 6, 7, 8 in each wav description is still missing.<br>
<br>
Do  you think what i have found so far is enough to recreate a custom .spf file with my own voices? Do you think there is a possibility row 6,7, and 8 are a continuation of row 5? Because maybe FC_A is cut off and it is actually a 16-byte string?<br>
<br>
I made a new script and all the .wav sizes and offsets are correct.<br>
<br>
<img src="http://puu.sh/dy52G/e3c652ea13.png" class="postimage" alt="Image"><br>

<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>//--------------------------------------
//--- 010 Editor v5.0.2 Script File
//
// File:
// Author:
// Revision:
// Purpose:
//--------------------------------------
//
//first try xoring km.spf with filesize of km.spf 21,885,684-&gt;01 4D F2 F4
//BUT turn it around after getting each xor key
//run it on option.spf
//whatever matches the filesize is the correct row (3rd)
//
//next try xoring km.spf with fileoffset 4940-&gt;134c0000
//uint meh = 0x0000134c;
//now we have 8 new keys
//turn each key around
//run it on first 8 rows of option.spf
//look for first offset of option.spf (6th row)
//
//so far
//row 3 filesize 0x0dc62cf3
//row 6 file offset 0xf2b37201
//
//now let's try looking for size of first .wav in km.spf
//100652 -&gt; 00 01 89 2C
//uint meh = 0x0001892c;
//turn around all 8 xor key rows
//0x5b20de70, 0x992071b3, 0x0c8a572b, 0xa8701718,
//0x941bfe3c, 0xf2b2e861, 0xc58626de, 0xe92f545e
//run it on ijn.spf because easier
//found!! 84076 on row 5 (size of 1st wav)
//row 5 wav size 0x941bfe3c
//
//those are all the rows that change
//lets combine it with the xor values that got .wavFC_A earlier
//row 7 0xdcd8e6b3
//row 8 0x349e71a8
//
//lets create a new loop that decrypts the 3rd row in header and every 2nd, 3rd, 4th, 5th row in each file description

uint filesizekey = 0x0dc62cf3; //filesize
uint row2 = 0x941bfe3c; //wav size
uint row3 = 0xf2b37201; //wav offset
//uint row4 = 0xdcd8e6b3; //".wav" string
//uint row5 = 0x349e71a8; //"FC_A" string

//".wavFC_A" string
uint wavstring[8] = {
  0xDC, 0xD8, 0xE6, 0xB3, 0x34, 0x9E, 0x71, 0xA8
};

uint val = 0;

val = ReadUInt(2*4) ^ filesizekey;
WriteUInt(2*4, val);

//c=3 is beginning of first file description (skip first 3 rows)
uint c = 3;
uint p = 0;
val = 0;
uint r2;
uint r3;
uint r4;
uint c2 = 24;

while( c &lt; 1232 )
{
  r2 = c+1;
  r3 = c+2;


  val = ReadUInt(r2*4) ^ row2;
  WriteUInt(r2*4, val);

  val = ReadUInt(r3*4) ^ row3;
  WriteUInt(r3*4, val);


  p = 0;
  while ( p &lt; 8 ) {
    r4 = c2 + p;
    WriteUByte(r4, ReadUByte(r4) ^ wavstring[p]);
    p++;
  }

  c+=8; //move 8 rows ahead
  c2+=32;
}
</code></pre></div></div>

			
			
									
						<div id='list_thanks101880'>
</div>
<div id='div_post_reput101880'>
</div>

										
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

				<div id="p101884" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile101884">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="./memberlist.php?mode=viewprofile&u=48406.html" class="username">kuu</a>							</dt>

						<dd class="profile-rank">ultra-n00b</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=48406&amp;sr=posts">9</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Mon Dec 15, 2014 11:43 pm</dd>		
		
						    <dd class="profile-posts" data-user-give-id="48406"><strong>Has&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/48406/true">1 time</a></dd>
    <dd class="profile-posts" data-user-receive-id="48406"><strong>Been&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/48406/false">1 time</a></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact kuu">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact kuu</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=101884" title="Send private message" class="last-cell">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content101884">

					<h3 >
						<a href="./viewtopic.php?p=101884#p101884">Re: [HELP] Script needed for unpacking/packing .spf files</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/101884/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=101884" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post101884' href="./viewtopic.php?f=10&amp;p=101884&amp;thanks=101884&amp;to_id=48406&amp;from_id=123876" title="Say Thanks to the author of the post: kuu"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=101884#p101884" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="./memberlist.php?mode=viewprofile&u=48406.html" class="username">kuu</a></strong> &raquo; </span><time datetime="2014-12-17T12:04:53+00:00">Wed Dec 17, 2014 1:04 pm</time>
			</p>
			
			
			
			<div class="content">I successfully modded the file. Thanks for all the help WRS!</div>

			
			
									
						<div id='list_thanks101884'>
	<div class="notice">
		<dl>
			
			<dt>These users thanked the author <a href="./memberlist.php?mode=viewprofile&u=48406.html" class="username">kuu</a> for the post: </dt>
			<dd><span title="Wed Dec 17, 2014 7:06 pm"><a href="./memberlist.php?mode=viewprofile&u=16084.html" class="username">WRS</a></span></dd>
		</dl>
	</div>
</div>
<div id='div_post_reput101884'>
	<div class="notice">
		<dl>
			<dt class="small"><strong>Rating:</strong>&nbsp;1.72%</dt>
			<dd>
						<div style="width: 150px; height: 15px;" class="thanks_reput_image_back"><div style="height: 15px; width: 1.72%;" class="thanks_reput_image"></div></div>&nbsp;
						</dd>
		</dl>
	</div>
</div>

										
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	

	<div class="action-bar bar-bottom">
	
			<a href="./posting.php?mode=reply&amp;t=12396" class="button" title="Post a reply">
							<span>Post Reply</span> <i class="icon fa-reply fa-fw" aria-hidden="true"></i>
					</a>
		
		<div class="dropdown-container dropdown-button-control topic-tools">
		<span title="Topic tools" class="button button-secondary dropdown-trigger dropdown-select">
			<i class="icon fa-wrench fa-fw" aria-hidden="true"></i>
			<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
		</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
													<li>
						<a href="./viewtopic.php?uid=123876&amp;f=10&amp;t=12396&amp;watch=topic&amp;start=0&amp;hash=b93df03d" class="watch-topic-link" title="Subscribe topic" data-ajax="toggle_link" data-toggle-class="icon fa-square-o fa-fw" data-toggle-text="Unsubscribe topic" data-toggle-url="./viewtopic.php?uid=123876&amp;f=10&amp;t=12396&amp;unwatch=topic&amp;start=0&amp;hash=b93df03d" data-update-all=".watch-topic-link">
							<i class="icon fa-check-square-o fa-fw" aria-hidden="true"></i><span>Subscribe topic</span>
						</a>
					</li>
													<li>
						<a href="./viewtopic.php?t=12396&amp;bookmark=1&amp;hash=b93df03d" class="bookmark-link" title="Bookmark topic" data-ajax="alt_text" data-alt-text="Remove from bookmarks" data-update-all=".bookmark-link">
							<i class="icon fa-bookmark-o fa-fw" aria-hidden="true"></i><span>Bookmark topic</span>
						</a>
					</li>
																<li>
					<a href="./memberlist.php?mode=email&amp;t=12396" title="Email topic">
						<i class="icon fa-envelope-o fa-fw" aria-hidden="true"></i><span>Email topic</span>
					</a>
				</li>
												<li>
					<a href="./viewtopic.php?t=12396&amp;view=print" title="Print view" accesskey="p">
						<i class="icon fa-print fa-fw" aria-hidden="true"></i><span>Print view</span>
					</a>
				</li>
											</ul>
		</div>
	</div>

			<form method="post" action="./viewtopic.php?t=12396">
		<div class="dropdown-container dropdown-container-left dropdown-button-control sort-tools">
	<span title="Display and sorting options" class="button button-secondary dropdown-trigger dropdown-select">
		<i class="icon fa-sort-amount-asc fa-fw" aria-hidden="true"></i>
		<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
	</span>
	<div class="dropdown hidden">
		<div class="pointer"><div class="pointer-inner"></div></div>
		<div class="dropdown-contents">
			<fieldset class="display-options">
							<label>Display: <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select></label>
								<label>Sort by: <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select></label>
				<label>Direction: <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select></label>
								<hr class="dashed" />
				<input type="submit" class="button2" name="sort" value="Go" />
						</fieldset>
		</div>
	</div>
</div>
		</form>
	
	
	
			<div class="pagination">
			12 posts
							&bull; Page <strong>1</strong> of <strong>1</strong>
					</div>
	</div>


<div class="action-bar actions-jump">
		<p class="jumpbox-return">
		<a href="./viewforum.php?f=10" class="left-box arrow-left" accesskey="r">
			<i class="icon fa-angle-left fa-fw icon-black" aria-hidden="true"></i><span>Return to “Game Archive”</span>
		</a>
	</p>
	
		<div class="jumpbox dropdown-container dropdown-container-right dropdown-up dropdown-left dropdown-button-control" id="jumpbox">
			<span title="Jump to" class="button button-secondary dropdown-trigger dropdown-select">
				<span>Jump to</span>
				<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
			</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																				<li><a href="../Forums/26 - XeNTaX - General Discussion.html" class="jumpbox-cat-link"> <span> General Discussion</span></a></li>
																<li><a href="./viewforum.php?f=22" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Holy Cow!</span></a></li>
																<li><a href="./viewforum.php?f=40" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Game news</span></a></li>
																<li><a href="./viewforum.php?f=38" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Game Tech Tips</span></a></li>
																<li><a href="./viewforum.php?f=41" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Cool mods</span></a></li>
																<li><a href="./viewforum.php?f=28" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Website</span></a></li>
																<li><a href="./viewforum.php?f=24" class="jumpbox-cat-link"> <span> Game Modding</span></a></li>
																<li><a href="./viewforum.php?f=29" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Tutorials</span></a></li>
																<li><a href="./viewforum.php?f=16" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; 3D/2D models</span></a></li>
																<li><a href="./viewforum.php?f=17" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Audio file formats</span></a></li>
																<li><a href="./viewforum.php?f=18" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Graphic file formats</span></a></li>
																<li><a href="./viewforum.php?f=36" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Video file formats</span></a></li>
																<li><a href="./viewforum.php?f=10" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Game Archive</span></a></li>
																<li><a href="./viewforum.php?f=21" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Compressed files and methods</span></a></li>
																<li><a href="./viewforum.php?f=13" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Code Talk</span></a></li>
																<li><a href="./viewforum.php?f=35" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Game Localization</span></a></li>
																<li><a href="./viewforum.php?f=30" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Savegames</span></a></li>
																<li><a href="./viewforum.php?f=15" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Old posts</span></a></li>
																<li><a href="./viewforum.php?f=37" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Retro games</span></a></li>
																<li><a href="./viewforum.php?f=25" class="jumpbox-cat-link"> <span> MultiEx Commander</span></a></li>
																<li><a href="./viewforum.php?f=3" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; News</span></a></li>
																<li><a href="./viewforum.php?f=14" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Plugins</span></a></li>
																<li><a href="./viewforum.php?f=9" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Troubleshooting</span></a></li>
																<li><a href="./viewforum.php?f=11" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Miscellaneous</span></a></li>
																<li><a href="./viewforum.php?f=31" class="jumpbox-cat-link"> <span> Tools &amp; Programs</span></a></li>
																<li><a href="./viewforum.php?f=32" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Game specific tools</span></a></li>
																<li><a href="./viewforum.php?f=33" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; General game tools</span></a></li>
											</ul>
		</div>
	</div>

	</div>


	<div class="stat-block online-list">
		<h3><a href="./viewonline.php">Who is online</a></h3>
		<p>Users browsing this forum: <span style="color: #9E8DA7;" class="username-coloured">Ahrefs [Bot]</span>, <a href="./memberlist.php?mode=viewprofile&u=123876.html" class="username">escape209</a> and 6 guests</p>
	</div>

			</div>


<div id="page-footer" class="page-footer" role="contentinfo">
	<div class="navbar" role="navigation">
	<div class="inner">

	<ul id="nav-footer" class="nav-footer linklist" role="menubar">
		<li class="breadcrumbs">
									<span class="crumb"><a href="./index.php" data-navbar-reference="index"><i class="icon fa-home fa-fw" aria-hidden="true"></i><span>Board index</span></a></span>					</li>
		
				<li class="rightside">All times are <span title="UTC+1">UTC+01:00</span></li>
							<li class="rightside">
				<a href="./ucp.php?mode=delete_cookies" data-ajax="true" data-refresh="true" role="menuitem">
					<i class="icon fa-trash fa-fw" aria-hidden="true"></i><span>Delete cookies</span>
				</a>
			</li>
							<li class="rightside" data-last-responsive="true">
					<a href="./memberlist.php" title="View complete list of members" role="menuitem">
						<i class="icon fa-group fa-fw" aria-hidden="true"></i><span>Members</span>
					</a>
				</li>
												<li class="rightside" data-last-responsive="true">
				<a href="./memberlist.php?mode=team" role="menuitem">
					<i class="icon fa-shield fa-fw" aria-hidden="true"></i><span>The team</span>
				</a>
			</li>
							</ul>

	</div>
</div>

	<div class="copyright">
				<p class="footer-row">
			<span class="footer-copyright">Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited</span>
		</p>
						<p class="footer-row" role="menu">
			<a class="footer-link" href="./ucp.php?mode=privacy" title="Privacy" role="menuitem">
				<span class="footer-link-text">Privacy</span>
			</a>
			|
			<a class="footer-link" href="./ucp.php?mode=terms" title="Terms" role="menuitem">
				<span class="footer-link-text">Terms</span>
			</a>
		</p>
					</div>

	<div id="darkenwrapper" class="darkenwrapper" data-ajax-error-title="AJAX error" data-ajax-error-text="Something went wrong when processing your request." data-ajax-error-text-abort="User aborted request." data-ajax-error-text-timeout="Your request timed out; please try again." data-ajax-error-text-parsererror="Something went wrong with the request and the server returned an invalid reply.">
		<div id="darken" class="darken">&nbsp;</div>
	</div>

	<div id="phpbb_alert" class="phpbb_alert" data-l-err="Error" data-l-timeout-processing-req="Request timed out.">
		<a href="#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
		<h3 class="alert_title">&nbsp;</h3><p class="alert_text"></p>
	</div>
	<div id="phpbb_confirm" class="phpbb_alert">
		<a href="#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
		<div class="alert_text"></div>
	</div>
</div>

</div>

<div>
	<a id="bottom" class="anchor" accesskey="z"></a>
	</div>

<script src="./assets/javascript/jquery-3.6.0.min.js?assets_version=11"></script>
<script src="./assets/javascript/core.js?assets_version=11"></script>


<script type="text/javascript">
(function($) {  // Avoid conflicts with other libraries

'use strict';
	
	phpbb.addAjaxCallback('reporttosfs', function(data) {
		if (data.postid !== "undefined") {
			$('#sfs' + data.postid).hide();
			phpbb.closeDarkenWrapper(5000);
		}
	});

})(jQuery);
</script>
<script src="./ext/phpbb/boardannouncements/styles/all/template/js/boardannouncements.js?assets_version=11"></script>
<script src="./styles/prosilver/template/forum_fn.js?assets_version=11"></script>
<script src="./styles/prosilver/template/ajax.js?assets_version=11"></script>



</body>
</html>
