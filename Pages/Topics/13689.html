<!DOCTYPE html>
<html dir="ltr" lang="en-gb">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>Phantasy Star Online V2/BB - Map Extraction - XeNTaX</title>


	<link rel="canonical" href="https://forum.xentax.com/viewtopic.php?t=13689">

<!--
	phpBB style name: prosilver
	Based on style:   prosilver (this is the default phpBB3 style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by:
-->

<link href="./assets/css/font-awesome.min.css?assets_version=11" rel="stylesheet">
<link href="./styles/prosilver/theme/stylesheet.css?assets_version=11" rel="stylesheet">
<link href="./styles/prosilver/theme/en/stylesheet.css?assets_version=11" rel="stylesheet">




<!--[if lte IE 9]>
	<link href="./styles/prosilver/theme/tweaks.css?assets_version=11" rel="stylesheet">
<![endif]-->


<link href="./ext/gfksx/thanksforposts/styles/prosilver/theme/thanks.css?assets_version=11" rel="stylesheet" media="screen" />
<link href="./ext/hifikabin/headerbanner/styles/prosilver/theme/headerbanner.css?assets_version=11" rel="stylesheet" media="screen" />
<link href="./ext/hifikabin/headerbanner/styles/prosilver/theme/headerbanner_background.css?assets_version=11" rel="stylesheet" media="screen" />
<link href="./ext/phpbb/boardannouncements/styles/all/theme/boardannouncements.css?assets_version=11" rel="stylesheet" media="screen" />



</head>
<body id="phpbb" class="nojs notouch section-viewtopic ltr ">


<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>
	<div id="page-header">
		<div class="headerbar" role="banner">
					<div class="inner">

			<div id="site-description" class="site-description">
		<a id="logo" class="logo" href="./index.php" title="Board index">
					<span class="site_logo"></span>
				</a>
				<h1>XeNTaX</h1>
				<p>Game Research Forum</p>
				<p class="skiplink"><a href="#start_here">Skip to content</a></p>
			</div>

									<div class="banner-header">
	<div style="position:absolute; z-index:-100;">
	<h1>XeNTaX</h1>
	<p>Game Research Forum</p>
	<p class="skiplink"><a href="#start_here">Skip to content</a></p>
</div>
<div class="header-banner">
	<a href="./index.php" title="Board index"><img class="header-banner" style="border-radius:0px; width:1500px;" src="http://forum.xentax.com/images/gameresforum_logo_1.png" alt="Board index" ></a>
</div>
</div>

			</div>
					</div>
				<div class="navbar" role="navigation">
	<div class="inner">

	<ul id="nav-main" class="nav-main linklist" role="menubar">

		<li id="quick-links" class="quick-links dropdown-container responsive-menu" data-skip-responsive="true">
			<a href="#" class="dropdown-trigger">
				<i class="icon fa-bars fa-fw" aria-hidden="true"></i><span>Quick links</span>
			</a>
			<div class="dropdown">
				<div class="pointer"><div class="pointer-inner"></div></div>
				<ul class="dropdown-contents" role="menu">
					
											<li class="separator"></li>
													<li>
								<a href="./search.php?search_id=egosearch" role="menuitem">
									<i class="icon fa-file-o fa-fw icon-gray" aria-hidden="true"></i><span>Your posts</span>
								</a>
							</li>
																			<li>
								<a href="./search.php?search_id=newposts" role="menuitem">
									<i class="icon fa-file-o fa-fw icon-red" aria-hidden="true"></i><span>New posts</span>
								</a>
							</li>
																			<li>
								<a href="./search.php?search_id=unreadposts" role="menuitem">
									<i class="icon fa-file-o fa-fw icon-red" aria-hidden="true"></i><span>Unread posts</span>
								</a>
							</li>
													<li>
								<a href="./search.php?search_id=unanswered" role="menuitem">
									<i class="icon fa-file-o fa-fw icon-gray" aria-hidden="true"></i><span>Unanswered topics</span>
								</a>
							</li>
							<li>
								<a href="./search.php?search_id=active_topics" role="menuitem">
									<i class="icon fa-file-o fa-fw icon-blue" aria-hidden="true"></i><span>Active topics</span>
								</a>
							</li>
							<li class="separator"></li>
							<li>
								<a href="./search.php" role="menuitem">
									<i class="icon fa-search fa-fw" aria-hidden="true"></i><span>Search</span>
								</a>
							</li>
					
											<li class="separator"></li>
													<li>
								<a href="./memberlist.php" role="menuitem">
									<i class="icon fa-group fa-fw" aria-hidden="true"></i><span>Members</span>
								</a>
							</li>
																			<li>
								<a href="./memberlist.php?mode=team" role="menuitem">
									<i class="icon fa-shield fa-fw" aria-hidden="true"></i><span>The team</span>
								</a>
							</li>
																<li class="separator"></li>

						<li>
		<a href="/app.php/toplist"  role="menuitem">
			<i class="icon fa-star-o fa-fw" aria-hidden="true"></i><span>Posts toplist</span>
		</a>
	</li>
	<li>
		<a href="/app.php/thankslist"  role="menuitem">
			<i class="icon fa-thumbs-o-up fa-fw" aria-hidden="true"></i><span>Thanks list</span>
		</a>
	</li>
				</ul>
			</div>
		</li>

				<li data-last-responsive="true">
			<a href="/app.php/help/faq" rel="help" title="Frequently Asked Questions" role="menuitem">
				<i class="icon fa-question-circle fa-fw" aria-hidden="true"></i><span>FAQ</span>
			</a>
		</li>
						
					<li id="username_logged_in" class="rightside " data-skip-responsive="true">
						<div class="header-profile dropdown-container">
				<a href="./ucp.php" class="header-avatar dropdown-trigger"> <span class="username">escape209</span></a>
				<div class="dropdown">
					<div class="pointer"><div class="pointer-inner"></div></div>
					<ul class="dropdown-contents" role="menu">
						
					
						<li>
							<a href="./ucp.php" title="User Control Panel" role="menuitem">
								<i class="icon fa-sliders fa-fw" aria-hidden="true"></i><span>User Control Panel</span>
							</a>
						</li>
													<li>
								<a href="./memberlist.php?mode=viewprofile&u=123876.html" title="Profile" role="menuitem">
									<i class="icon fa-user fa-fw" aria-hidden="true"></i><span>Profile</span>
								</a>
							</li>
						
						
						<li class="separator"></li>
						<li>
							<a href="./ucp.php?mode=logout&amp;sid=f03065a94e53d4183cf1d6f8f99502e7" title="Logout" accesskey="x" role="menuitem">
								<i class="icon fa-power-off fa-fw" aria-hidden="true"></i><span>Logout</span>
							</a>
						</li>
					</ul>
				</div>
			</div>
					</li>
					<li class="rightside" data-skip-responsive="true">
				<a href="./ucp.php?i=pm&amp;folder=inbox" role="menuitem">
					<i class="icon fa-inbox fa-fw" aria-hidden="true"></i><span>Private messages </span><strong class="badge hidden">0</strong>
				</a>
			</li>
							<li class="dropdown-container dropdown-right rightside" data-skip-responsive="true">
				<a href="./ucp.php?i=ucp_notifications" id="notification_list_button" class="dropdown-trigger">
					<i class="icon fa-bell fa-fw" aria-hidden="true"></i><span>Notifications </span><strong class="badge hidden">0</strong>
				</a>
				<div id="notification_list" class="dropdown dropdown-extended notification_list">
	<div class="pointer"><div class="pointer-inner"></div></div>
	<div class="dropdown-contents">
		<div class="header">
			Notifications
			<span class="header_settings">
				<a href="./ucp.php?i=ucp_notifications&amp;mode=notification_options">Settings</a>
							</span>
		</div>

		<ul>
							<li class="no_notifications">
					You have no notifications
				</li>
								</ul>

		<div class="footer">
			<a href="./ucp.php?i=ucp_notifications"><span>See All</span></a>
		</div>
	</div>
</div>
			</li>
						</ul>

	<ul id="nav-breadcrumbs" class="nav-breadcrumbs linklist navlinks" role="menubar">
				
		
		<li class="breadcrumbs" itemscope itemtype="https://schema.org/BreadcrumbList">

			
							<span class="crumb" itemtype="https://schema.org/ListItem" itemprop="itemListElement" itemscope><a itemprop="item" href="./index.php" accesskey="h" data-navbar-reference="index"><i class="icon fa-home fa-fw"></i><span itemprop="name">Board index</span></a><meta itemprop="position" content="1" /></span>

											
								<span class="crumb" itemtype="https://schema.org/ListItem" itemprop="itemListElement" itemscope data-forum-id="24"><a itemprop="item" href="./viewforum.php?f=24"><span itemprop="name">Game Modding</span></a><meta itemprop="position" content="2" /></span>
															
								<span class="crumb" itemtype="https://schema.org/ListItem" itemprop="itemListElement" itemscope data-forum-id="16"><a itemprop="item" href="./viewforum.php?f=16"><span itemprop="name">3D/2D models</span></a><meta itemprop="position" content="3" /></span>
							
					</li>

		<li class="rightside responsive-search">
	<a href="./search.php" title="View the advanced search options" role="menuitem">
	<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
	</a>
</li>

			</ul>

	</div>
</div>
	</div>

	
	<a id="start_here" class="anchor"></a>
	<div id="page-body" class="page-body" role="main">
		
					<div id="phpbb_announcement" style="background-color:#d9efff">
				<div><strong class="text-strong"><span style="color:#00BF00"><span style="font-size:120%;line-height:116%">Important information: this site is currently <a href="https://forum.xentax.com/viewtopic.php?t=27281" class="postlink">scheduled to go offline indefinitely</a> by end of the year. </span></span></strong></div>
	</div>

<h2 class="topic-title"><a href="./13689.html">Phantasy Star Online V2/BB - Map Extraction</a></h2>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body -->
<div style="display: none !important;">Post questions about game models here, or help out others!<br /></div>

	<div class="rules rules-link">
		<div class="inner">

					<a href="http://forum.xentax.com/viewtopic.php?f=28&amp;t=1270">Forum rules</a>
		
		</div>
	</div>

<div class="action-bar bar-top">
	
			<a href="./posting.php?mode=reply&amp;t=13689" class="button" title="Post a reply">
							<span>Post Reply</span> <i class="icon fa-reply fa-fw" aria-hidden="true"></i>
					</a>
	
			<div class="dropdown-container dropdown-button-control topic-tools">
		<span title="Topic tools" class="button button-secondary dropdown-trigger dropdown-select">
			<i class="icon fa-wrench fa-fw" aria-hidden="true"></i>
			<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
		</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
													<li>
						<a href="./viewtopic.php?uid=123876&amp;f=16&amp;t=13689&amp;watch=topic&amp;start=0&amp;hash=3ad5ae43" class="watch-topic-link" title="Subscribe topic" data-ajax="toggle_link" data-toggle-class="icon fa-square-o fa-fw" data-toggle-text="Unsubscribe topic" data-toggle-url="./viewtopic.php?uid=123876&amp;f=16&amp;t=13689&amp;unwatch=topic&amp;start=0&amp;hash=3ad5ae43" data-update-all=".watch-topic-link">
							<i class="icon fa-check-square-o fa-fw" aria-hidden="true"></i><span>Subscribe topic</span>
						</a>
					</li>
													<li>
						<a href="./viewtopic.php?t=13689&amp;bookmark=1&amp;hash=3ad5ae43" class="bookmark-link" title="Bookmark topic" data-ajax="alt_text" data-alt-text="Remove from bookmarks" data-update-all=".bookmark-link">
							<i class="icon fa-bookmark-o fa-fw" aria-hidden="true"></i><span>Bookmark topic</span>
						</a>
					</li>
																<li>
					<a href="./memberlist.php?mode=email&amp;t=13689" title="Email topic">
						<i class="icon fa-envelope-o fa-fw" aria-hidden="true"></i><span>Email topic</span>
					</a>
				</li>
												<li>
					<a href="./viewtopic.php?t=13689&amp;view=print" title="Print view" accesskey="p">
						<i class="icon fa-print fa-fw" aria-hidden="true"></i><span>Print view</span>
					</a>
				</li>
											</ul>
		</div>
	</div>
	
			<div class="search-box" role="search">
			<form method="get" id="topic-search" action="./search.php">
			<fieldset>
				<input class="inputbox search tiny"  type="search" name="keywords" id="search_keywords" size="20" placeholder="Search this topicâ€¦" />
				<button class="button button-search" type="submit" title="Search">
					<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
				</button>
				<a href="./search.php" class="button button-search-end" title="Advanced search">
					<i class="icon fa-cog fa-fw" aria-hidden="true"></i><span class="sr-only">Advanced search</span>
				</a>
				<input type="hidden" name="t" value="13689" />
<input type="hidden" name="sf" value="msgonly" />

			</fieldset>
			</form>
		</div>
	
			<div class="pagination">
			7 posts
							&bull; Page <strong>1</strong> of <strong>1</strong>
					</div>
		</div>




			<div id="p113494" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile113494">
			<dt class="has-profile-rank has-avatar">
				<div class="avatar-container">
																<a href="./memberlist.php?mode=viewprofile&u=31577.html" class="avatar"><img class="avatar" src="./download/file.php?avatar=31577_1574332054.png" width="120" height="78" alt="User avatar" /></a>														</div>
								<a href="./memberlist.php?mode=viewprofile&u=31577.html" class="username">zaykho</a>							</dt>

						<dd class="profile-rank">mega-veteran<br /><img src="./images/ranks/vip-1.png" alt="mega-veteran" title="mega-veteran" /></dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=31577&amp;sr=posts">217</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Fri Dec 03, 2010 1:20 pm</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> France</dd>
							    <dd class="profile-posts" data-user-give-id="31577"><strong>Has&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/31577/true">158 times</a></dd>
    <dd class="profile-posts" data-user-receive-id="31577"><strong>Been&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/31577/false">52 times</a></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact zaykho">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact zaykho</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=113494" title="Send private message" class="last-cell">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content113494">

					<h3 class="first">
						<a href="./viewtopic.php?p=113494#p113494">Phantasy Star Online V2/BB - Map Extraction</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/113494/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=113494" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post113494' href="./viewtopic.php?f=16&amp;p=113494&amp;thanks=113494&amp;to_id=31577&amp;from_id=123876" title="Say Thanks to the author of the post: zaykho"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=113494#p113494" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="./memberlist.php?mode=viewprofile&u=31577.html" class="username">zaykho</a></strong> &raquo; </span><time datetime="2015-12-17T09:34:11+00:00">Thu Dec 17, 2015 10:34 am</time>
			</p>
			
			
			
			<div class="content"><a href="http://www.hostingpics.net/viewer.php?id=779932psobb2014081513412634psobb2014081513415240cc3b3pia.png" class="postlink"><img src="http://img15.hostingpics.net/pics/779932psobb2014081513412634psobb2014081513415240cc3b3pia.png" class="postimage" alt="Image"></a><br>
<br>
Hello all !<br>
<br>
Does anyone can help us to extract map content from <strong class="text-strong">both</strong> PSOV2 (PC) and PSOBB ?<br>
<br>
<br>
<a href="http://www.hostingpics.net/viewer.php?id=194579psobbpano1.png" class="postlink"><img src="http://img15.hostingpics.net/pics/194579psobbpano1.png" class="postimage" alt="Image"></a></div>

			
			
													<div class="notice">
					Last edited by <a href="./memberlist.php?mode=viewprofile&u=31577.html" class="username">zaykho</a> on Tue Mar 22, 2016 8:03 am, edited 3 times in total.
									</div>
			
						<div id='list_thanks113494'>
	<div class="notice">
		<dl>
			
			<dt>These users thanked the author <a href="./memberlist.php?mode=viewprofile&u=31577.html" class="username">zaykho</a> for the post (total 2):</dt>
			<dd><span title="Sat Dec 26, 2015 3:53 pm"><a href="./memberlist.php?mode=viewprofile&u=41194.html" class="username">shakotay2</a></span>, <span title="Sun Dec 27, 2015 1:55 pm"><a href="./memberlist.php?mode=viewprofile&u=45550.html" class="username">PsowKion</a></span></dd>
		</dl>
	</div>
</div>
<div id='div_post_reput113494'>
	<div class="notice">
		<dl>
			<dt class="small"><strong>Rating:</strong>&nbsp;3.45%</dt>
			<dd>
						<div style="width: 150px; height: 15px;" class="thanks_reput_image_back"><div style="height: 15px; width: 3.45%;" class="thanks_reput_image"></div></div>&nbsp;
						</dd>
		</dl>
	</div>
</div>

										
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

				<div id="p113501" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile113501">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="./memberlist.php?mode=viewprofile&u=45550.html" class="username">PsowKion</a>							</dt>

						<dd class="profile-rank">ultra-n00b</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=45550&amp;sr=posts">6</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Wed Aug 13, 2014 1:10 pm</dd>		
		
						    <dd class="profile-posts" data-user-give-id="45550"><strong>Has&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/45550/true">5 times</a></dd>
    <dd class="profile-posts" data-user-receive-id="45550"><strong>Been&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/45550/false">10 times</a></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact PsowKion">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact PsowKion</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=113501" title="Send private message" class="last-cell">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content113501">

					<h3 >
						<a href="./viewtopic.php?p=113501#p113501">Re: Phantasy Star Online V2/BB - Map Extraction</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/113501/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=113501" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post113501' href="./viewtopic.php?f=16&amp;p=113501&amp;thanks=113501&amp;to_id=45550&amp;from_id=123876" title="Say Thanks to the author of the post: PsowKion"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=113501#p113501" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="./memberlist.php?mode=viewprofile&u=45550.html" class="username">PsowKion</a></strong> &raquo; </span><time datetime="2015-12-17T13:17:55+00:00">Thu Dec 17, 2015 2:17 pm</time>
			</p>
			
			
			
			<div class="content">Hey guys Kion here. I've been working on extracting Pso maps specifically and trying to make all of my documentation and source along the way available as well. For the most part I can parse the binary files in Pso and extract them to json format. Such as this json representation of the psychowand from psobb: <a href="https://github.com/seiche/Pso_File_Formats/blob/master/njtl/12/sample/pwand.json" class="postlink">link</a>. I don't have a lot of experience with 3d, so right now the main thing I'm having trouble with is applying UV, 3d matrix math, vertex color and things like that. If anyone has any experience with the .nj filetype or similar Ninja0Lbrary models, then the stage files from PSO is just a file containing a list of inner-nj files. <br>
<br>
<strong class="text-strong">nj</strong><br>
Right now i'm working on nj files using the Katana SDK documentation and Kryslin's ExMldNet source to read nj files. Parsing the information isn't too hard, it's how to apply the rotation and translation matrixes from parent to child and applying the uv is what i'm having trouble with now. I'm hoping that a decent understanding of nj will help me approach the other file formats.<br>
<br>
<strong class="text-strong">n.rel</strong><br>
In Pso Version 2 to for the PC (and PSO for the dreamcast as well, i think) use a format called n.rel for stage model files. The pointer to the header of the file is at EOF - 16. The header is four dwords long: 
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>stage = {
    num_sections : dword,
    iff_str : dword,
    section_addr : dword,
    texture_addr : dword
  };</code></pre></div>
First it has the number of sections. Next it has some kind of IFF string which seems to be "  HD" in most cases. The section address is the header to the start of the section list and the texture address a pointer to the list of texture names for the model. The list of texture names follows the exact same format at the NJTL structure.<br>
<br>
As for the section list, each entry seems to have the structure of:
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>[{
   id : dword,
   pos : {
     dx : single,
     dy : single,
     dz : single
   },
   rot : {
     x : int,
     y : int,
     z : int,
   },
   radius : single(),
   //pointers
   model_addr_a : dword,
   unknown : dword,
   model_addr_b : dword,
   //number of
   num_model_a : dword,
   num_unknown : dword,
   num_model_b : dword,
   end : dword
}
...]</code></pre></div>

This is not an exact science, but the best guess i have based on the information. The first number seems to be a sequential number for the section number. Followed by the translation for each section. The rotation only seems to be across the y-axis for any given section. Following that there are two groups of model pointers, a and b. I'll get to those in a second. As for the unknown entry i'm not entirely sure since it seems to point to a list of 0x1000 values. As for the end value, i'm not entirely sure if it's a <br>
<br>
Model list A and model list B are both a list of pointers to .nj models inside the n.rel file. The first entry is a dword to the start of the nj model. Following that, the model A list struct seems to have a length of 0x2c bytes which is most often filled with zero's. The model B list has a struct length of 0x38 bytes following the first struct. I'm not sure what the difference is, but my best guess is that the model A list is static content while the model B list might have extra pointers to animation key frames.<br>
<br>
Basically each section seems to be a scene inside the map. Such as a shop, a room, or a segment of a stage which is first rendered at the origin. It is then rotated around the y-axis in the left or right direction and then translated to where it needs to be relative to the rest of the stage. I wrote a small script to export each section of an n.rel map to it's own model which can be viewed in noesis, but I'd like to be able to export the whole stage file directly if possible.<br>
<br>
<strong class="text-strong">xj</strong><br>
The xj file format seems to be a derivative of the nj file format or at least similar. Rather than use ninja-chunks it uses polygons which seem to be a pointer to a list of shorts describing the indices. I've done what I can to document the xj file format here: <a href="https://github.com/seiche/Ninja-Lib/blob/master/documentation/XJ_Format.md" class="postlink">link</a>. For the most part I can read and render the models, but I'm still missing out on some information which I'm hoping to fill in with a better understanding on nj.<br>
<br>
<strong class="text-strong">n.rel</strong> (again)<br>
PSOBB uses n.rel models, but with internal xj models as opposed to inner-nj models. Some of the struct sizes are different. I ported Schthack's model viewer to nodejs, then I went back to try and parse xj models, then I went back to maps again. The result of what I was able to analyze is in this folder: <a href="https://github.com/seiche/Pso_File_Formats/tree/master/stage/07" class="postlink">here</a>. For the most part I'm able to parse and render vertices, still missing some texture information and y-translation, but everything else seems to more or less work okay.</div>

			
			
									
						<div id='list_thanks113501'>
	<div class="notice">
		<dl>
			
			<dt>These users thanked the author <a href="./memberlist.php?mode=viewprofile&u=45550.html" class="username">PsowKion</a> for the post (total 2):</dt>
			<dd><span title="Thu Dec 17, 2015 3:17 pm"><a href="./memberlist.php?mode=viewprofile&u=31577.html" class="username">zaykho</a></span>, <span title="Sat Dec 26, 2015 3:53 pm"><a href="./memberlist.php?mode=viewprofile&u=41194.html" class="username">shakotay2</a></span></dd>
		</dl>
	</div>
</div>
<div id='div_post_reput113501'>
	<div class="notice">
		<dl>
			<dt class="small"><strong>Rating:</strong>&nbsp;3.45%</dt>
			<dd>
						<div style="width: 150px; height: 15px;" class="thanks_reput_image_back"><div style="height: 15px; width: 3.45%;" class="thanks_reput_image"></div></div>&nbsp;
						</dd>
		</dl>
	</div>
</div>

										
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

				<div id="p113898" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile113898">
			<dt class="has-profile-rank has-avatar">
				<div class="avatar-container">
																<a href="./memberlist.php?mode=viewprofile&u=41194.html" class="avatar"><img class="avatar" src="./download/file.php?avatar=41194_1430129462.jpg" width="120" height="120" alt="User avatar" /></a>														</div>
								<a href="./memberlist.php?mode=viewprofile&u=41194.html" class="username">shakotay2</a>							</dt>

						<dd class="profile-rank">MEGAVETERAN<br /><img src="./images/ranks/vip-2.png" alt="MEGAVETERAN" title="MEGAVETERAN" /></dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=41194&amp;sr=posts">4291</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Fri Apr 20, 2012 9:24 am</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Nexus, searching for Jim Kirk</dd>
							    <dd class="profile-posts" data-user-give-id="41194"><strong>Has&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/41194/true">1151 times</a></dd>
    <dd class="profile-posts" data-user-receive-id="41194"><strong>Been&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/41194/false">2244 times</a></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact shakotay2">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact shakotay2</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=113898" title="Send private message" class="last-cell">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content113898">

					<h3 >
						<a href="./viewtopic.php?p=113898#p113898">Re: Phantasy Star Online V2/BB - Map Extraction</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/113898/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=113898" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post113898' href="./viewtopic.php?f=16&amp;p=113898&amp;thanks=113898&amp;to_id=41194&amp;from_id=123876" title="Say Thanks to the author of the post: shakotay2"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=113898#p113898" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="./memberlist.php?mode=viewprofile&u=41194.html" class="username">shakotay2</a></strong> &raquo; </span><time datetime="2015-12-26T14:53:20+00:00">Sat Dec 26, 2015 3:53 pm</time>
			</p>
			
			
			
			<div class="content"><blockquote><div><cite>PsowKion wrote:</cite>The result of what I was able to analyze is in this folder: <a href="https://github.com/seiche/Pso_File_Formats/tree/master/stage/07" class="postlink">here</a>.</div></blockquote>Looks great in Noesis with textures! (Though the meshes are not that detailed.)<br>
<br>
Finally I managed to get that nasty beast compiled using my old Delphi2005 PE:
<div class="inline-attachment">
			
		
				<dl class="file">
			<dt class="attach-image"><img src="./download/file.php?id=10223" class="postimage" alt="mapviewer-old.jpg" onclick="viewableArea(this);" /></dt>
						<dd>mapviewer-old.jpg (129.48 KiB) Viewed 247 times</dd>
		</dl>
		
		
			</div>
Is there any newer source version of the mapviewer?</div>

			
			
									
						<div id='list_thanks113898'>
	<div class="notice">
		<dl>
			
			<dt>These users thanked the author <a href="./memberlist.php?mode=viewprofile&u=41194.html" class="username">shakotay2</a> for the post: </dt>
			<dd><span title="Sat Dec 26, 2015 7:56 pm"><a href="./memberlist.php?mode=viewprofile&u=31577.html" class="username">zaykho</a></span></dd>
		</dl>
	</div>
</div>
<div id='div_post_reput113898'>
	<div class="notice">
		<dl>
			<dt class="small"><strong>Rating:</strong>&nbsp;1.72%</dt>
			<dd>
						<div style="width: 150px; height: 15px;" class="thanks_reput_image_back"><div style="height: 15px; width: 1.72%;" class="thanks_reput_image"></div></div>&nbsp;
						</dd>
		</dl>
	</div>
</div>

							<div id="sig113898" class="signature">Tuts: a) Bigchillghost, <a href="https://forum.xentax.com/viewtopic.php?f=29&amp;t=17889" class="postlink">viewtopic.php?f=29&amp;t=17889</a><br>
b) Extracting simple models: <a href="http://forum.xentax.com/viewtopic.php?f=29&amp;t=10894" class="postlink">http://forum.xentax.com/viewtopic.php?f=29&amp;t=10894</a><br>
"Quoting the whole thing. Would u ever stop this nonsense?"</div>			
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

				<div id="p113904" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile113904">
			<dt class="has-profile-rank has-avatar">
				<div class="avatar-container">
																<a href="./memberlist.php?mode=viewprofile&u=31577.html" class="avatar"><img class="avatar" src="./download/file.php?avatar=31577_1574332054.png" width="120" height="78" alt="User avatar" /></a>														</div>
								<a href="./memberlist.php?mode=viewprofile&u=31577.html" class="username">zaykho</a>							</dt>

						<dd class="profile-rank">mega-veteran<br /><img src="./images/ranks/vip-1.png" alt="mega-veteran" title="mega-veteran" /></dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=31577&amp;sr=posts">217</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Fri Dec 03, 2010 1:20 pm</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> France</dd>
							    <dd class="profile-posts" data-user-give-id="31577"><strong>Has&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/31577/true">158 times</a></dd>
    <dd class="profile-posts" data-user-receive-id="31577"><strong>Been&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/31577/false">52 times</a></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact zaykho">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact zaykho</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=113904" title="Send private message" class="last-cell">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content113904">

					<h3 >
						<a href="./viewtopic.php?p=113904#p113904">Re: Phantasy Star Online V2/BB - Map Extraction</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/113904/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=113904" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post113904' href="./viewtopic.php?f=16&amp;p=113904&amp;thanks=113904&amp;to_id=31577&amp;from_id=123876" title="Say Thanks to the author of the post: zaykho"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=113904#p113904" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="./memberlist.php?mode=viewprofile&u=31577.html" class="username">zaykho</a></strong> &raquo; </span><time datetime="2015-12-26T18:58:42+00:00">Sat Dec 26, 2015 7:58 pm</time>
			</p>
			
			
			
			<div class="content"><blockquote><div><cite>shakotay2 wrote:</cite><blockquote><div><cite>PsowKion wrote:</cite>The result of what I was able to analyze is in this folder: <a href="https://github.com/seiche/Pso_File_Formats/tree/master/stage/07" class="postlink">here</a>.</div></blockquote>Looks great in Noesis with textures! (Though the meshes are not that detailed.)<br>
<br>
Finally I managed to get that nasty beast compiled using my old Delphi2005 PE:
</div></blockquote>

Nice !!<br>
<br>

<blockquote><div><cite>shakotay2 wrote:</cite>
Is there any newer source version of the mapviewer?</div></blockquote>

I don't think, but I will let PsowKion answer this, he know better than me about this subject.</div>

			
			
									
						<div id='list_thanks113904'>
</div>
<div id='div_post_reput113904'>
</div>

										
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

				<div id="p113917" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile113917">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="./memberlist.php?mode=viewprofile&u=45550.html" class="username">PsowKion</a>							</dt>

						<dd class="profile-rank">ultra-n00b</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=45550&amp;sr=posts">6</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Wed Aug 13, 2014 1:10 pm</dd>		
		
						    <dd class="profile-posts" data-user-give-id="45550"><strong>Has&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/45550/true">5 times</a></dd>
    <dd class="profile-posts" data-user-receive-id="45550"><strong>Been&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/45550/false">10 times</a></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact PsowKion">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact PsowKion</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=113917" title="Send private message" class="last-cell">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content113917">

					<h3 >
						<a href="./viewtopic.php?p=113917#p113917">Re: Phantasy Star Online V2/BB - Map Extraction</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/113917/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=113917" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post113917' href="./viewtopic.php?f=16&amp;p=113917&amp;thanks=113917&amp;to_id=45550&amp;from_id=123876" title="Say Thanks to the author of the post: PsowKion"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=113917#p113917" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="./memberlist.php?mode=viewprofile&u=45550.html" class="username">PsowKion</a></strong> &raquo; </span><time datetime="2015-12-27T08:37:31+00:00">Sun Dec 27, 2015 9:37 am</time>
			</p>
			
			
			
			<div class="content">As far as I can tell Schthack's map viewer source is incomplete. For the most part it's able to display maps and get the textures, but it's missing some details like rotation. If you look at the dates of the .pas files in the archive it looks like the map viewer was made in 2008. I think he then went back to the drawing board and fixed his mistakes with the model viewer which he released in 2009, which seems to display everything, but he never released the source code for that.<br>
<br>
If you want a slimmed down port, I was able to port Schthack's map viewer to Nodejs and modified it to export .obj files. The source is over  <a href="https://github.com/seiche/Pso_File_Formats/blob/master/mapview/edit08.js" class="postlink">on github</a>. After that I wasn't sure how to follow up, so I decided to scale down and focus on .xj model types, which the source for is in the <a href="https://github.com/seiche/Pso_File_Formats/tree/master/njtl/12" class="postlink">same repository</a>.<br>
<br>
The problem that I faced for a while was parsing the information wasn't too hard, but I don't have a lot of experience with 3d, so exporting the models turned out harder than expected. I turned to Kryslin's ExMLDNet and started working on .nj models to see if there were any hits that could help me fill in the holes I had for PSOBB maps and .xj models. The good news is while still pretty primitive, I was able to parse NJ files and export the model structure correctly. The source for that is over in <a href="https://github.com/seiche/Pso_Toolset/blob/master/nj_export/alpha/njcm.jst" class="postlink">his repo</a>.<br>
<br>
Taking that a step further, I tried applying that information to PSO version 2 stages, and I finally got somewhere. My most recent attempt, which can be found <a href="https://github.com/seiche/Pso_Toolset/tree/master/rel_export/alpha" class="postlink">on github here</a>. Is finally able to export stage files from the game pretty accurately, admittedly while lacking textures at the moment. There's still more information I need to test, document, and fill in, I've just been catching up on some much needed sleep for the last couple of days.  <br>
<br>
Preview:<br>
<a href="http://i.imgur.com/KQpYG4t.png" class="postlink"><img src="http://i.imgur.com/KQpYG4tm.png" class="postimage" alt="Image"></a></div>

			
			
									
						<div id='list_thanks113917'>
	<div class="notice">
		<dl>
			
			<dt>These users thanked the author <a href="./memberlist.php?mode=viewprofile&u=45550.html" class="username">PsowKion</a> for the post (total 2):</dt>
			<dd><span title="Sun Dec 27, 2015 11:02 am"><a href="./memberlist.php?mode=viewprofile&u=41194.html" class="username">shakotay2</a></span>, <span title="Sun Dec 27, 2015 11:06 am"><a href="./memberlist.php?mode=viewprofile&u=31577.html" class="username">zaykho</a></span></dd>
		</dl>
	</div>
</div>
<div id='div_post_reput113917'>
	<div class="notice">
		<dl>
			<dt class="small"><strong>Rating:</strong>&nbsp;3.45%</dt>
			<dd>
						<div style="width: 150px; height: 15px;" class="thanks_reput_image_back"><div style="height: 15px; width: 3.45%;" class="thanks_reput_image"></div></div>&nbsp;
						</dd>
		</dl>
	</div>
</div>

										
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

				<div id="p113919" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile113919">
			<dt class="has-profile-rank has-avatar">
				<div class="avatar-container">
																<a href="./memberlist.php?mode=viewprofile&u=41194.html" class="avatar"><img class="avatar" src="./download/file.php?avatar=41194_1430129462.jpg" width="120" height="120" alt="User avatar" /></a>														</div>
								<a href="./memberlist.php?mode=viewprofile&u=41194.html" class="username">shakotay2</a>							</dt>

						<dd class="profile-rank">MEGAVETERAN<br /><img src="./images/ranks/vip-2.png" alt="MEGAVETERAN" title="MEGAVETERAN" /></dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=41194&amp;sr=posts">4291</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Fri Apr 20, 2012 9:24 am</dd>		
		
											<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Nexus, searching for Jim Kirk</dd>
							    <dd class="profile-posts" data-user-give-id="41194"><strong>Has&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/41194/true">1151 times</a></dd>
    <dd class="profile-posts" data-user-receive-id="41194"><strong>Been&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/41194/false">2244 times</a></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact shakotay2">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact shakotay2</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=113919" title="Send private message" class="last-cell">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content113919">

					<h3 >
						<a href="./viewtopic.php?p=113919#p113919">Re: Phantasy Star Online V2/BB - Map Extraction</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/113919/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=113919" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post113919' href="./viewtopic.php?f=16&amp;p=113919&amp;thanks=113919&amp;to_id=41194&amp;from_id=123876" title="Say Thanks to the author of the post: shakotay2"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=113919#p113919" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="./memberlist.php?mode=viewprofile&u=41194.html" class="username">shakotay2</a></strong> &raquo; </span><time datetime="2015-12-27T10:02:04+00:00">Sun Dec 27, 2015 11:02 am</time>
			</p>
			
			
			
			<div class="content">Keep up your nice work! <img class="smilies" src="./images/smilies/%5Bcolon%5D%29.gif" width="15" height="15" alt=":)" title="Smile"> <br>
I myself don't know about .xj and .nj model formats. Is this really needed?<br>
Why not use some more popular format? SMD, FBX, DAE whatever.
<blockquote><div><cite>PsowKion wrote:</cite>I turned to Kryslin's ExMLDNet and started working on .nj models to see if there were any hits that could help me fill in the holes I had for PSOBB maps and .xj models.</div></blockquote>The holes which are fixed by Noesis using face culling?<br>
<br>
ExMLDNet uses Visual Basic? Really? Well, ok, just another transformation hurdle to transform it to javascript. <img class="smilies" src="./images/smilies/%5Bcolon%5DD.gif" width="15" height="15" alt=":D" title="Very Happy"> <br>
<br>
Anyway, one of my next aims is to get familiar with Node.js.<br>
This one seems to be a good start:<br>
<a href="http://www.tutorialspoint.com/nodejs/" class="postlink">http://www.tutorialspoint.com/nodejs/</a><br>
which was my lucky first random hit on inet search.<br>
<br>
(Know a better one, maybe?)</div>

			
			
									
						<div id='list_thanks113919'>
	<div class="notice">
		<dl>
			
			<dt>These users thanked the author <a href="./memberlist.php?mode=viewprofile&u=41194.html" class="username">shakotay2</a> for the post: </dt>
			<dd><span title="Sun Dec 27, 2015 3:47 pm"><a href="./memberlist.php?mode=viewprofile&u=31577.html" class="username">zaykho</a></span></dd>
		</dl>
	</div>
</div>
<div id='div_post_reput113919'>
	<div class="notice">
		<dl>
			<dt class="small"><strong>Rating:</strong>&nbsp;1.72%</dt>
			<dd>
						<div style="width: 150px; height: 15px;" class="thanks_reput_image_back"><div style="height: 15px; width: 1.72%;" class="thanks_reput_image"></div></div>&nbsp;
						</dd>
		</dl>
	</div>
</div>

							<div id="sig113919" class="signature">Tuts: a) Bigchillghost, <a href="https://forum.xentax.com/viewtopic.php?f=29&amp;t=17889" class="postlink">viewtopic.php?f=29&amp;t=17889</a><br>
b) Extracting simple models: <a href="http://forum.xentax.com/viewtopic.php?f=29&amp;t=10894" class="postlink">http://forum.xentax.com/viewtopic.php?f=29&amp;t=10894</a><br>
"Quoting the whole thing. Would u ever stop this nonsense?"</div>			
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

				<div id="p113921" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile113921">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="./memberlist.php?mode=viewprofile&u=45550.html" class="username">PsowKion</a>							</dt>

						<dd class="profile-rank">ultra-n00b</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=45550&amp;sr=posts">6</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Wed Aug 13, 2014 1:10 pm</dd>		
		
						    <dd class="profile-posts" data-user-give-id="45550"><strong>Has&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/45550/true">5 times</a></dd>
    <dd class="profile-posts" data-user-receive-id="45550"><strong>Been&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/45550/false">10 times</a></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact PsowKion">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact PsowKion</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=113921" title="Send private message" class="last-cell">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content113921">

					<h3 >
						<a href="./viewtopic.php?p=113921#p113921">Re: Phantasy Star Online V2/BB - Map Extraction</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/113921/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=113921" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post113921' href="./viewtopic.php?f=16&amp;p=113921&amp;thanks=113921&amp;to_id=45550&amp;from_id=123876" title="Say Thanks to the author of the post: PsowKion"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=113921#p113921" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="./memberlist.php?mode=viewprofile&u=45550.html" class="username">PsowKion</a></strong> &raquo; </span><time datetime="2015-12-27T12:00:41+00:00">Sun Dec 27, 2015 1:00 pm</time>
			</p>
			
			
			
			<div class="content"><blockquote><div><cite>shakotay2 wrote:</cite>I myself don't know about .xj and .nj model formats. Is this really needed? Why not use some more popular format? SMD, FBX, DAE whatever.</div></blockquote>

For testing I've been exporting to .obj and would like to try writing a noesis plugin down the line once I get a better handle on the file formats and 3d in general. As for .nj, it's a "Ninja-Chunk Model" file format that Sega developed and used for Phantasy Star Online in the Dreamcast, and for a lot of other games. And .xj is a variation of that format which Sega used for Phantasy Star Online Blue Burst on the PC several years later. The stage files use these model formats internally to build scenes which make up parts of the stage.<br>

<blockquote class="uncited"><div>ExMLDNet uses Visual Basic? Really? Well, ok, just another transformation hurdle to transform it to javascript</div></blockquote>
I skipped over most of the details for textures, but I was able to port the important parts for how to parse the triangle strip, and the matrix functions needed to render the model correctly. Here's the code I ported for how to parse .nj models: <a href="https://github.com/seiche/Pso_Toolset/blob/master/nj_export/alpha/njcm.js" class="postlink">njcm.js</a>, and here's the code I ported for the matrix functions: <a href="https://github.com/seiche/Pso_Toolset/blob/master/nj_export/alpha/MatrixUtil.js" class="postlink">MatrixUtil.js</a>.<br>

<blockquote class="uncited"><div>The holes which are fixed by Noesis using face culling?</div></blockquote>
In this case I meant it figuratively. I can pretty much parse out all of the vertexes, normals, and triangle strips from the file format. Often they are intended to be double sided and fixed with culling. The "holes" that I meant were lapses in understanding like flags, or vertex alpha and other parts of the file which I'm able to read, don't completely understand what they do from the file definition. Mainly small things for flags on when to flip the UV or things like that.<br>

<blockquote class="uncited"><div>Anyway, one of my next aims is to get familiar with Node.js.</div></blockquote>
To be honest I just starting using Nodejs on a whim one day for this kind of thing and it ended out working pretty well. If you're looking at Nodejs tutorials, I think a lot of them are going to be server oriented. Here's a quick video I made for the how/why I use Nodejs: <a href="https://youtu.be/B4jZZeQxZtc" class="postlink">Youtube Link</a>. Personally I'm just using it for file I/O stuff in this case, so there's nothing too special about it beyond personal preference.</div>

			
			
									
						<div id='list_thanks113921'>
	<div class="notice">
		<dl>
			
			<dt>These users thanked the author <a href="./memberlist.php?mode=viewprofile&u=45550.html" class="username">PsowKion</a> for the post (total 2):</dt>
			<dd><span title="Sun Dec 27, 2015 3:47 pm"><a href="./memberlist.php?mode=viewprofile&u=31577.html" class="username">zaykho</a></span>, <span title="Sun Dec 27, 2015 11:09 pm"><a href="./memberlist.php?mode=viewprofile&u=41194.html" class="username">shakotay2</a></span></dd>
		</dl>
	</div>
</div>
<div id='div_post_reput113921'>
	<div class="notice">
		<dl>
			<dt class="small"><strong>Rating:</strong>&nbsp;3.45%</dt>
			<dd>
						<div style="width: 150px; height: 15px;" class="thanks_reput_image_back"><div style="height: 15px; width: 3.45%;" class="thanks_reput_image"></div></div>&nbsp;
						</dd>
		</dl>
	</div>
</div>

										
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	

	<div class="action-bar bar-bottom">
	
			<a href="./posting.php?mode=reply&amp;t=13689" class="button" title="Post a reply">
							<span>Post Reply</span> <i class="icon fa-reply fa-fw" aria-hidden="true"></i>
					</a>
		
		<div class="dropdown-container dropdown-button-control topic-tools">
		<span title="Topic tools" class="button button-secondary dropdown-trigger dropdown-select">
			<i class="icon fa-wrench fa-fw" aria-hidden="true"></i>
			<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
		</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
													<li>
						<a href="./viewtopic.php?uid=123876&amp;f=16&amp;t=13689&amp;watch=topic&amp;start=0&amp;hash=3ad5ae43" class="watch-topic-link" title="Subscribe topic" data-ajax="toggle_link" data-toggle-class="icon fa-square-o fa-fw" data-toggle-text="Unsubscribe topic" data-toggle-url="./viewtopic.php?uid=123876&amp;f=16&amp;t=13689&amp;unwatch=topic&amp;start=0&amp;hash=3ad5ae43" data-update-all=".watch-topic-link">
							<i class="icon fa-check-square-o fa-fw" aria-hidden="true"></i><span>Subscribe topic</span>
						</a>
					</li>
													<li>
						<a href="./viewtopic.php?t=13689&amp;bookmark=1&amp;hash=3ad5ae43" class="bookmark-link" title="Bookmark topic" data-ajax="alt_text" data-alt-text="Remove from bookmarks" data-update-all=".bookmark-link">
							<i class="icon fa-bookmark-o fa-fw" aria-hidden="true"></i><span>Bookmark topic</span>
						</a>
					</li>
																<li>
					<a href="./memberlist.php?mode=email&amp;t=13689" title="Email topic">
						<i class="icon fa-envelope-o fa-fw" aria-hidden="true"></i><span>Email topic</span>
					</a>
				</li>
												<li>
					<a href="./viewtopic.php?t=13689&amp;view=print" title="Print view" accesskey="p">
						<i class="icon fa-print fa-fw" aria-hidden="true"></i><span>Print view</span>
					</a>
				</li>
											</ul>
		</div>
	</div>

			<form method="post" action="./viewtopic.php?t=13689">
		<div class="dropdown-container dropdown-container-left dropdown-button-control sort-tools">
	<span title="Display and sorting options" class="button button-secondary dropdown-trigger dropdown-select">
		<i class="icon fa-sort-amount-asc fa-fw" aria-hidden="true"></i>
		<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
	</span>
	<div class="dropdown hidden">
		<div class="pointer"><div class="pointer-inner"></div></div>
		<div class="dropdown-contents">
			<fieldset class="display-options">
							<label>Display: <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select></label>
								<label>Sort by: <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select></label>
				<label>Direction: <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select></label>
								<hr class="dashed" />
				<input type="submit" class="button2" name="sort" value="Go" />
						</fieldset>
		</div>
	</div>
</div>
		</form>
	
	
	
			<div class="pagination">
			7 posts
							&bull; Page <strong>1</strong> of <strong>1</strong>
					</div>
	</div>


<div class="action-bar actions-jump">
		<p class="jumpbox-return">
		<a href="./viewforum.php?f=16" class="left-box arrow-left" accesskey="r">
			<i class="icon fa-angle-left fa-fw icon-black" aria-hidden="true"></i><span>Return to â€œ3D/2D modelsâ€</span>
		</a>
	</p>
	
		<div class="jumpbox dropdown-container dropdown-container-right dropdown-up dropdown-left dropdown-button-control" id="jumpbox">
			<span title="Jump to" class="button button-secondary dropdown-trigger dropdown-select">
				<span>Jump to</span>
				<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
			</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																				<li><a href="../Forums/26 - XeNTaX - General Discussion.html" class="jumpbox-cat-link"> <span> General Discussion</span></a></li>
																<li><a href="./viewforum.php?f=22" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Holy Cow!</span></a></li>
																<li><a href="./viewforum.php?f=40" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Game news</span></a></li>
																<li><a href="./viewforum.php?f=38" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Game Tech Tips</span></a></li>
																<li><a href="./viewforum.php?f=41" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Cool mods</span></a></li>
																<li><a href="./viewforum.php?f=28" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Website</span></a></li>
																<li><a href="./viewforum.php?f=24" class="jumpbox-cat-link"> <span> Game Modding</span></a></li>
																<li><a href="./viewforum.php?f=29" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Tutorials</span></a></li>
																<li><a href="./viewforum.php?f=16" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; 3D/2D models</span></a></li>
																<li><a href="./viewforum.php?f=17" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Audio file formats</span></a></li>
																<li><a href="./viewforum.php?f=18" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Graphic file formats</span></a></li>
																<li><a href="./viewforum.php?f=36" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Video file formats</span></a></li>
																<li><a href="./viewforum.php?f=10" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Game Archive</span></a></li>
																<li><a href="./viewforum.php?f=21" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Compressed files and methods</span></a></li>
																<li><a href="./viewforum.php?f=13" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Code Talk</span></a></li>
																<li><a href="./viewforum.php?f=35" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Game Localization</span></a></li>
																<li><a href="./viewforum.php?f=30" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Savegames</span></a></li>
																<li><a href="./viewforum.php?f=15" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Old posts</span></a></li>
																<li><a href="./viewforum.php?f=37" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Retro games</span></a></li>
																<li><a href="./viewforum.php?f=25" class="jumpbox-cat-link"> <span> MultiEx Commander</span></a></li>
																<li><a href="./viewforum.php?f=3" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; News</span></a></li>
																<li><a href="./viewforum.php?f=14" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Plugins</span></a></li>
																<li><a href="./viewforum.php?f=9" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Troubleshooting</span></a></li>
																<li><a href="./viewforum.php?f=11" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Miscellaneous</span></a></li>
																<li><a href="./viewforum.php?f=31" class="jumpbox-cat-link"> <span> Tools &amp; Programs</span></a></li>
																<li><a href="./viewforum.php?f=32" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Game specific tools</span></a></li>
																<li><a href="./viewforum.php?f=33" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; General game tools</span></a></li>
											</ul>
		</div>
	</div>

	</div>


	<div class="stat-block online-list">
		<h3><a href="./viewonline.php">Who is online</a></h3>
		<p>Users browsing this forum: <span style="color: #9E8DA7;" class="username-coloured">Bing [Bot]</span>, <a href="./memberlist.php?mode=viewprofile&u=123876.html" class="username">escape209</a> and 5 guests</p>
	</div>

			</div>


<div id="page-footer" class="page-footer" role="contentinfo">
	<div class="navbar" role="navigation">
	<div class="inner">

	<ul id="nav-footer" class="nav-footer linklist" role="menubar">
		<li class="breadcrumbs">
									<span class="crumb"><a href="./index.php" data-navbar-reference="index"><i class="icon fa-home fa-fw" aria-hidden="true"></i><span>Board index</span></a></span>					</li>
		
				<li class="rightside">All times are <span title="UTC+1">UTC+01:00</span></li>
							<li class="rightside">
				<a href="./ucp.php?mode=delete_cookies" data-ajax="true" data-refresh="true" role="menuitem">
					<i class="icon fa-trash fa-fw" aria-hidden="true"></i><span>Delete cookies</span>
				</a>
			</li>
							<li class="rightside" data-last-responsive="true">
					<a href="./memberlist.php" title="View complete list of members" role="menuitem">
						<i class="icon fa-group fa-fw" aria-hidden="true"></i><span>Members</span>
					</a>
				</li>
												<li class="rightside" data-last-responsive="true">
				<a href="./memberlist.php?mode=team" role="menuitem">
					<i class="icon fa-shield fa-fw" aria-hidden="true"></i><span>The team</span>
				</a>
			</li>
							</ul>

	</div>
</div>

	<div class="copyright">
				<p class="footer-row">
			<span class="footer-copyright">Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited</span>
		</p>
						<p class="footer-row" role="menu">
			<a class="footer-link" href="./ucp.php?mode=privacy" title="Privacy" role="menuitem">
				<span class="footer-link-text">Privacy</span>
			</a>
			|
			<a class="footer-link" href="./ucp.php?mode=terms" title="Terms" role="menuitem">
				<span class="footer-link-text">Terms</span>
			</a>
		</p>
					</div>

	<div id="darkenwrapper" class="darkenwrapper" data-ajax-error-title="AJAX error" data-ajax-error-text="Something went wrong when processing your request." data-ajax-error-text-abort="User aborted request." data-ajax-error-text-timeout="Your request timed out; please try again." data-ajax-error-text-parsererror="Something went wrong with the request and the server returned an invalid reply.">
		<div id="darken" class="darken">&nbsp;</div>
	</div>

	<div id="phpbb_alert" class="phpbb_alert" data-l-err="Error" data-l-timeout-processing-req="Request timed out.">
		<a href="#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
		<h3 class="alert_title">&nbsp;</h3><p class="alert_text"></p>
	</div>
	<div id="phpbb_confirm" class="phpbb_alert">
		<a href="#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
		<div class="alert_text"></div>
	</div>
</div>

</div>

<div>
	<a id="bottom" class="anchor" accesskey="z"></a>
	</div>

<script src="./assets/javascript/jquery-3.6.0.min.js?assets_version=11"></script>
<script src="./assets/javascript/core.js?assets_version=11"></script>


<script type="text/javascript">
(function($) {  // Avoid conflicts with other libraries

'use strict';
	
	phpbb.addAjaxCallback('reporttosfs', function(data) {
		if (data.postid !== "undefined") {
			$('#sfs' + data.postid).hide();
			phpbb.closeDarkenWrapper(5000);
		}
	});

})(jQuery);
</script>
<script src="./ext/phpbb/boardannouncements/styles/all/template/js/boardannouncements.js?assets_version=11"></script>
<script src="./styles/prosilver/template/forum_fn.js?assets_version=11"></script>
<script src="./styles/prosilver/template/ajax.js?assets_version=11"></script>



</body>
</html>
