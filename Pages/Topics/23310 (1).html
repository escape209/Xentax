<!DOCTYPE html>
<html dir="ltr" lang="en-gb">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>Help with The Godfather II .str files - Page 2 - XeNTaX</title>


	<link rel="canonical" href="https://forum.xentax.com/viewtopic.php?t=23310&amp;start=15">

<!--
	phpBB style name: prosilver
	Based on style:   prosilver (this is the default phpBB3 style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by:
-->

<link href="./assets/css/font-awesome.min.css?assets_version=11" rel="stylesheet">
<link href="./styles/prosilver/theme/stylesheet.css?assets_version=11" rel="stylesheet">
<link href="./styles/prosilver/theme/en/stylesheet.css?assets_version=11" rel="stylesheet">




<!--[if lte IE 9]>
	<link href="./styles/prosilver/theme/tweaks.css?assets_version=11" rel="stylesheet">
<![endif]-->


<link href="./ext/gfksx/thanksforposts/styles/prosilver/theme/thanks.css?assets_version=11" rel="stylesheet" media="screen" />
<link href="./ext/hifikabin/headerbanner/styles/prosilver/theme/headerbanner.css?assets_version=11" rel="stylesheet" media="screen" />
<link href="./ext/hifikabin/headerbanner/styles/prosilver/theme/headerbanner_background.css?assets_version=11" rel="stylesheet" media="screen" />
<link href="./ext/phpbb/boardannouncements/styles/all/theme/boardannouncements.css?assets_version=11" rel="stylesheet" media="screen" />



</head>
<body id="phpbb" class="nojs notouch section-viewtopic ltr ">


<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>
	<div id="page-header">
		<div class="headerbar" role="banner">
					<div class="inner">

			<div id="site-description" class="site-description">
		<a id="logo" class="logo" href="./index.php" title="Board index">
					<span class="site_logo"></span>
				</a>
				<h1>XeNTaX</h1>
				<p>Game Research Forum</p>
				<p class="skiplink"><a href="#start_here">Skip to content</a></p>
			</div>

									<div class="banner-header">
	<div style="position:absolute; z-index:-100;">
	<h1>XeNTaX</h1>
	<p>Game Research Forum</p>
	<p class="skiplink"><a href="#start_here">Skip to content</a></p>
</div>
<div class="header-banner">
	<a href="./index.php" title="Board index"><img class="header-banner" style="border-radius:0px; width:1500px;" src="http://forum.xentax.com/images/gameresforum_logo_1.png" alt="Board index" ></a>
</div>
</div>

			</div>
					</div>
				<div class="navbar" role="navigation">
	<div class="inner">

	<ul id="nav-main" class="nav-main linklist" role="menubar">

		<li id="quick-links" class="quick-links dropdown-container responsive-menu" data-skip-responsive="true">
			<a href="#" class="dropdown-trigger">
				<i class="icon fa-bars fa-fw" aria-hidden="true"></i><span>Quick links</span>
			</a>
			<div class="dropdown">
				<div class="pointer"><div class="pointer-inner"></div></div>
				<ul class="dropdown-contents" role="menu">
					
											<li class="separator"></li>
													<li>
								<a href="./search.php?search_id=egosearch" role="menuitem">
									<i class="icon fa-file-o fa-fw icon-gray" aria-hidden="true"></i><span>Your posts</span>
								</a>
							</li>
																			<li>
								<a href="./search.php?search_id=newposts" role="menuitem">
									<i class="icon fa-file-o fa-fw icon-red" aria-hidden="true"></i><span>New posts</span>
								</a>
							</li>
																			<li>
								<a href="./search.php?search_id=unreadposts" role="menuitem">
									<i class="icon fa-file-o fa-fw icon-red" aria-hidden="true"></i><span>Unread posts</span>
								</a>
							</li>
													<li>
								<a href="./search.php?search_id=unanswered" role="menuitem">
									<i class="icon fa-file-o fa-fw icon-gray" aria-hidden="true"></i><span>Unanswered topics</span>
								</a>
							</li>
							<li>
								<a href="./search.php?search_id=active_topics" role="menuitem">
									<i class="icon fa-file-o fa-fw icon-blue" aria-hidden="true"></i><span>Active topics</span>
								</a>
							</li>
							<li class="separator"></li>
							<li>
								<a href="./search.php" role="menuitem">
									<i class="icon fa-search fa-fw" aria-hidden="true"></i><span>Search</span>
								</a>
							</li>
					
											<li class="separator"></li>
													<li>
								<a href="./memberlist.php" role="menuitem">
									<i class="icon fa-group fa-fw" aria-hidden="true"></i><span>Members</span>
								</a>
							</li>
																			<li>
								<a href="./memberlist.php?mode=team" role="menuitem">
									<i class="icon fa-shield fa-fw" aria-hidden="true"></i><span>The team</span>
								</a>
							</li>
																<li class="separator"></li>

						<li>
		<a href="/app.php/toplist"  role="menuitem">
			<i class="icon fa-star-o fa-fw" aria-hidden="true"></i><span>Posts toplist</span>
		</a>
	</li>
	<li>
		<a href="/app.php/thankslist"  role="menuitem">
			<i class="icon fa-thumbs-o-up fa-fw" aria-hidden="true"></i><span>Thanks list</span>
		</a>
	</li>
				</ul>
			</div>
		</li>

				<li data-last-responsive="true">
			<a href="/app.php/help/faq" rel="help" title="Frequently Asked Questions" role="menuitem">
				<i class="icon fa-question-circle fa-fw" aria-hidden="true"></i><span>FAQ</span>
			</a>
		</li>
						
					<li id="username_logged_in" class="rightside " data-skip-responsive="true">
						<div class="header-profile dropdown-container">
				<a href="./ucp.php" class="header-avatar dropdown-trigger"> <span class="username">escape209</span></a>
				<div class="dropdown">
					<div class="pointer"><div class="pointer-inner"></div></div>
					<ul class="dropdown-contents" role="menu">
						
					
						<li>
							<a href="./ucp.php" title="User Control Panel" role="menuitem">
								<i class="icon fa-sliders fa-fw" aria-hidden="true"></i><span>User Control Panel</span>
							</a>
						</li>
													<li>
								<a href="./memberlist.php?mode=viewprofile&u=123876.html" title="Profile" role="menuitem">
									<i class="icon fa-user fa-fw" aria-hidden="true"></i><span>Profile</span>
								</a>
							</li>
						
						
						<li class="separator"></li>
						<li>
							<a href="./ucp.php?mode=logout&amp;sid=959ea14a0771cc2de19d1bba114b7679" title="Logout" accesskey="x" role="menuitem">
								<i class="icon fa-power-off fa-fw" aria-hidden="true"></i><span>Logout</span>
							</a>
						</li>
					</ul>
				</div>
			</div>
					</li>
					<li class="rightside" data-skip-responsive="true">
				<a href="./ucp.php?i=pm&amp;folder=inbox" role="menuitem">
					<i class="icon fa-inbox fa-fw" aria-hidden="true"></i><span>Private messages </span><strong class="badge hidden">0</strong>
				</a>
			</li>
							<li class="dropdown-container dropdown-right rightside" data-skip-responsive="true">
				<a href="./ucp.php?i=ucp_notifications" id="notification_list_button" class="dropdown-trigger">
					<i class="icon fa-bell fa-fw" aria-hidden="true"></i><span>Notifications </span><strong class="badge hidden">0</strong>
				</a>
				<div id="notification_list" class="dropdown dropdown-extended notification_list">
	<div class="pointer"><div class="pointer-inner"></div></div>
	<div class="dropdown-contents">
		<div class="header">
			Notifications
			<span class="header_settings">
				<a href="./ucp.php?i=ucp_notifications&amp;mode=notification_options">Settings</a>
							</span>
		</div>

		<ul>
							<li class="no_notifications">
					You have no notifications
				</li>
								</ul>

		<div class="footer">
			<a href="./ucp.php?i=ucp_notifications"><span>See All</span></a>
		</div>
	</div>
</div>
			</li>
						</ul>

	<ul id="nav-breadcrumbs" class="nav-breadcrumbs linklist navlinks" role="menubar">
				
		
		<li class="breadcrumbs" itemscope itemtype="https://schema.org/BreadcrumbList">

			
							<span class="crumb" itemtype="https://schema.org/ListItem" itemprop="itemListElement" itemscope><a itemprop="item" href="./index.php" accesskey="h" data-navbar-reference="index"><i class="icon fa-home fa-fw"></i><span itemprop="name">Board index</span></a><meta itemprop="position" content="1" /></span>

											
								<span class="crumb" itemtype="https://schema.org/ListItem" itemprop="itemListElement" itemscope data-forum-id="24"><a itemprop="item" href="./viewforum.php?f=24"><span itemprop="name">Game Modding</span></a><meta itemprop="position" content="2" /></span>
															
								<span class="crumb" itemtype="https://schema.org/ListItem" itemprop="itemListElement" itemscope data-forum-id="35"><a itemprop="item" href="./viewforum.php?f=35"><span itemprop="name">Game Localization</span></a><meta itemprop="position" content="3" /></span>
							
					</li>

		<li class="rightside responsive-search">
	<a href="./search.php" title="View the advanced search options" role="menuitem">
	<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
	</a>
</li>

			</ul>

	</div>
</div>
	</div>

	
	<a id="start_here" class="anchor"></a>
	<div id="page-body" class="page-body" role="main">
		
					<div id="phpbb_announcement" style="background-color:#d9efff">
				<div><strong class="text-strong"><span style="color:#00BF00"><span style="font-size:120%;line-height:116%">Important information: this site is currently <a href="https://forum.xentax.com/viewtopic.php?t=27281" class="postlink">scheduled to go offline indefinitely</a> by end of the year. </span></span></strong></div>
	</div>

<h2 class="topic-title"><a href="./viewtopic.php?t=23310&amp;start=15">Help with The Godfather II .str files</a></h2>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body -->
<div style="display: none !important;">Need help translating games in other languages? Have your language problems solved here.<br /></div>


<div class="action-bar bar-top">
	
			<a href="./posting.php?mode=reply&amp;t=23310" class="button" title="Post a reply">
							<span>Post Reply</span> <i class="icon fa-reply fa-fw" aria-hidden="true"></i>
					</a>
	
			<div class="dropdown-container dropdown-button-control topic-tools">
		<span title="Topic tools" class="button button-secondary dropdown-trigger dropdown-select">
			<i class="icon fa-wrench fa-fw" aria-hidden="true"></i>
			<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
		</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
													<li>
						<a href="./viewtopic.php?uid=123876&amp;f=35&amp;t=23310&amp;watch=topic&amp;start=15&amp;hash=5a3a11b5" class="watch-topic-link" title="Subscribe topic" data-ajax="toggle_link" data-toggle-class="icon fa-square-o fa-fw" data-toggle-text="Unsubscribe topic" data-toggle-url="./viewtopic.php?uid=123876&amp;f=35&amp;t=23310&amp;unwatch=topic&amp;start=15&amp;hash=5a3a11b5" data-update-all=".watch-topic-link">
							<i class="icon fa-check-square-o fa-fw" aria-hidden="true"></i><span>Subscribe topic</span>
						</a>
					</li>
													<li>
						<a href="./viewtopic.php?t=23310&amp;start=15&amp;bookmark=1&amp;hash=5a3a11b5" class="bookmark-link" title="Bookmark topic" data-ajax="alt_text" data-alt-text="Remove from bookmarks" data-update-all=".bookmark-link">
							<i class="icon fa-bookmark-o fa-fw" aria-hidden="true"></i><span>Bookmark topic</span>
						</a>
					</li>
																<li>
					<a href="./memberlist.php?mode=email&amp;t=23310" title="Email topic">
						<i class="icon fa-envelope-o fa-fw" aria-hidden="true"></i><span>Email topic</span>
					</a>
				</li>
												<li>
					<a href="./viewtopic.php?t=23310&amp;start=15&amp;view=print" title="Print view" accesskey="p">
						<i class="icon fa-print fa-fw" aria-hidden="true"></i><span>Print view</span>
					</a>
				</li>
											</ul>
		</div>
	</div>
	
			<div class="search-box" role="search">
			<form method="get" id="topic-search" action="./search.php">
			<fieldset>
				<input class="inputbox search tiny"  type="search" name="keywords" id="search_keywords" size="20" placeholder="Search this topic…" />
				<button class="button button-search" type="submit" title="Search">
					<i class="icon fa-search fa-fw" aria-hidden="true"></i><span class="sr-only">Search</span>
				</button>
				<a href="./search.php" class="button button-search-end" title="Advanced search">
					<i class="icon fa-cog fa-fw" aria-hidden="true"></i><span class="sr-only">Advanced search</span>
				</a>
				<input type="hidden" name="t" value="23310" />
<input type="hidden" name="sf" value="msgonly" />

			</fieldset>
			</form>
		</div>
	
			<div class="pagination">
			43 posts
							<ul>
			<li class="arrow previous"><a class="button button-icon-only" href="./23310.html" rel="prev" role="button"><i class="icon fa-chevron-left fa-fw" aria-hidden="true"></i><span class="sr-only">Previous</span></a></li>
				<li><a class="button" href="./23310.html" role="button">1</a></li>
			<li class="active"><span>2</span></li>
				<li><a class="button" href="./viewtopic.php?t=23310&amp;start=30" role="button">3</a></li>
				<li class="arrow next"><a class="button button-icon-only" href="./viewtopic.php?t=23310&amp;start=30" rel="next" role="button"><i class="icon fa-chevron-right fa-fw" aria-hidden="true"></i><span class="sr-only">Next</span></a></li>
	</ul>
					</div>
		</div>




			<div id="p170820" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile170820">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="./memberlist.php?mode=viewprofile&u=82288.html" class="username">venixuc</a>							</dt>

						<dd class="profile-rank">beginner</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=82288&amp;sr=posts">23</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Tue Aug 13, 2019 3:00 am</dd>		
		
						    <dd class="profile-posts" data-user-give-id="82288"><strong>Has&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/82288/true">2 times</a></dd>
    <dd class="profile-posts" data-user-receive-id="82288"><strong>Been&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/82288/false">1 time</a></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact venixuc">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact venixuc</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=170820" title="Send private message" class="last-cell">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content170820">

					<h3 class="first">
						<a href="./viewtopic.php?p=170820#p170820">Re: Help with The Godfather II .str files</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/170820/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=170820" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post170820' href="./viewtopic.php?f=35&amp;p=170820&amp;thanks=170820&amp;to_id=82288&amp;from_id=123876" title="Say Thanks to the author of the post: venixuc"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=170820#p170820" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="./memberlist.php?mode=viewprofile&u=82288.html" class="username">venixuc</a></strong> &raquo; </span><time datetime="2021-01-26T02:21:28+00:00">Tue Jan 26, 2021 3:21 am</time>
			</p>
			
			
			
			<div class="content"><blockquote class="uncited"><div>Delete 4 bytes from the beginning of NAM_1.dat and you will be able to decompress it.</div></blockquote>
You are right. This makes is possible to decompress the file and it looks exactly like kapR. It means that GE only reads the file after those 4 bytes, and nothing else; this finding makes GE obsolete.<br>
<br>
This script, written by aluigi, extracts only decompressed NAM_1.dat from .str (the file has the same name as the .str archive - dac49de4 in this case):
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>comtype dk2
goto 0x34
get SIZE long
goto 0x44
get ZSIZE long
savepos OFFSET
get NAME basename
clog NAME OFFSET ZSIZE SIZE</code></pre></div>
The decompressed file is the same as kapR, but the script doesn't compress it back.<br>
<br>
The decompressed NAM_1 (and/or kapR) starts with 4C 43 48 32 (LCH2). The compressed one extracted from .str has B8 FF 01 00 10 FB 03 65 DF E2 (¸˙...ű.eßâ) before this string, and it cannot be decompressed without removing B8 FF 01 00. <br>
Using dk2 as comtype parameter in bms script for decompression makes the data fully readable; xrefpack gives an error "the uncompressed data is bigger than the allocated buffer"; and ct_refpack crashes QuickBMS.<br>
 <br>
The compression results are different. For example, <strong class="text-strong">"Skarsvaag"</strong> string is compressed as <strong class="text-strong">"Skŕvaag"</strong> in the original file and as <strong class="text-strong">"Sűkŕvaag"</strong> in dk2 or ct_refpack comtype script; the strings before LCH2 are also different - <strong class="text-strong">BC FF 01 00 E0 10 FB 01 FF 06 05 BC E0 FB 0A 05 BC FB FB E4 B8 FF 01 00 10 FB 03 65 DF E2 (Ľ˙..ŕ.ű.˙..Ľŕű..Ľűűä¸˙...ű.eßâ)</strong> for ct_refpack and <strong class="text-strong">10 FB 01 FF BC E4 BC FF 01 00 E0 10 FB 01 FF 06 05 BC E0 FB 0A 05 BC FB FB E4 01 13 B8 FB 10 FB 03 65 DF E2 (.ű.˙ĽäĽ˙..ŕ.ű.˙..Ľŕű..Ľűűä..¸ű.ű.eßâ)</strong> for dk2. Using xrefpack for compression gives an error "unsupported compression -1 in reimport mode". The B8 FF 01 00 part is present only in ct_refpack compression.<br>
<br>
The data compression for dk2 and ct_refpack is similar, and the "gap" from 0001b3c0 to 0001ffbc is present for both comtypes. The last byte in the original file is at offset 0001ffbb, and it's part of compressed data. <br>
<br>
An important question is: are dk2, ct_refpack and xrefpack the only refpack comtypes?</div>

			
			
									
						<div id='list_thanks170820'>
</div>
<div id='div_post_reput170820'>
</div>

										
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

				<div id="p170825" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile170825">
			<dt class="has-profile-rank has-avatar">
				<div class="avatar-container">
																<a href="./memberlist.php?mode=viewprofile&u=43476.html" class="avatar"><img class="avatar" src="./download/file.php?avatar=43476_1450396086.png" width="80" height="80" alt="User avatar" /></a>														</div>
								<a href="./memberlist.php?mode=viewprofile&u=43476.html" style="color: #00AA00;" class="username-coloured">ikskoks</a>							</dt>

						<dd class="profile-rank">Moderator</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=43476&amp;sr=posts">1668</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Thu Jul 26, 2012 5:06 pm</dd>		
		
																<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Poland, Łódź</dd>
							    <dd class="profile-posts" data-user-give-id="43476"><strong>Has&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/43476/true">648 times</a></dd>
    <dd class="profile-posts" data-user-receive-id="43476"><strong>Been&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/43476/false">432 times</a></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact ikskoks">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact ikskoks</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=170825" title="Send private message">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																																																<a href="http://ikskoks.pl/" title="Website" class="last-cell">
										<span class="contact-icon phpbb_website-icon">Website</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content170825">

					<h3 >
						<a href="./viewtopic.php?p=170825#p170825">Re: Help with The Godfather II .str files</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/170825/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=170825" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post170825' href="./viewtopic.php?f=35&amp;p=170825&amp;thanks=170825&amp;to_id=43476&amp;from_id=123876" title="Say Thanks to the author of the post: ikskoks"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=170825#p170825" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="./memberlist.php?mode=viewprofile&u=43476.html" style="color: #00AA00;" class="username-coloured">ikskoks</a></strong> &raquo; </span><time datetime="2021-01-26T11:00:15+00:00">Tue Jan 26, 2021 12:00 pm</time>
			</p>
			
			
			
			<div class="content">So it seems that the only problem you may have now with packing is making compressed file smaller or equal original to be able to replace it in archive.<br>
I think that I have solved that issue, explanation below.<br>
<br>
I have checked refpack-brute-force once again and it seems that it works fine, but the author didn't attach any progress tracking,<br>
so both of us probably thought that tool is broken. <img class="smilies" src="./images/smilies/%5Bcolon%5DD.gif" width="15" height="15" alt=":D" title="Very Happy"><br>
I made some minor changes to the source and now progress can be tracked <a href="https://i.imgur.com/tjnFxeO.png" class="postlink">https://i.imgur.com/tjnFxeO.png</a><br>
It will take some time (like 5-10 minutes), but it works and it will output file smaller than orginal. <a href="https://i.imgur.com/bRxydAa.png" class="postlink">https://i.imgur.com/bRxydAa.png</a><br>
<br>
If you need this new file to match original size (131 000), just fill the file with zeroes at the end and that should do the trick.<br>
<br>
Updated refpack-brute-force code is in the attachment with compiled executable ready to use.</div>

			
							<dl class="attachbox">
					<dt>
						Attachments
					</dt>
											<dd>
			
		
		
				<dl class="file">
			<dt><span class="imageset icon_topic_attach"></span> <a class="postlink" href="./download/file.php?id=19398">refpack-brute-force.zip</a></dt>
						<dd>(57.26 KiB) Downloaded 16 times</dd>
		</dl>
		
			</dd>
									</dl>
			
									
						<div id='list_thanks170825'>
	<div class="notice">
		<dl>
			
			<dt>These users thanked the author <a href="./memberlist.php?mode=viewprofile&u=43476.html" style="color: #00AA00;" class="username-coloured">ikskoks</a> for the post: </dt>
			<dd><span title="Wed Jan 27, 2021 2:40 am"><a href="./memberlist.php?mode=viewprofile&u=82288.html" class="username">venixuc</a></span></dd>
		</dl>
	</div>
</div>
<div id='div_post_reput170825'>
	<div class="notice">
		<dl>
			<dt class="small"><strong>Rating:</strong>&nbsp;1.72%</dt>
			<dd>
						<div style="width: 150px; height: 15px;" class="thanks_reput_image_back"><div style="height: 15px; width: 1.72%;" class="thanks_reput_image"></div></div>&nbsp;
						</dd>
		</dl>
	</div>
</div>

							<div id="sig170825" class="signature"><a href="http://ikskoks.pl/" class="postlink">http://ikskoks.pl/</a><br>
<a href="https://www.facebook.com/ikskoks" class="postlink">https://www.facebook.com/ikskoks</a><br>
<img src="http://i.iplsc.com/flaga-polski/000540UYV3RNYWMH-C122-F4.gif" class="postimage" alt="Image"></div>			
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

				<div id="p170832" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile170832">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="./memberlist.php?mode=viewprofile&u=82288.html" class="username">venixuc</a>							</dt>

						<dd class="profile-rank">beginner</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=82288&amp;sr=posts">23</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Tue Aug 13, 2019 3:00 am</dd>		
		
						    <dd class="profile-posts" data-user-give-id="82288"><strong>Has&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/82288/true">2 times</a></dd>
    <dd class="profile-posts" data-user-receive-id="82288"><strong>Been&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/82288/false">1 time</a></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact venixuc">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact venixuc</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=170832" title="Send private message" class="last-cell">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content170832">

					<h3 >
						<a href="./viewtopic.php?p=170832#p170832">Re: Help with The Godfather II .str files</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/170832/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=170832" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post170832' href="./viewtopic.php?f=35&amp;p=170832&amp;thanks=170832&amp;to_id=82288&amp;from_id=123876" title="Say Thanks to the author of the post: venixuc"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=170832#p170832" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="./memberlist.php?mode=viewprofile&u=82288.html" class="username">venixuc</a></strong> &raquo; </span><time datetime="2021-01-27T01:12:32+00:00">Wed Jan 27, 2021 2:12 am</time>
			</p>
			
			
			
			<div class="content"><blockquote class="uncited"><div>Updated refpack-brute-force code is in the attachment with compiled executable ready to use.</div></blockquote>

This one works! But it takes some extra steps to avoid game crashing. <br>
<br>
The only way to reimport modified kapR into the .str is by using dead_space_3.bms script. This script, however, reads the NAM_1.dat inside the archive from B8 FF 01 00; the file compressed with refpack-brute-force doesn't have this. <br>
<br>
Inside the .str, the content from 00000040 to 0000004F is 6B 61 70 52 B8 FF 01 00 10 FB 03 65 DF E2 4C 43 (kapR¸˙...ű.eßâLC). After using dead_space_3.bms to reimport the kapR compressed with refpack-brute-force, the "B8 FF 01 00" is overwritten, and 4 extra zerobytes are added at the end, before "COHSÔ...TADSbal Borbon" string at the beginning of NAM_2.bal. <br>
<br>
This crashes the game. But the workaround is simple. It's necessary to add those 4 bytes manually between 6B 61 70 52 and 10 FB 03 65, and remove 4 zerobytes at the end. Then it fully works, the game doesn't crash and the text in game is displayed properly.<br>
<br>
This wraps up the compression; now, it's possible to edit text and test the results.<br>
<br>
Just one thing remains. How to find the string pointer inside decompressed kapR? The first text string is "1", followed by "Specs", then "Choose a hand accessory style", and so on. The first pointers are 88 1B, 8A 1B and 90 1B. <br>
<br>
But, the names are located relatively far from those first strings. The <span style="text-decoration:underline"><strong class="text-strong">Specs</strong></span> string starts at 00011B8A, while <span style="text-decoration:underline"><strong class="text-strong">"Big Greenie" Grinberg</strong></span> starts at 00018363 (viewed with HxD).<br>
<br>
So, how to find a pointer of "Big Greenie" Grinberg string?</div>

			
			
									
						<div id='list_thanks170832'>
</div>
<div id='div_post_reput170832'>
</div>

										
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

				<div id="p170854" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile170854">
			<dt class="has-profile-rank has-avatar">
				<div class="avatar-container">
																<a href="./memberlist.php?mode=viewprofile&u=43476.html" class="avatar"><img class="avatar" src="./download/file.php?avatar=43476_1450396086.png" width="80" height="80" alt="User avatar" /></a>														</div>
								<a href="./memberlist.php?mode=viewprofile&u=43476.html" style="color: #00AA00;" class="username-coloured">ikskoks</a>							</dt>

						<dd class="profile-rank">Moderator</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=43476&amp;sr=posts">1668</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Thu Jul 26, 2012 5:06 pm</dd>		
		
																<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Poland, Łódź</dd>
							    <dd class="profile-posts" data-user-give-id="43476"><strong>Has&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/43476/true">648 times</a></dd>
    <dd class="profile-posts" data-user-receive-id="43476"><strong>Been&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/43476/false">432 times</a></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact ikskoks">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact ikskoks</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=170854" title="Send private message">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																																																<a href="http://ikskoks.pl/" title="Website" class="last-cell">
										<span class="contact-icon phpbb_website-icon">Website</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content170854">

					<h3 >
						<a href="./viewtopic.php?p=170854#p170854">Re: Help with The Godfather II .str files</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/170854/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=170854" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post170854' href="./viewtopic.php?f=35&amp;p=170854&amp;thanks=170854&amp;to_id=43476&amp;from_id=123876" title="Say Thanks to the author of the post: ikskoks"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=170854#p170854" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="./memberlist.php?mode=viewprofile&u=43476.html" style="color: #00AA00;" class="username-coloured">ikskoks</a></strong> &raquo; </span><time datetime="2021-01-27T15:29:20+00:00">Wed Jan 27, 2021 4:29 pm</time>
			</p>
			
			
			
			<div class="content"><blockquote class="uncited"><div>This wraps up the compression; now, it's possible to edit text and test the results.</div></blockquote>
Great!<br>
<br>

<blockquote class="uncited"><div>So, how to find a pointer of "Big Greenie" Grinberg string?</div></blockquote>
I have created a text exporter that will make it easier for you.<br>
It outputs data in four columns - ID, pointer offset, text offset and text.<br>
<a href="https://github.com/bartlomiejduda/Tools/blob/master/NEW%20Tools/The%20Godfather/TheGodfather_text_Tool.py" class="postlink">https://github.com/bartlomiejduda/Tools ... xt_Tool.py</a><br>
<br>
So for example pointer for text "Big Greenie" Grinberg is at offset 41196.<br>
<a href="https://i.imgur.com/S92tDGd.png" class="postlink">https://i.imgur.com/S92tDGd.png</a></div>

			
			
									
						<div id='list_thanks170854'>
	<div class="notice">
		<dl>
			
			<dt>These users thanked the author <a href="./memberlist.php?mode=viewprofile&u=43476.html" style="color: #00AA00;" class="username-coloured">ikskoks</a> for the post: </dt>
			<dd><span title="Thu Jan 28, 2021 1:36 am"><a href="./memberlist.php?mode=viewprofile&u=82288.html" class="username">venixuc</a></span></dd>
		</dl>
	</div>
</div>
<div id='div_post_reput170854'>
	<div class="notice">
		<dl>
			<dt class="small"><strong>Rating:</strong>&nbsp;1.72%</dt>
			<dd>
						<div style="width: 150px; height: 15px;" class="thanks_reput_image_back"><div style="height: 15px; width: 1.72%;" class="thanks_reput_image"></div></div>&nbsp;
						</dd>
		</dl>
	</div>
</div>

							<div id="sig170854" class="signature"><a href="http://ikskoks.pl/" class="postlink">http://ikskoks.pl/</a><br>
<a href="https://www.facebook.com/ikskoks" class="postlink">https://www.facebook.com/ikskoks</a><br>
<img src="http://i.iplsc.com/flaga-polski/000540UYV3RNYWMH-C122-F4.gif" class="postimage" alt="Image"></div>			
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

				<div id="p170875" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile170875">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="./memberlist.php?mode=viewprofile&u=82288.html" class="username">venixuc</a>							</dt>

						<dd class="profile-rank">beginner</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=82288&amp;sr=posts">23</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Tue Aug 13, 2019 3:00 am</dd>		
		
						    <dd class="profile-posts" data-user-give-id="82288"><strong>Has&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/82288/true">2 times</a></dd>
    <dd class="profile-posts" data-user-receive-id="82288"><strong>Been&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/82288/false">1 time</a></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact venixuc">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact venixuc</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=170875" title="Send private message" class="last-cell">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content170875">

					<h3 >
						<a href="./viewtopic.php?p=170875#p170875">Re: Help with The Godfather II .str files</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/170875/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=170875" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post170875' href="./viewtopic.php?f=35&amp;p=170875&amp;thanks=170875&amp;to_id=82288&amp;from_id=123876" title="Say Thanks to the author of the post: venixuc"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=170875#p170875" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="./memberlist.php?mode=viewprofile&u=82288.html" class="username">venixuc</a></strong> &raquo; </span><time datetime="2021-01-28T01:38:53+00:00">Thu Jan 28, 2021 2:38 am</time>
			</p>
			
			
			
			<div class="content"><blockquote class="uncited"><div>I have created a text exporter that will make it easier for you.<br>
It outputs data in four columns - ID, pointer offset, text offset and text.<br>
<a href="https://github.com/bartlomiejduda/Tools" class="postlink">https://github.com/bartlomiejduda/Tools</a> ... xt_Tool.py</div></blockquote>

This one is great. It's basically vital for finding pointers.<br>
<br>
Now, in one of your earlier posts, you wrote:
<blockquote class="uncited"><div>As for pointers, I have explained it with screenshots earlier<br>
<a href="https://i.imgur.com/poy87uD.png" class="postlink">https://i.imgur.com/poy87uD.png</a><br>
<a href="https://i.imgur.com/5glpvrs.png" class="postlink">https://i.imgur.com/5glpvrs.png</a><br>
<br>
You only need to change values. For example you have "Specs" word with pointer 7050.<br>
When you change it to 7052, game will read this as "ecs".<br>
But ot will give you of course 2 extra characters to use in the previous string.</div></blockquote>

Here are screenshots of "Big Greenie" Grinberg pointer, at offset 0000A0EC (value 63 83):<br>
<br>
<a href="https://ibb.co/z6dHmMp" class="postlink">https://ibb.co/z6dHmMp</a> (Little endian)<br>
<br>
<a href="https://ibb.co/GWxSFY4" class="postlink">https://ibb.co/GWxSFY4</a> (Big endian)<br>
<br>
Since increasing pointer value makes the string shorter, then decreasing it should make it longer (by reading fragments of previous string). Does this mean that pointers mark beginning of the string, while null terminators mark its end?<br>
<br>
I don't know if you played the game; it has a "Don's View", where various things can be viewed - including "Family Tree" and businesses (with owners). The very first string I changed was "Your Family" (string length 12) at offset 00012F44; I changed it to "Corleone" (string length 9) without editing pointers, I just filled the remaining bytes with zeroes - and the text was properly shown in game.<br>
So the player family name now was <strong class="text-strong"><span style="text-decoration:underline">Corleone</span></strong> instead of <strong class="text-strong"><span style="text-decoration:underline">Your Family</span></strong>; the business ownership text was also changed, since it also reads from the same offset - for example, instead of reading <em class="text-italics">Appliance King - Controlled by Your Family</em> it reads <em class="text-italics">Appliance King - Controlled by Corleone</em>.<br>
<br>
But it worked this way because I didn't edit previous or next string. <br>
Again, i'll take the first 2 Corleone names for example; changing <span style="text-decoration:underline"><strong class="text-strong">"Big Greenie" Grinberg to Alessandro Esposito</strong></span> (length 23 to 20) and <span style="text-decoration:underline"><strong class="text-strong">Michael Galli to Virgilio Zingaro</strong></span> (length 14 to 17). The pointer value for the first name is 63 83 (25475 for int16/uint16) and 7A 83 (31363 for int16/uint16) for the next one. <br>
<br>
Michael Galli (Virgilio Zingaro) after pointer editing in game:<br>
<br>
<a href="https://ibb.co/bXcqbKZ" class="postlink">https://ibb.co/bXcqbKZ</a> (original)<br>
<br>
<a href="https://ibb.co/NYjSCx9" class="postlink">https://ibb.co/NYjSCx9</a> (edited)<br>
<br>
Alessandro Esposito string works just well without pointer editing, since its beginning isn't moved. The screenshots for this one are missing because I forgot to take a screenshot in game, he was spawned first and I was focused on finding Zingaro.<br>
<br>
The obvious limits for editing the decompressed file are file size and total number of strings. Are these the only limits?</div>

			
			
									
						<div id='list_thanks170875'>
</div>
<div id='div_post_reput170875'>
</div>

										
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

				<div id="p170883" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile170883">
			<dt class="has-profile-rank has-avatar">
				<div class="avatar-container">
																<a href="./memberlist.php?mode=viewprofile&u=43476.html" class="avatar"><img class="avatar" src="./download/file.php?avatar=43476_1450396086.png" width="80" height="80" alt="User avatar" /></a>														</div>
								<a href="./memberlist.php?mode=viewprofile&u=43476.html" style="color: #00AA00;" class="username-coloured">ikskoks</a>							</dt>

						<dd class="profile-rank">Moderator</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=43476&amp;sr=posts">1668</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Thu Jul 26, 2012 5:06 pm</dd>		
		
																<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Poland, Łódź</dd>
							    <dd class="profile-posts" data-user-give-id="43476"><strong>Has&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/43476/true">648 times</a></dd>
    <dd class="profile-posts" data-user-receive-id="43476"><strong>Been&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/43476/false">432 times</a></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact ikskoks">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact ikskoks</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=170883" title="Send private message">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																																																<a href="http://ikskoks.pl/" title="Website" class="last-cell">
										<span class="contact-icon phpbb_website-icon">Website</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content170883">

					<h3 >
						<a href="./viewtopic.php?p=170883#p170883">Re: Help with The Godfather II .str files</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/170883/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=170883" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post170883' href="./viewtopic.php?f=35&amp;p=170883&amp;thanks=170883&amp;to_id=43476&amp;from_id=123876" title="Say Thanks to the author of the post: ikskoks"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=170883#p170883" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="./memberlist.php?mode=viewprofile&u=43476.html" style="color: #00AA00;" class="username-coloured">ikskoks</a></strong> &raquo; </span><time datetime="2021-01-28T11:49:31+00:00">Thu Jan 28, 2021 12:49 pm</time>
			</p>
			
			
			
			<div class="content"><blockquote class="uncited"><div>Does this mean that pointers mark beginning of the string, while null terminators mark its end?</div></blockquote>
Yes, exactly.<br>

<blockquote class="uncited"><div>The obvious limits for editing the decompressed file are file size and total number of strings. Are these the only limits?</div></blockquote>

Yes. <img class="smilies" src="./images/smilies/wink.gif" width="15" height="15" alt=";)" title="Wink"></div>

			
			
									
						<div id='list_thanks170883'>
</div>
<div id='div_post_reput170883'>
</div>

							<div id="sig170883" class="signature"><a href="http://ikskoks.pl/" class="postlink">http://ikskoks.pl/</a><br>
<a href="https://www.facebook.com/ikskoks" class="postlink">https://www.facebook.com/ikskoks</a><br>
<img src="http://i.iplsc.com/flaga-polski/000540UYV3RNYWMH-C122-F4.gif" class="postimage" alt="Image"></div>			
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

				<div id="p170917" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile170917">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="./memberlist.php?mode=viewprofile&u=82288.html" class="username">venixuc</a>							</dt>

						<dd class="profile-rank">beginner</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=82288&amp;sr=posts">23</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Tue Aug 13, 2019 3:00 am</dd>		
		
						    <dd class="profile-posts" data-user-give-id="82288"><strong>Has&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/82288/true">2 times</a></dd>
    <dd class="profile-posts" data-user-receive-id="82288"><strong>Been&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/82288/false">1 time</a></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact venixuc">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact venixuc</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=170917" title="Send private message" class="last-cell">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content170917">

					<h3 >
						<a href="./viewtopic.php?p=170917#p170917">Re: Help with The Godfather II .str files</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/170917/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=170917" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post170917' href="./viewtopic.php?f=35&amp;p=170917&amp;thanks=170917&amp;to_id=82288&amp;from_id=123876" title="Say Thanks to the author of the post: venixuc"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=170917#p170917" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="./memberlist.php?mode=viewprofile&u=82288.html" class="username">venixuc</a></strong> &raquo; </span><time datetime="2021-01-29T00:56:43+00:00">Fri Jan 29, 2021 1:56 am</time>
			</p>
			
			
			
			<div class="content">Well, the game was released in April 2009 - if we exclude the trainers and graphic enhancement (which is also an "external" mod like Silent's Patch), it took nearly 12 years to be able to mod it. Was it because it never became as popular as several other games of its genre, or because the file formats weren't easy to reverse, or both, I don't know. <br>
<br>
I started playing it in 2015; by that time, the online mode was already history - not that I would've played it anyways, since I'm not into online gaming. But, I've stumbled upon numerous sites where people discussed translating the game into other languages - to this day, no one succeded. This means that there are still people who care about this game (offline, single player mode). <br>
<br>
Since the English localization is everything I need, I definitely won't be translating it; I'm only interested in editing names. However, I believe that this topic, with all the information, screenshots and attachments, is a great place to start for anyone who may be interested in translating the game into their language.<br>
<br>
ikskoks, thanks for your patience and time you invested in this topic.</div>

			
			
									
						<div id='list_thanks170917'>
	<div class="notice">
		<dl>
			
			<dt>These users thanked the author <a href="./memberlist.php?mode=viewprofile&u=82288.html" class="username">venixuc</a> for the post: </dt>
			<dd><span title="Fri Jan 29, 2021 9:30 am"><a href="./memberlist.php?mode=viewprofile&u=43476.html" style="color: #00AA00;" class="username-coloured">ikskoks</a></span></dd>
		</dl>
	</div>
</div>
<div id='div_post_reput170917'>
	<div class="notice">
		<dl>
			<dt class="small"><strong>Rating:</strong>&nbsp;1.72%</dt>
			<dd>
						<div style="width: 150px; height: 15px;" class="thanks_reput_image_back"><div style="height: 15px; width: 1.72%;" class="thanks_reput_image"></div></div>&nbsp;
						</dd>
		</dl>
	</div>
</div>

										
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

				<div id="p170929" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile170929">
			<dt class="has-profile-rank has-avatar">
				<div class="avatar-container">
																<a href="./memberlist.php?mode=viewprofile&u=43476.html" class="avatar"><img class="avatar" src="./download/file.php?avatar=43476_1450396086.png" width="80" height="80" alt="User avatar" /></a>														</div>
								<a href="./memberlist.php?mode=viewprofile&u=43476.html" style="color: #00AA00;" class="username-coloured">ikskoks</a>							</dt>

						<dd class="profile-rank">Moderator</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=43476&amp;sr=posts">1668</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Thu Jul 26, 2012 5:06 pm</dd>		
		
																<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Poland, Łódź</dd>
							    <dd class="profile-posts" data-user-give-id="43476"><strong>Has&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/43476/true">648 times</a></dd>
    <dd class="profile-posts" data-user-receive-id="43476"><strong>Been&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/43476/false">432 times</a></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact ikskoks">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact ikskoks</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=170929" title="Send private message">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																																																<a href="http://ikskoks.pl/" title="Website" class="last-cell">
										<span class="contact-icon phpbb_website-icon">Website</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content170929">

					<h3 >
						<a href="./viewtopic.php?p=170929#p170929">Re: Help with The Godfather II .str files</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/170929/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=170929" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post170929' href="./viewtopic.php?f=35&amp;p=170929&amp;thanks=170929&amp;to_id=43476&amp;from_id=123876" title="Say Thanks to the author of the post: ikskoks"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=170929#p170929" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="./memberlist.php?mode=viewprofile&u=43476.html" style="color: #00AA00;" class="username-coloured">ikskoks</a></strong> &raquo; </span><time datetime="2021-01-29T09:08:56+00:00">Fri Jan 29, 2021 10:08 am</time>
			</p>
			
			
			
			<div class="content"><blockquote class="uncited"><div>ikskoks, thanks for your patience and time you invested in this topic.</div></blockquote>

Sure, no problem. <img class="smilies" src="./images/smilies/wink.gif" width="15" height="15" alt=";)" title="Wink"></div>

			
			
									
						<div id='list_thanks170929'>
</div>
<div id='div_post_reput170929'>
</div>

							<div id="sig170929" class="signature"><a href="http://ikskoks.pl/" class="postlink">http://ikskoks.pl/</a><br>
<a href="https://www.facebook.com/ikskoks" class="postlink">https://www.facebook.com/ikskoks</a><br>
<img src="http://i.iplsc.com/flaga-polski/000540UYV3RNYWMH-C122-F4.gif" class="postimage" alt="Image"></div>			
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

				<div id="p170966" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile170966">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="./memberlist.php?mode=viewprofile&u=82288.html" class="username">venixuc</a>							</dt>

						<dd class="profile-rank">beginner</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=82288&amp;sr=posts">23</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Tue Aug 13, 2019 3:00 am</dd>		
		
						    <dd class="profile-posts" data-user-give-id="82288"><strong>Has&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/82288/true">2 times</a></dd>
    <dd class="profile-posts" data-user-receive-id="82288"><strong>Been&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/82288/false">1 time</a></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact venixuc">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact venixuc</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=170966" title="Send private message" class="last-cell">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content170966">

					<h3 >
						<a href="./viewtopic.php?p=170966#p170966">Re: Help with The Godfather II .str files</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/170966/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=170966" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post170966' href="./viewtopic.php?f=35&amp;p=170966&amp;thanks=170966&amp;to_id=82288&amp;from_id=123876" title="Say Thanks to the author of the post: venixuc"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=170966#p170966" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="./memberlist.php?mode=viewprofile&u=82288.html" class="username">venixuc</a></strong> &raquo; </span><time datetime="2021-01-31T01:29:41+00:00">Sun Jan 31, 2021 2:29 am</time>
			</p>
			
			
			
			<div class="content">One last thing. When refpack-brute-force is used for compression, the file size is 125 kb as opposed to 127 kb. There is no problem in reimporting the smaller file into .str.<br>
<br>
But, it compresses it in a way that after compressed data, there are exactly 2901 zerobytes added during reimporting to match the original size - this is relatively large waste of space; these extra bytes could be used for replacing shorter strings with longer ones.<br>
<br>
I decided to test that out, knowing what could happen - I replaced the 12-characters long string with another one (19 characters long) by overwriting it in hex editor,  and removed 7 zerobytes. When I launched the game, it didn't crash; but as I expected, the text stored after that string was displayed incorrectly due to the strings being shifted without pointer editing (every pointer after that string has to have its value increased by 7).<br>
<br>
The last pointer value inside decompressed file is at offset 00011B84, so doing this manually would take ages. Is there a faster way to update the pointer values after inserting a longer string?</div>

			
			
									
						<div id='list_thanks170966'>
</div>
<div id='div_post_reput170966'>
</div>

										
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

				<div id="p170969" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile170969">
			<dt class="has-profile-rank has-avatar">
				<div class="avatar-container">
																<a href="./memberlist.php?mode=viewprofile&u=43476.html" class="avatar"><img class="avatar" src="./download/file.php?avatar=43476_1450396086.png" width="80" height="80" alt="User avatar" /></a>														</div>
								<a href="./memberlist.php?mode=viewprofile&u=43476.html" style="color: #00AA00;" class="username-coloured">ikskoks</a>							</dt>

						<dd class="profile-rank">Moderator</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=43476&amp;sr=posts">1668</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Thu Jul 26, 2012 5:06 pm</dd>		
		
																<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Poland, Łódź</dd>
							    <dd class="profile-posts" data-user-give-id="43476"><strong>Has&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/43476/true">648 times</a></dd>
    <dd class="profile-posts" data-user-receive-id="43476"><strong>Been&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/43476/false">432 times</a></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact ikskoks">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact ikskoks</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=170969" title="Send private message">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																																																<a href="http://ikskoks.pl/" title="Website" class="last-cell">
										<span class="contact-icon phpbb_website-icon">Website</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content170969">

					<h3 >
						<a href="./viewtopic.php?p=170969#p170969">Re: Help with The Godfather II .str files</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/170969/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=170969" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post170969' href="./viewtopic.php?f=35&amp;p=170969&amp;thanks=170969&amp;to_id=43476&amp;from_id=123876" title="Say Thanks to the author of the post: ikskoks"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=170969#p170969" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="./memberlist.php?mode=viewprofile&u=43476.html" style="color: #00AA00;" class="username-coloured">ikskoks</a></strong> &raquo; </span><time datetime="2021-01-31T10:11:41+00:00">Sun Jan 31, 2021 11:11 am</time>
			</p>
			
			
			
			<div class="content"><blockquote class="uncited"><div>Is there a faster way to update the pointer values after inserting a longer string?</div></blockquote>

Yeah, you could write text importer which automates this task and it changes pointers during program execution.</div>

			
			
									
						<div id='list_thanks170969'>
</div>
<div id='div_post_reput170969'>
</div>

							<div id="sig170969" class="signature"><a href="http://ikskoks.pl/" class="postlink">http://ikskoks.pl/</a><br>
<a href="https://www.facebook.com/ikskoks" class="postlink">https://www.facebook.com/ikskoks</a><br>
<img src="http://i.iplsc.com/flaga-polski/000540UYV3RNYWMH-C122-F4.gif" class="postimage" alt="Image"></div>			
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

				<div id="p170998" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile170998">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="./memberlist.php?mode=viewprofile&u=82288.html" class="username">venixuc</a>							</dt>

						<dd class="profile-rank">beginner</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=82288&amp;sr=posts">23</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Tue Aug 13, 2019 3:00 am</dd>		
		
						    <dd class="profile-posts" data-user-give-id="82288"><strong>Has&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/82288/true">2 times</a></dd>
    <dd class="profile-posts" data-user-receive-id="82288"><strong>Been&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/82288/false">1 time</a></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact venixuc">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact venixuc</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=170998" title="Send private message" class="last-cell">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content170998">

					<h3 >
						<a href="./viewtopic.php?p=170998#p170998">Re: Help with The Godfather II .str files</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/170998/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=170998" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post170998' href="./viewtopic.php?f=35&amp;p=170998&amp;thanks=170998&amp;to_id=82288&amp;from_id=123876" title="Say Thanks to the author of the post: venixuc"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=170998#p170998" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="./memberlist.php?mode=viewprofile&u=82288.html" class="username">venixuc</a></strong> &raquo; </span><time datetime="2021-02-01T00:53:09+00:00">Mon Feb 01, 2021 1:53 am</time>
			</p>
			
			
			
			<div class="content"><blockquote class="uncited"><div>Yeah, you could write text importer which automates this task and it changes pointers during program execution.</div></blockquote>

That would be the best solution - basically a custom tool. However, it would require not only understanding the pointers and text strings, but also the data above them. According to <a href="https://www.metadata2go.com/" class="postlink">https://www.metadata2go.com/</a>, the decompressed file header looks like this:<br>
<a href="https://ibb.co/7n8ZhvQ" class="postlink">https://ibb.co/7n8ZhvQ</a><br>
I don't know what the data between the header and the pointers block represents. <br>
<br>
When I edit a string and move its beginning, I only edit the uint16 pointer value - the other values update automatically. While the last pointer is at offset 00011B84, the last important pointer is at offset 0000F0A0 (it belongs to last text string stored inside NAM_1.dat - <span style="text-decoration:underline"><strong class="text-strong">Cristo</strong></span>); other pointers belong to text strings located in NAM_2.bal.<br>
<br>
Considering the fact that editing kapR and compressing it to NAM_1.dat mustn't move the NAM_2.bal content (it would mean that the .str size is changed), the pointers from 0000F0A4 to 00011B84 don't require value editing.<br>
<br>
I never considered a custom text importer for kapR. If I replaced, for example, the string <span style="text-decoration:underline"><strong class="text-strong">Steve Szakal</strong></span> (12 characters) at offset 00018CB1 (pointer at 0000A364) with 19-characters long string, all pointers from 0000A368 to 0000F0A4 would require having their values increased by 7.<br>
<br>
I thought of something like this: replacing the string with hex editor, then running some kind of external script which would increase (or decrease) the pointer values at required offsets. It would be necessary to repeat this for every longer string, but still  easier than reversing the kapR and writing a custom tool (in my opinion).<br>
<br>
I'm not quite sure what to do; but if everything else fails, I'll go back to manual pointer editing.<br>
------------------------------------------------------------------------------------------------------------------------------------------------<br>
<br>
The Granados mobster names are located inside NAM_2.bal file. That file is just the plain text; the pointers are inside NAM_1.dat. How to find corresponding NAM_2.bal pointers inside kapR?</div>

			
			
									
						<div id='list_thanks170998'>
</div>
<div id='div_post_reput170998'>
</div>

										
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

				<div id="p171024" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile171024">
			<dt class="has-profile-rank has-avatar">
				<div class="avatar-container">
																<a href="./memberlist.php?mode=viewprofile&u=43476.html" class="avatar"><img class="avatar" src="./download/file.php?avatar=43476_1450396086.png" width="80" height="80" alt="User avatar" /></a>														</div>
								<a href="./memberlist.php?mode=viewprofile&u=43476.html" style="color: #00AA00;" class="username-coloured">ikskoks</a>							</dt>

						<dd class="profile-rank">Moderator</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=43476&amp;sr=posts">1668</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Thu Jul 26, 2012 5:06 pm</dd>		
		
																<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Poland, Łódź</dd>
							    <dd class="profile-posts" data-user-give-id="43476"><strong>Has&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/43476/true">648 times</a></dd>
    <dd class="profile-posts" data-user-receive-id="43476"><strong>Been&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/43476/false">432 times</a></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact ikskoks">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact ikskoks</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=171024" title="Send private message">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																																																<a href="http://ikskoks.pl/" title="Website" class="last-cell">
										<span class="contact-icon phpbb_website-icon">Website</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content171024">

					<h3 >
						<a href="./viewtopic.php?p=171024#p171024">Re: Help with The Godfather II .str files</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/171024/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=171024" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post171024' href="./viewtopic.php?f=35&amp;p=171024&amp;thanks=171024&amp;to_id=43476&amp;from_id=123876" title="Say Thanks to the author of the post: ikskoks"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=171024#p171024" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="./memberlist.php?mode=viewprofile&u=43476.html" style="color: #00AA00;" class="username-coloured">ikskoks</a></strong> &raquo; </span><time datetime="2021-02-01T17:30:02+00:00">Mon Feb 01, 2021 6:30 pm</time>
			</p>
			
			
			
			<div class="content"><blockquote class="uncited"><div>I thought of something like this: replacing the string with hex editor, then running some kind of external script which would increase (or decrease) the pointer values at required offsets. It would be necessary to repeat this for every longer string, but still easier than reversing the kapR and writing a custom tool (in my opinion).</div></blockquote>

That could work, but why bother, when you lose all benefits of the text importer.<br>
<br>
I would do it like that:<br>
<br>
#Export# (that's basically similar logic to the one from my tool in Python)<br>
1. Read unknown data block from kapr and save it as "temp.bin"<br>
2. Read pointer table<br>
3. Read all texts using pointer table<br>
4. Save text in file "out.txt"<br>
<br>
#Import<br>
1. Read data from "temp.bin"<br>
2. Read "out.txt"<br>
3. Calculate new pointers from string lengths<br>
4. Save data from temp.bin, then new pointer table and then new texts as a new "kapr" file.<br>
5. (optionally) do some checks on file size etc.<br>
6. (optionally) automate it even more by executing brute-force refpack at the end.<br>

<blockquote class="uncited"><div>The Granados mobster names are located inside NAM_2.bal file. That file is just the plain text; the pointers are inside NAM_1.dat. How to find corresponding NAM_2.bal pointers inside kapR?</div></blockquote>

Why do you think pointers are in NAM_1.dat? I don't see any pointers at the beginning of this unknown data block.<br>
Besides, BAL file uses completely different format (string + NULL), so I think that pointers are somewhere in the game executable.</div>

			
			
									
						<div id='list_thanks171024'>
</div>
<div id='div_post_reput171024'>
</div>

							<div id="sig171024" class="signature"><a href="http://ikskoks.pl/" class="postlink">http://ikskoks.pl/</a><br>
<a href="https://www.facebook.com/ikskoks" class="postlink">https://www.facebook.com/ikskoks</a><br>
<img src="http://i.iplsc.com/flaga-polski/000540UYV3RNYWMH-C122-F4.gif" class="postimage" alt="Image"></div>			
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

				<div id="p171034" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile171034">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="./memberlist.php?mode=viewprofile&u=82288.html" class="username">venixuc</a>							</dt>

						<dd class="profile-rank">beginner</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=82288&amp;sr=posts">23</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Tue Aug 13, 2019 3:00 am</dd>		
		
						    <dd class="profile-posts" data-user-give-id="82288"><strong>Has&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/82288/true">2 times</a></dd>
    <dd class="profile-posts" data-user-receive-id="82288"><strong>Been&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/82288/false">1 time</a></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact venixuc">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact venixuc</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=171034" title="Send private message" class="last-cell">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content171034">

					<h3 >
						<a href="./viewtopic.php?p=171034#p171034">Re: Help with The Godfather II .str files</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/171034/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=171034" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post171034' href="./viewtopic.php?f=35&amp;p=171034&amp;thanks=171034&amp;to_id=82288&amp;from_id=123876" title="Say Thanks to the author of the post: venixuc"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=171034#p171034" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="./memberlist.php?mode=viewprofile&u=82288.html" class="username">venixuc</a></strong> &raquo; </span><time datetime="2021-02-02T00:54:45+00:00">Tue Feb 02, 2021 1:54 am</time>
			</p>
			
			
			
			<div class="content"><blockquote class="uncited"><div>Why do you think pointers are in NAM_1.dat? I don't see any pointers at the beginning of this unknown data block.</div></blockquote>

I don't think that the NAM_2.bal pointers are within the unknown data block inside NAM_1.dat; that wouldn't make sense, since that block is located above pointers block. I think that NAM_2.bal pointers are inside NAM_1.dat's <span style="text-decoration:underline">pointer block</span>.<br>
<br>
When I used your Python script to get string pointers from NAM_1.dat, the last one listed was at offset 0000F0A0 (or 00061600):<br>
<a href="https://ibb.co/mX7sdKH" class="postlink">https://ibb.co/mX7sdKH</a><br>
<br>
However, that pointer isn't the last one inside NAM_1.dat; there are plenty more pointers from 0000F0A4 to 00011B84:<br>
<br>
The next one:<br>
<a href="https://ibb.co/g6Djmgw" class="postlink">https://ibb.co/g6Djmgw</a><br>
<br>
The last one, before first text strings:<br>
<a href="https://ibb.co/LPfmLV3" class="postlink">https://ibb.co/LPfmLV3</a><br>
<br>
Roughly 2/3 of the text is inside NAM_1.dat, the remaining third is inside NAM_2.bal. I strongly suspect that NAM_2 is actually .dat file, the .bal extension could be derived from first 4 bytes (bal ):<br>
<a href="https://ibb.co/GFwjmJZ" class="postlink">https://ibb.co/GFwjmJZ</a><br>
<br>
And, the last string inside NAM_1.dat is <span style="text-decoration:underline"><strong class="text-strong">Cristo</strong></span>, but that isn't a standalone string; the full string is <span style="text-decoration:underline"><strong class="text-strong">Cristobal Borbon</strong></span> - <span style="text-decoration:underline"><strong class="text-strong">bal Borbon</strong></span> fragment is inside NAM_2. There is no null terminator after <em class="text-italics">Cristo</em> string inside NAM_1.dat, nor before <em class="text-italics">bal Borbon</em> inside NAM_2 - this probably means that pointer at 0000F0A0 covers the whole string.<br>
<br>
If that's the case, then pointer at 0000F0A4 should belong to <span style="text-decoration:underline">Cody Flowers</span> string - the first standalone string inside NAM_2.<br>
<br>
Also, this part of your Python script caught my attention:<br>

<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>pointer_arr_offset = 36308  # These values are hardcoded 
    num_of_entries = 6324       # for decompressed NAM_1.DAT from The Godfather</code></pre></div>

So I decided to merge kapR with NAM_2.bal:<br>
<a href="https://ibb.co/dMcVD1D" class="postlink">https://ibb.co/dMcVD1D</a><br>
This could be useful for connecting the remaining pointers with their strings - but num_of_entries value has to be changed.<br>
<br>
I've attached kapR merged with NAM_2. What would be the new value for num_of_entries?<br>
<br>

<blockquote class="uncited"><div>That could work, but why bother, when you lose all benefits of the text importer.</div></blockquote>

My programming skills aren't the best - if I decided to write something as complex as that, it would probably take more time than editing every single pointer manually. And I obviously can't ask you to do it, because I'm not the only one on this forum who needs help.<br>
But if you get some time, the pointer value-changing script would be enough. Don't take this as a request, neither.</div>

			
							<dl class="attachbox">
					<dt>
						Attachments
					</dt>
											<dd>
			
		
		
				<dl class="file">
			<dt><span class="imageset icon_topic_attach"></span> <a class="postlink" href="./download/file.php?id=19445">kapR - merged with NAM_2.rar</a></dt>
						<dd>(91.88 KiB) Downloaded 6 times</dd>
		</dl>
		
			</dd>
									</dl>
			
									
						<div id='list_thanks171034'>
</div>
<div id='div_post_reput171034'>
</div>

										
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

				<div id="p171042" class="post has-profile bg1">
		<div class="inner">

		<dl class="postprofile" id="profile171042">
			<dt class="has-profile-rank has-avatar">
				<div class="avatar-container">
																<a href="./memberlist.php?mode=viewprofile&u=43476.html" class="avatar"><img class="avatar" src="./download/file.php?avatar=43476_1450396086.png" width="80" height="80" alt="User avatar" /></a>														</div>
								<a href="./memberlist.php?mode=viewprofile&u=43476.html" style="color: #00AA00;" class="username-coloured">ikskoks</a>							</dt>

						<dd class="profile-rank">Moderator</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=43476&amp;sr=posts">1668</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Thu Jul 26, 2012 5:06 pm</dd>		
		
																<dd class="profile-custom-field profile-phpbb_location"><strong>Location:</strong> Poland, Łódź</dd>
							    <dd class="profile-posts" data-user-give-id="43476"><strong>Has&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/43476/true">648 times</a></dd>
    <dd class="profile-posts" data-user-receive-id="43476"><strong>Been&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/43476/false">432 times</a></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact ikskoks">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact ikskoks</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=171042" title="Send private message">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																																																<a href="http://ikskoks.pl/" title="Website" class="last-cell">
										<span class="contact-icon phpbb_website-icon">Website</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content171042">

					<h3 >
						<a href="./viewtopic.php?p=171042#p171042">Re: Help with The Godfather II .str files</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/171042/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=171042" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post171042' href="./viewtopic.php?f=35&amp;p=171042&amp;thanks=171042&amp;to_id=43476&amp;from_id=123876" title="Say Thanks to the author of the post: ikskoks"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=171042#p171042" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="./memberlist.php?mode=viewprofile&u=43476.html" style="color: #00AA00;" class="username-coloured">ikskoks</a></strong> &raquo; </span><time datetime="2021-02-02T09:11:24+00:00">Tue Feb 02, 2021 10:11 am</time>
			</p>
			
			
			
			<div class="content"><blockquote class="uncited"><div>I don't think that the NAM_2.bal pointers are within the unknown data block inside NAM_1.dat; that wouldn't make sense, since that block is located above pointers block. I think that NAM_2.bal pointers are inside NAM_1.dat's pointer block.</div></blockquote>
<blockquote class="uncited"><div>However, that pointer isn't the last one inside NAM_1.dat; there are plenty more pointers from 0000F0A4 to 00011B84:</div></blockquote>

Yes, of course, now I see it. <img class="smilies" src="./images/smilies/%5Bcolon%5DD.gif" width="15" height="15" alt=":D" title="Very Happy"> You are right. Good catch with this one. To be honest, I haven't noticed it earlier.<br>

<blockquote class="uncited"><div>I've attached kapR merged with NAM_2. What would be the new value for num_of_entries?</div></blockquote>

New value should be 9069. That will cover merged files.<br>

<blockquote class="uncited"><div>But if you get some time, the pointer value-changing script would be enough. Don't take this as a request, neither.</div></blockquote>
I'll see what I can do. No promises, but I will check it. <img class="smilies" src="./images/smilies/wink.gif" width="15" height="15" alt=";)" title="Wink"></div>

			
			
									
						<div id='list_thanks171042'>
</div>
<div id='div_post_reput171042'>
</div>

							<div id="sig171042" class="signature"><a href="http://ikskoks.pl/" class="postlink">http://ikskoks.pl/</a><br>
<a href="https://www.facebook.com/ikskoks" class="postlink">https://www.facebook.com/ikskoks</a><br>
<img src="http://i.iplsc.com/flaga-polski/000540UYV3RNYWMH-C122-F4.gif" class="postimage" alt="Image"></div>			
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

				<div id="p171060" class="post has-profile bg2">
		<div class="inner">

		<dl class="postprofile" id="profile171060">
			<dt class="has-profile-rank no-avatar">
				<div class="avatar-container">
																			</div>
								<a href="./memberlist.php?mode=viewprofile&u=82288.html" class="username">venixuc</a>							</dt>

						<dd class="profile-rank">beginner</dd>			
		<dd class="profile-posts"><strong>Posts:</strong> <a href="./search.php?author_id=82288&amp;sr=posts">23</a></dd>		<dd class="profile-joined"><strong>Joined:</strong> Tue Aug 13, 2019 3:00 am</dd>		
		
						    <dd class="profile-posts" data-user-give-id="82288"><strong>Has&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/82288/true">2 times</a></dd>
    <dd class="profile-posts" data-user-receive-id="82288"><strong>Been&nbsp;thanked:</strong> <a href="/app.php/thankslist/givens/82288/false">1 time</a></dd>

							<dd class="profile-contact">
				<strong>Contact:</strong>
				<div class="dropdown-container dropdown-left">
					<a href="#" class="dropdown-trigger" title="Contact venixuc">
						<i class="icon fa-commenting-o fa-fw icon-lg" aria-hidden="true"></i><span class="sr-only">Contact venixuc</span>
					</a>
					<div class="dropdown">
						<div class="pointer"><div class="pointer-inner"></div></div>
						<div class="dropdown-contents contact-icons">
																																								<div>
																	<a href="./ucp.php?i=pm&amp;mode=compose&amp;action=quotepost&amp;p=171060" title="Send private message" class="last-cell">
										<span class="contact-icon pm-icon">Send private message</span>									</a>
																	</div>
																					</div>
					</div>
				</div>
			</dd>
				
		</dl>

		<div class="postbody">
						<div id="post_content171060">

					<h3 >
						<a href="./viewtopic.php?p=171060#p171060">Re: Help with The Godfather II .str files</a>
		</h3>

													<ul class="post-buttons">
																										<li>
							<a href="/app.php/post/171060/report" title="Report this post" class="button button-icon-only">
								<i class="icon fa-exclamation fa-fw" aria-hidden="true"></i><span class="sr-only">Report</span>
							</a>
						</li>
																										<li>
							<a href="./posting.php?mode=quote&amp;p=171060" title="Reply with quote" class="button button-icon-only">
								<i class="icon fa-quote-left fa-fw" aria-hidden="true"></i><span class="sr-only">Quote</span>
							</a>
						</li>
													<li>
			<a id='lnk_thanks_post171060' href="./viewtopic.php?f=35&amp;p=171060&amp;thanks=171060&amp;to_id=82288&amp;from_id=123876" title="Say Thanks to the author of the post: venixuc"  class="button button-icon-only">
				<i class="icon thanks-icon fa-fw" aria-hidden="true"></i><span class="sr-only">Thanks</span>
			</a>
		</li>
					</ul>
							
						<p class="author">
									<a class="unread" href="./viewtopic.php?p=171060#p171060" title="Post">
						<i class="icon fa-file fa-fw icon-lightgray icon-md" aria-hidden="true"></i><span class="sr-only">Post</span>
					</a>
								<span class="responsive-hide">by <strong><a href="./memberlist.php?mode=viewprofile&u=82288.html" class="username">venixuc</a></strong> &raquo; </span><time datetime="2021-02-03T02:40:53+00:00">Wed Feb 03, 2021 3:40 am</time>
			</p>
			
			
			
			<div class="content">Ok.<br>
Now, excluding the header, the .str file is divided in 3 chunks: NAM_1.dat, NAM_2.bal and NAM_3.dat. Their sizes are 127 KB (131,004 bytes), 67.1 KB (68,808 bytes) and 60.7 KB (62,240 bytes) respectively. <br>
<br>
It appears that not only the .str archive size matters, but also the sizes of these individual files. The kapR (decompressed NAM_1.dat) size is 217 KB (222,687 bytes); refpack-brute-force's higher compression ratio creates 2901 spare zerobytes at the end of compressed file, giving an opportunity to make several strings longer than original which then requires updating pointer values for NAM_1.dat strings. <br>
<br>
With NAM_2.bal, the case is different. The text inside it isn't compressed, and the file itself doesn't have spare zerobytes at its end. It can be compressed and reimported into .str, but then the text inside it appears as compressed garbage in game.<br>
<br>
The NAM_3.dat file consists only of zerobytes; it has "LLIF" identificator at the beginning (FILL) which means that this file's purpose is keeping the .str size in check.<br>
<br>
I tried to use NAM_3.dat's zerobytes as spare ones by making one string inside NAM_2.bal 2 bytes longer,and removing 2 zerobytes at NAM_3.dat's end. When I launched the game, it didn't load and it didn't crash; instead, it froze. No keyboard combination worked when I tried exiting to desktop, the only way out was to use the reset button. <br>
<br>
So, when .str size is preserved but with altering size of its chunks, the game locks up - it obviously doesn't have an error statement for this type of situation and gets stuck after unsuccessfull loading and unsuccessfull crashing.<br>
<br>
Is it possible that unknown data block inside NAM_1.dat contains size checks for these 3 chunks? If it does, then it would (theoretically) be possible to edit size checks for NAM_2.bal and NAM_3.dat in order to make the former larger and latter smaller.</div>

			
			
									
						<div id='list_thanks171060'>
</div>
<div id='div_post_reput171060'>
</div>

										
						</div>

		</div>

				<div class="back2top">
						<a href="#top" class="top" title="Top">
				<i class="icon fa-chevron-circle-up fa-fw icon-gray" aria-hidden="true"></i>
				<span class="sr-only">Top</span>
			</a>
					</div>
		
		</div>
	</div>

	

	<div class="action-bar bar-bottom">
	
			<a href="./posting.php?mode=reply&amp;t=23310" class="button" title="Post a reply">
							<span>Post Reply</span> <i class="icon fa-reply fa-fw" aria-hidden="true"></i>
					</a>
		
		<div class="dropdown-container dropdown-button-control topic-tools">
		<span title="Topic tools" class="button button-secondary dropdown-trigger dropdown-select">
			<i class="icon fa-wrench fa-fw" aria-hidden="true"></i>
			<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
		</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
													<li>
						<a href="./viewtopic.php?uid=123876&amp;f=35&amp;t=23310&amp;watch=topic&amp;start=15&amp;hash=5a3a11b5" class="watch-topic-link" title="Subscribe topic" data-ajax="toggle_link" data-toggle-class="icon fa-square-o fa-fw" data-toggle-text="Unsubscribe topic" data-toggle-url="./viewtopic.php?uid=123876&amp;f=35&amp;t=23310&amp;unwatch=topic&amp;start=15&amp;hash=5a3a11b5" data-update-all=".watch-topic-link">
							<i class="icon fa-check-square-o fa-fw" aria-hidden="true"></i><span>Subscribe topic</span>
						</a>
					</li>
													<li>
						<a href="./viewtopic.php?t=23310&amp;start=15&amp;bookmark=1&amp;hash=5a3a11b5" class="bookmark-link" title="Bookmark topic" data-ajax="alt_text" data-alt-text="Remove from bookmarks" data-update-all=".bookmark-link">
							<i class="icon fa-bookmark-o fa-fw" aria-hidden="true"></i><span>Bookmark topic</span>
						</a>
					</li>
																<li>
					<a href="./memberlist.php?mode=email&amp;t=23310" title="Email topic">
						<i class="icon fa-envelope-o fa-fw" aria-hidden="true"></i><span>Email topic</span>
					</a>
				</li>
												<li>
					<a href="./viewtopic.php?t=23310&amp;start=15&amp;view=print" title="Print view" accesskey="p">
						<i class="icon fa-print fa-fw" aria-hidden="true"></i><span>Print view</span>
					</a>
				</li>
											</ul>
		</div>
	</div>

			<form method="post" action="./viewtopic.php?t=23310&amp;start=15">
		<div class="dropdown-container dropdown-container-left dropdown-button-control sort-tools">
	<span title="Display and sorting options" class="button button-secondary dropdown-trigger dropdown-select">
		<i class="icon fa-sort-amount-asc fa-fw" aria-hidden="true"></i>
		<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
	</span>
	<div class="dropdown hidden">
		<div class="pointer"><div class="pointer-inner"></div></div>
		<div class="dropdown-contents">
			<fieldset class="display-options">
							<label>Display: <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select></label>
								<label>Sort by: <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select></label>
				<label>Direction: <select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select></label>
								<hr class="dashed" />
				<input type="submit" class="button2" name="sort" value="Go" />
						</fieldset>
		</div>
	</div>
</div>
		</form>
	
	
	
			<div class="pagination">
			43 posts
							<ul>
			<li class="arrow previous"><a class="button button-icon-only" href="./23310.html" rel="prev" role="button"><i class="icon fa-chevron-left fa-fw" aria-hidden="true"></i><span class="sr-only">Previous</span></a></li>
				<li><a class="button" href="./23310.html" role="button">1</a></li>
			<li class="active"><span>2</span></li>
				<li><a class="button" href="./viewtopic.php?t=23310&amp;start=30" role="button">3</a></li>
				<li class="arrow next"><a class="button button-icon-only" href="./viewtopic.php?t=23310&amp;start=30" rel="next" role="button"><i class="icon fa-chevron-right fa-fw" aria-hidden="true"></i><span class="sr-only">Next</span></a></li>
	</ul>
					</div>
	</div>


<div class="action-bar actions-jump">
		<p class="jumpbox-return">
		<a href="./viewforum.php?f=35" class="left-box arrow-left" accesskey="r">
			<i class="icon fa-angle-left fa-fw icon-black" aria-hidden="true"></i><span>Return to “Game Localization”</span>
		</a>
	</p>
	
		<div class="jumpbox dropdown-container dropdown-container-right dropdown-up dropdown-left dropdown-button-control" id="jumpbox">
			<span title="Jump to" class="button button-secondary dropdown-trigger dropdown-select">
				<span>Jump to</span>
				<span class="caret"><i class="icon fa-sort-down fa-fw" aria-hidden="true"></i></span>
			</span>
		<div class="dropdown">
			<div class="pointer"><div class="pointer-inner"></div></div>
			<ul class="dropdown-contents">
																				<li><a href="../Forums/26 - XeNTaX - General Discussion.html" class="jumpbox-cat-link"> <span> General Discussion</span></a></li>
																<li><a href="./viewforum.php?f=22" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Holy Cow!</span></a></li>
																<li><a href="./viewforum.php?f=40" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Game news</span></a></li>
																<li><a href="./viewforum.php?f=38" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Game Tech Tips</span></a></li>
																<li><a href="./viewforum.php?f=41" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Cool mods</span></a></li>
																<li><a href="./viewforum.php?f=28" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Website</span></a></li>
																<li><a href="./viewforum.php?f=24" class="jumpbox-cat-link"> <span> Game Modding</span></a></li>
																<li><a href="./viewforum.php?f=29" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Tutorials</span></a></li>
																<li><a href="./viewforum.php?f=16" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; 3D/2D models</span></a></li>
																<li><a href="./viewforum.php?f=17" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Audio file formats</span></a></li>
																<li><a href="./viewforum.php?f=18" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Graphic file formats</span></a></li>
																<li><a href="./viewforum.php?f=36" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Video file formats</span></a></li>
																<li><a href="./viewforum.php?f=10" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Game Archive</span></a></li>
																<li><a href="./viewforum.php?f=21" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Compressed files and methods</span></a></li>
																<li><a href="./viewforum.php?f=13" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Code Talk</span></a></li>
																<li><a href="./viewforum.php?f=35" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Game Localization</span></a></li>
																<li><a href="./viewforum.php?f=30" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Savegames</span></a></li>
																<li><a href="./viewforum.php?f=15" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Old posts</span></a></li>
																<li><a href="./viewforum.php?f=37" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Retro games</span></a></li>
																<li><a href="./viewforum.php?f=25" class="jumpbox-cat-link"> <span> MultiEx Commander</span></a></li>
																<li><a href="./viewforum.php?f=3" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; News</span></a></li>
																<li><a href="./viewforum.php?f=14" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Plugins</span></a></li>
																<li><a href="./viewforum.php?f=9" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Troubleshooting</span></a></li>
																<li><a href="./viewforum.php?f=11" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Miscellaneous</span></a></li>
																<li><a href="./viewforum.php?f=31" class="jumpbox-cat-link"> <span> Tools &amp; Programs</span></a></li>
																<li><a href="./viewforum.php?f=32" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; Game specific tools</span></a></li>
																<li><a href="./viewforum.php?f=33" class="jumpbox-sub-link"><span class="spacer"></span> <span>&#8627; &nbsp; General game tools</span></a></li>
											</ul>
		</div>
	</div>

	</div>


	<div class="stat-block online-list">
		<h3><a href="./viewonline.php">Who is online</a></h3>
		<p>Users browsing this forum: <a href="./memberlist.php?mode=viewprofile&u=123876.html" class="username">escape209</a> and 3 guests</p>
	</div>

			</div>


<div id="page-footer" class="page-footer" role="contentinfo">
	<div class="navbar" role="navigation">
	<div class="inner">

	<ul id="nav-footer" class="nav-footer linklist" role="menubar">
		<li class="breadcrumbs">
									<span class="crumb"><a href="./index.php" data-navbar-reference="index"><i class="icon fa-home fa-fw" aria-hidden="true"></i><span>Board index</span></a></span>					</li>
		
				<li class="rightside">All times are <span title="UTC+1">UTC+01:00</span></li>
							<li class="rightside">
				<a href="./ucp.php?mode=delete_cookies" data-ajax="true" data-refresh="true" role="menuitem">
					<i class="icon fa-trash fa-fw" aria-hidden="true"></i><span>Delete cookies</span>
				</a>
			</li>
							<li class="rightside" data-last-responsive="true">
					<a href="./memberlist.php" title="View complete list of members" role="menuitem">
						<i class="icon fa-group fa-fw" aria-hidden="true"></i><span>Members</span>
					</a>
				</li>
												<li class="rightside" data-last-responsive="true">
				<a href="./memberlist.php?mode=team" role="menuitem">
					<i class="icon fa-shield fa-fw" aria-hidden="true"></i><span>The team</span>
				</a>
			</li>
							</ul>

	</div>
</div>

	<div class="copyright">
				<p class="footer-row">
			<span class="footer-copyright">Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited</span>
		</p>
						<p class="footer-row" role="menu">
			<a class="footer-link" href="./ucp.php?mode=privacy" title="Privacy" role="menuitem">
				<span class="footer-link-text">Privacy</span>
			</a>
			|
			<a class="footer-link" href="./ucp.php?mode=terms" title="Terms" role="menuitem">
				<span class="footer-link-text">Terms</span>
			</a>
		</p>
					</div>

	<div id="darkenwrapper" class="darkenwrapper" data-ajax-error-title="AJAX error" data-ajax-error-text="Something went wrong when processing your request." data-ajax-error-text-abort="User aborted request." data-ajax-error-text-timeout="Your request timed out; please try again." data-ajax-error-text-parsererror="Something went wrong with the request and the server returned an invalid reply.">
		<div id="darken" class="darken">&nbsp;</div>
	</div>

	<div id="phpbb_alert" class="phpbb_alert" data-l-err="Error" data-l-timeout-processing-req="Request timed out.">
		<a href="#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
		<h3 class="alert_title">&nbsp;</h3><p class="alert_text"></p>
	</div>
	<div id="phpbb_confirm" class="phpbb_alert">
		<a href="#" class="alert_close">
			<i class="icon fa-times-circle fa-fw" aria-hidden="true"></i>
		</a>
		<div class="alert_text"></div>
	</div>
</div>

</div>

<div>
	<a id="bottom" class="anchor" accesskey="z"></a>
	</div>

<script src="./assets/javascript/jquery-3.6.0.min.js?assets_version=11"></script>
<script src="./assets/javascript/core.js?assets_version=11"></script>


<script type="text/javascript">
(function($) {  // Avoid conflicts with other libraries

'use strict';
	
	phpbb.addAjaxCallback('reporttosfs', function(data) {
		if (data.postid !== "undefined") {
			$('#sfs' + data.postid).hide();
			phpbb.closeDarkenWrapper(5000);
		}
	});

})(jQuery);
</script>
<script src="./ext/phpbb/boardannouncements/styles/all/template/js/boardannouncements.js?assets_version=11"></script>
<script src="./styles/prosilver/template/forum_fn.js?assets_version=11"></script>
<script src="./styles/prosilver/template/ajax.js?assets_version=11"></script>



</body>
</html>
